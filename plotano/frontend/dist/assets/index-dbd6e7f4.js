(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function A(){}const Fe=e=>e;function G(e,t){for(const n in t)e[n]=t[n];return e}function Ee(e){return e()}function fe(){return Object.create(null)}function q(e){e.forEach(Ee)}function K(e){return typeof e=="function"}function Z(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Be(e){return Object.keys(e).length===0}function Ae(e,...t){if(e==null)return A;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function Ce(e,t,n){e.$$.on_destroy.push(Ae(t,n))}function ae(e,t,n){return e.set(n),t}function Ie(e){return e&&K(e.destroy)?e.destroy:A}const Oe=typeof window<"u";let Ve=Oe?()=>window.performance.now():()=>Date.now(),Se=Oe?e=>requestAnimationFrame(e):A;const V=new Set;function Ne(e){V.forEach(t=>{t.c(e)||(V.delete(t),t.f())}),V.size!==0&&Se(Ne)}function We(e){let t;return V.size===0&&Se(Ne),{promise:new Promise(n=>{V.add(t={c:e,f:n})}),abort(){V.delete(t)}}}function b(e,t){e.appendChild(t)}function S(e,t,n){e.insertBefore(t,n||null)}function O(e){e.parentNode&&e.parentNode.removeChild(e)}function Te(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function z(e){return document.createElement(e)}function M(e){return document.createTextNode(e)}function L(){return M(" ")}function Re(){return M("")}function X(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function $(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function He(e){return Array.from(e.childNodes)}function Y(e,t){t=""+t,e.data!==t&&(e.data=t)}function de(e,t){e.value=t??""}let J;function H(e){J=e}function Je(){if(!J)throw new Error("Function called outside component initialization");return J}function Le(e){Je().$$.on_mount.push(e)}const I=[],pe=[];let W=[];const he=[],Ke=Promise.resolve();let te=!1;function Qe(){te||(te=!0,Ke.then(qe))}function ne(e){W.push(e)}const ee=new Set;let F=0;function qe(){if(F!==0)return;const e=J;do{try{for(;F<I.length;){const t=I[F];F++,H(t),Ue(t.$$)}}catch(t){throw I.length=0,F=0,t}for(H(null),I.length=0,F=0;pe.length;)pe.pop()();for(let t=0;t<W.length;t+=1){const n=W[t];ee.has(n)||(ee.add(n),n())}W.length=0}while(I.length);for(;he.length;)he.pop()();te=!1,ee.clear(),H(e)}function Ue(e){if(e.fragment!==null){e.update(),q(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(ne)}}function Ge(e){const t=[],n=[];W.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),W=t}const U=new Set;let P;function oe(){P={r:0,c:[],p:P}}function se(){P.r||q(P.c),P=P.p}function C(e,t){e&&e.i&&(U.delete(e),e.i(t))}function D(e,t,n,r){if(e&&e.o){if(U.has(e))return;U.add(e),P.c.push(()=>{U.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}function Xe(e,t){e.d(1),t.delete(e.key)}function Ye(e,t,n,r,s,o,l,i,c,u,m,d){let p=e.length,h=o.length,g=p;const k={};for(;g--;)k[e[g].key]=g;const _=[],w=new Map,v=new Map,j=[];for(g=h;g--;){const y=d(s,o,g),N=n(y);let T=l.get(N);T?r&&j.push(()=>T.p(y,t)):(T=u(N,y),T.c()),w.set(N,_[g]=T),N in k&&v.set(N,Math.abs(g-k[N]))}const f=new Set,a=new Set;function E(y){C(y,1),y.m(i,m),l.set(y.key,y),m=y.first,h--}for(;p&&h;){const y=_[h-1],N=e[p-1],T=y.key,Q=N.key;y===N?(m=y.first,p--,h--):w.has(Q)?!l.has(T)||f.has(T)?E(y):a.has(Q)?p--:v.get(T)>v.get(Q)?(a.add(T),E(y)):(f.add(Q),p--):(c(N,l),p--)}for(;p--;){const y=e[p];w.has(y.key)||c(y,l)}for(;h;)E(_[h-1]);return q(j),_}function Me(e,t){const n={},r={},s={$$scope:1};let o=e.length;for(;o--;){const l=e[o],i=t[o];if(i){for(const c in l)c in i||(r[c]=1);for(const c in i)s[c]||(n[c]=i[c],s[c]=1);e[o]=i}else for(const c in l)s[c]=1}for(const l in r)l in n||(n[l]=void 0);return n}function De(e){return typeof e=="object"&&e!==null?e:{}}function Pe(e){e&&e.c()}function le(e,t,n,r){const{fragment:s,after_update:o}=e.$$;s&&s.m(t,n),r||ne(()=>{const l=e.$$.on_mount.map(Ee).filter(K);e.$$.on_destroy?e.$$.on_destroy.push(...l):q(l),e.$$.on_mount=[]}),o.forEach(ne)}function ie(e,t){const n=e.$$;n.fragment!==null&&(Ge(n.after_update),q(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Ze(e,t){e.$$.dirty[0]===-1&&(I.push(e),Qe(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function ce(e,t,n,r,s,o,l,i=[-1]){const c=J;H(e);const u=e.$$={fragment:null,ctx:[],props:o,update:A,not_equal:s,bound:fe(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(c?c.$$.context:[])),callbacks:fe(),dirty:i,skip_bound:!1,root:t.target||c.$$.root};l&&l(u.root);let m=!1;if(u.ctx=n?n(e,t.props||{},(d,p,...h)=>{const g=h.length?h[0]:p;return u.ctx&&s(u.ctx[d],u.ctx[d]=g)&&(!u.skip_bound&&u.bound[d]&&u.bound[d](g),m&&Ze(e,d)),p}):[],u.update(),m=!0,q(u.before_update),u.fragment=r?r(u.ctx):!1,t.target){if(t.hydrate){const d=He(t.target);u.fragment&&u.fragment.l(d),d.forEach(O)}else u.fragment&&u.fragment.c();t.intro&&C(e.$$.fragment),le(e,t.target,t.anchor,t.customElement),qe()}H(c)}class ue{$destroy(){ie(this,1),this.$destroy=A}$on(t,n){if(!K(n))return A;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const s=r.indexOf(n);s!==-1&&r.splice(s,1)}}$set(t){this.$$set&&!Be(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const B=[];function xe(e,t){return{subscribe:x(e,t).subscribe}}function x(e,t=A){let n;const r=new Set;function s(i){if(Z(e,i)&&(e=i,n)){const c=!B.length;for(const u of r)u[1](),B.push(u,e);if(c){for(let u=0;u<B.length;u+=2)B[u][0](B[u+1]);B.length=0}}}function o(i){s(i(e))}function l(i,c=A){const u=[i,c];return r.add(u),r.size===1&&(n=t(s)||A),i(e),()=>{r.delete(u),r.size===0&&n&&(n(),n=null)}}return{set:s,update:o,subscribe:l}}function et(e,t,n){const r=!Array.isArray(e),s=r?[e]:e,o=t.length<2;return xe(n,l=>{let i=!1;const c=[];let u=0,m=A;const d=()=>{if(u)return;m();const h=t(r?c[0]:c,l);o?l(h):m=K(h)?h:A},p=s.map((h,g)=>Ae(h,k=>{c[g]=k,u&=~(1<<g),i&&d()},()=>{u|=1<<g}));return i=!0,d(),function(){q(p),m(),i=!1}})}function _e(e){return Object.prototype.toString.call(e)==="[object Date]"}function re(e,t){if(e===t||e!==e)return()=>e;const n=typeof e;if(n!==typeof t||Array.isArray(e)!==Array.isArray(t))throw new Error("Cannot interpolate values of different type");if(Array.isArray(e)){const r=t.map((s,o)=>re(e[o],s));return s=>r.map(o=>o(s))}if(n==="object"){if(!e||!t)throw new Error("Object cannot be null");if(_e(e)&&_e(t)){e=e.getTime(),t=t.getTime();const o=t-e;return l=>new Date(e+l*o)}const r=Object.keys(t),s={};return r.forEach(o=>{s[o]=re(e[o],t[o])}),o=>{const l={};return r.forEach(i=>{l[i]=s[i](o)}),l}}if(n==="number"){const r=t-e;return s=>e+s*r}throw new Error(`Cannot interpolate ${n} values`)}function tt(e,t={}){const n=x(e);let r,s=e;function o(l,i){if(e==null)return n.set(e=l),Promise.resolve();s=l;let c=r,u=!1,{delay:m=0,duration:d=400,easing:p=Fe,interpolate:h=re}=G(G({},t),i);if(d===0)return c&&(c.abort(),c=null),n.set(e=s),Promise.resolve();const g=Ve()+m;let k;return r=We(_=>{if(_<g)return!0;u||(k=h(e,l),typeof d=="function"&&(d=d(e,l)),u=!0),c&&(c.abort(),c=null);const w=_-g;return w>d?(n.set(e=l),!1):(n.set(e=k(p(w/d))),!0)}),r.promise}return{set:o,update:(l,i)=>o(l(s,e),i),subscribe:n.subscribe}}const R=x([]),me=[{na:0,good:0,bad:0}];et(R,e=>{let t={...me[0]};return e.forEach(n=>{t[n.vote]++}),console.log("newTally",t),[{...t}]},me);const nt=["Who","What","How","Why","Where","Does","Can","N/A"];tt(nt.map(e=>({question:e,count:0})));function ge(e,t,n){const r=e.slice();return r[13]=t[n],r[15]=n,r}function ye(e){let t,n,r,s,o;function l(){return e[8](e[15])}function i(){return e[9](e[15])}return{c(){t=z("button"),t.textContent="👍",n=L(),r=z("button"),r.textContent="👎",$(t,"class","small-button thumbs-up svelte-ysjhkz"),$(r,"class","small-button thumbs-down svelte-ysjhkz")},m(c,u){S(c,t,u),S(c,n,u),S(c,r,u),s||(o=[X(t,"click",l),X(r,"click",i)],s=!0)},p(c,u){e=c},d(c){c&&O(t),c&&O(n),c&&O(r),s=!1,q(o)}}}function be(e,t){let n,r,s,o,l,i,c,u=t[13].question+"",m,d,p,h,g=t[13].answer+"",k,_,w,v,j,f,a=t[0]&&ye(t);return{key:e,first:null,c(){n=z("div"),r=z("div"),s=z("div"),o=L(),l=z("div"),i=z("p"),c=M("Q: "),m=M(u),d=L(),p=z("p"),h=M("A: "),k=M(g),_=L(),a&&a.c(),w=L(),$(s,"class","avatar svelte-ysjhkz"),$(i,"class","svelte-ysjhkz"),$(p,"class","svelte-ysjhkz"),$(l,"class","message-content svelte-ysjhkz"),$(r,"class","chat-message-center svelte-ysjhkz"),$(n,"class","chat-message svelte-ysjhkz"),this.first=n},m(E,y){S(E,n,y),b(n,r),b(r,s),b(r,o),b(r,l),b(l,i),b(i,c),b(i,m),b(l,d),b(l,p),b(p,h),b(p,k),b(l,_),a&&a.m(l,null),b(n,w),j||(f=Ie(v=st.call(null,n,t[15]===t[1].length-1)),j=!0)},p(E,y){t=E,y&2&&u!==(u=t[13].question+"")&&Y(m,u),y&2&&g!==(g=t[13].answer+"")&&Y(k,g),t[0]?a?a.p(t,y):(a=ye(t),a.c(),a.m(l,null)):a&&(a.d(1),a=null),v&&K(v.update)&&y&2&&v.update.call(null,t[15]===t[1].length-1)},d(E){E&&O(n),a&&a.d(),j=!1,f()}}}function ot(e){let t,n,r=[],s=new Map,o,l,i,c,u,m,d=(e[3]?e[4]:"Send")+"",p,h,g,k,_,w,v=e[1];const j=f=>f[15];for(let f=0;f<v.length;f+=1){let a=ge(e,v,f),E=j(a);s.set(E,r[f]=be(E,a))}return{c(){t=z("section"),n=z("div");for(let f=0;f<r.length;f+=1)r[f].c();o=L(),l=z("div"),i=z("form"),c=z("input"),u=L(),m=z("button"),p=M(d),g=L(),k=z("p"),k.textContent="Note - may produce inaccurate information.",$(n,"class","chat-log svelte-ysjhkz"),$(c,"class","chat-input-textarea svelte-ysjhkz"),$(c,"placeholder","Type Message Here"),$(m,"class",h="btnyousend "+(e[2]===""?"":"active")+" svelte-ysjhkz"),$(m,"type","submit"),$(i,"class","chat-input-form svelte-ysjhkz"),$(k,"class","message svelte-ysjhkz"),$(l,"class","chat-input-holder svelte-ysjhkz"),$(t,"class","chatbox svelte-ysjhkz")},m(f,a){S(f,t,a),b(t,n);for(let E=0;E<r.length;E+=1)r[E]&&r[E].m(n,null);b(t,o),b(t,l),b(l,i),b(i,c),de(c,e[2]),b(i,u),b(i,m),b(m,p),b(l,g),b(l,k),_||(w=[X(c,"input",e[10]),X(i,"submit",e[5])],_=!0)},p(f,[a]){a&67&&(v=f[1],r=Ye(r,a,j,1,f,v,s,n,Xe,be,null,ge)),a&4&&c.value!==f[2]&&de(c,f[2]),a&24&&d!==(d=(f[3]?f[4]:"Send")+"")&&Y(p,d),a&4&&h!==(h="btnyousend "+(f[2]===""?"":"active")+" svelte-ysjhkz")&&$(m,"class",h)},i:A,o:A,d(f){f&&O(t);for(let a=0;a<r.length;a+=1)r[a].d();_=!1,q(w)}}}function st(e){setTimeout(()=>{e.scrollIntoView({behavior:"smooth"})},0)}function rt(e,t,n){let r,s;Ce(e,R,_=>n(1,s=_));let{feedback:o=!1}=t,l="",i="",c=!1;Le(()=>{u()});async function u(){console.log("fetching data from db");const j=(await(await fetch("http://127.0.0.1:5000/chat/qa_table/retrieve")).json()).rows.map(f=>({id:f[0],question:f[1],answer:f[2],vote_status:f[3]}));ae(R,s=[...j],s)}const m=async _=>{_.preventDefault(),l=i,n(2,i=""),n(3,c=!0);let w={id:s.length+1,question:l,answer:"Loading...",vote_status:"na"};console.log("adding to log here"),ae(R,s=[...s,w],s);const v=await fetch(`/chat/${l}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:l})});if(v.ok){const j=await v.json();w.answer=j.answer,R.update(f=>(f[f.length-1]=w,f))}else{const j=await v.text();alert(j)}n(3,c=!1)};let d=0;setInterval(()=>{n(7,d=(d+1)%4)},200);async function p(_,w){const v=s[w];v.vote=_;const j={id:w,vote_status:_};console.log(j);const f=await fetch("http://127.0.0.1:5000/chat/qa_table/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(j)});if(f.ok)console.log("update worked!",f);else{const a=await f.text();alert(a)}}const h=_=>p("up",_),g=_=>p("down",_);function k(){i=this.value,n(2,i)}return e.$$set=_=>{"feedback"in _&&n(0,o=_.feedback)},e.$$.update=()=>{e.$$.dirty&128&&n(4,r=".".repeat(d).padEnd(3)),e.$$.dirty&2&&console.log("chat updated!",s)},[o,s,i,c,r,m,p,d,h,g,k]}class lt extends ue{constructor(t){super(),ce(this,t,rt,ot,Z,{feedback:0})}}function we(e,t,n){const r=e.slice();return r[2]=t[n],r}function ve(e){let t,n=e[2]+"",r,s;return{c(){t=z("option"),r=M(n),t.__value=s=e[2],t.value=t.__value},m(o,l){S(o,t,l),b(t,r)},p(o,l){l&1&&n!==(n=o[2]+"")&&Y(r,n),l&1&&s!==(s=o[2])&&(t.__value=s,t.value=t.__value)},d(o){o&&O(t)}}}function it(e){let t,n=e[0],r=[];for(let s=0;s<n.length;s+=1)r[s]=ve(we(e,n,s));return{c(){t=z("select");for(let s=0;s<r.length;s+=1)r[s].c()},m(s,o){S(s,t,o);for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(t,null)},p(s,[o]){if(o&1){n=s[0];let l;for(l=0;l<n.length;l+=1){const i=we(s,n,l);r[l]?r[l].p(i,o):(r[l]=ve(i),r[l].c(),r[l].m(t,null))}for(;l<r.length;l+=1)r[l].d(1);r.length=n.length}},i:A,o:A,d(s){s&&O(t),Te(r,s)}}}function ct(e,t,n){let{data_endpoint:r}=t,s=[];return Le(async()=>{const o=await fetch(`/data/${r}`);n(0,s=await o.json())}),e.$$set=o=>{"data_endpoint"in o&&n(1,r=o.data_endpoint)},[s,r]}class ut extends ue{constructor(t){super(),ce(this,t,ct,it,Z,{data_endpoint:1})}}function ke(e,t,n){const r=e.slice();return r[2]=t[n],r}function $e(e){let t,n;const r=[e[2].props];let s={};for(let o=0;o<r.length;o+=1)s=G(s,r[o]);return t=new lt({props:s}),{c(){Pe(t.$$.fragment)},m(o,l){le(t,o,l),n=!0},p(o,l){const i=l&1?Me(r,[De(o[2].props)]):{};t.$set(i)},i(o){n||(C(t.$$.fragment,o),n=!0)},o(o){D(t.$$.fragment,o),n=!1},d(o){ie(t,o)}}}function je(e){let t,n;const r=[e[2].props];let s={};for(let o=0;o<r.length;o+=1)s=G(s,r[o]);return t=new ut({props:s}),{c(){Pe(t.$$.fragment)},m(o,l){le(t,o,l),n=!0},p(o,l){const i=l&1?Me(r,[De(o[2].props)]):{};t.$set(i)},i(o){n||(C(t.$$.fragment,o),n=!0)},o(o){D(t.$$.fragment,o),n=!1},d(o){ie(t,o)}}}function ze(e){let t,n,r,s=e[2].svelte_component==="Chatbot"&&$e(e),o=e[2].svelte_component==="Dropdown"&&je(e);return{c(){s&&s.c(),t=L(),o&&o.c(),n=Re()},m(l,i){s&&s.m(l,i),S(l,t,i),o&&o.m(l,i),S(l,n,i),r=!0},p(l,i){l[2].svelte_component==="Chatbot"?s?(s.p(l,i),i&1&&C(s,1)):(s=$e(l),s.c(),C(s,1),s.m(t.parentNode,t)):s&&(oe(),D(s,1,1,()=>{s=null}),se()),l[2].svelte_component==="Dropdown"?o?(o.p(l,i),i&1&&C(o,1)):(o=je(l),o.c(),C(o,1),o.m(n.parentNode,n)):o&&(oe(),D(o,1,1,()=>{o=null}),se())},i(l){r||(C(s),C(o),r=!0)},o(l){D(s),D(o),r=!1},d(l){s&&s.d(l),l&&O(t),o&&o.d(l),l&&O(n)}}}function ft(e){let t,n,r,s=e[0],o=[];for(let i=0;i<s.length;i+=1)o[i]=ze(ke(e,s,i));const l=i=>D(o[i],1,1,()=>{o[i]=null});return{c(){for(let i=0;i<o.length;i+=1)o[i].c();t=L(),n=z("p"),n.textContent="Made with CambioML",$(n,"class","footer-logo svelte-bw62g5")},m(i,c){for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(i,c);S(i,t,c),S(i,n,c),r=!0},p(i,[c]){if(c&1){s=i[0];let u;for(u=0;u<s.length;u+=1){const m=ke(i,s,u);o[u]?(o[u].p(m,c),C(o[u],1)):(o[u]=ze(m),o[u].c(),C(o[u],1),o[u].m(t.parentNode,t))}for(oe(),u=s.length;u<o.length;u+=1)l(u);se()}},i(i){if(!r){for(let c=0;c<s.length;c+=1)C(o[c]);r=!0}},o(i){o=o.filter(Boolean);for(let c=0;c<o.length;c+=1)D(o[c]);r=!1},d(i){Te(o,i),i&&O(t),i&&O(n)}}}function at(e,t,n){let r;const s=x([]);return Ce(e,s,o=>n(0,r=o)),fetch("/components").then(o=>o.json()).then(o=>{s.set(o)}),[r,s]}class dt extends ue{constructor(t){super(),ce(this,t,at,ft,Z,{})}}new dt({target:document.getElementById("app")});
