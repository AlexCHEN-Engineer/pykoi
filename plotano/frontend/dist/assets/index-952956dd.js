(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(i){if(i.ep)return;i.ep=!0;const l=n(i);fetch(i.href,l)}})();function H(){}const Kn=e=>e;function Pe(e,t){for(const n in t)e[n]=t[n];return e}function Xn(e){return e()}function jt(){return Object.create(null)}function ne(e){e.forEach(Xn)}function Re(e){return typeof e=="function"}function Q(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function xr(e){return Object.keys(e).length===0}function Er(e,...t){if(e==null)return H;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function T(e,t,n){e.$$.on_destroy.push(Er(t,n))}function ge(e,t,n){return e.set(n),t}function Yn(e){return e&&Re(e.destroy)?e.destroy:H}const Zn=typeof window<"u";let er=Zn?()=>window.performance.now():()=>Date.now(),St=Zn?e=>requestAnimationFrame(e):H;const qe=new Set;function tr(e){qe.forEach(t=>{t.c(e)||(qe.delete(t),t.f())}),qe.size!==0&&St(tr)}function nr(e){let t;return qe.size===0&&St(tr),{promise:new Promise(n=>{qe.add(t={c:e,f:n})}),abort(){qe.delete(t)}}}function y(e,t){e.appendChild(t)}function rr(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function Rr(e){const t=q("style");return Fr(rr(e),t),t.sheet}function Fr(e,t){return y(e.head||e,t),t.sheet}function O(e,t,n){e.insertBefore(t,n||null)}function z(e){e.parentNode&&e.parentNode.removeChild(e)}function ee(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function q(e){return document.createElement(e)}function F(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function P(e){return document.createTextNode(e)}function E(){return P(" ")}function me(){return P("")}function I(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function u(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Or(e){return Array.from(e.childNodes)}function D(e,t){t=""+t,e.data!==t&&(e.data=t)}function et(e,t){e.value=t??""}function ue(e,t,n,r){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,r?"important":"")}function tt(e,t,n){for(let r=0;r<e.options.length;r+=1){const i=e.options[r];if(i.__value===t){i.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function ir(e){const t=e.querySelector(":checked");return t&&t.__value}let Qe;function Hr(){if(Qe===void 0){Qe=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{Qe=!0}}return Qe}function Fe(e,t){getComputedStyle(e).position==="static"&&(e.style.position="relative");const r=q("iframe");r.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),r.setAttribute("aria-hidden","true"),r.tabIndex=-1;const i=Hr();let l;return i?(r.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",l=I(window,"message",o=>{o.source===r.contentWindow&&t()})):(r.src="about:blank",r.onload=()=>{l=I(r.contentWindow,"resize",t),t()}),y(e,r),()=>{(i||l&&r.contentWindow)&&l(),z(r)}}function Lr(e,t,{bubbles:n=!1,cancelable:r=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(e,n,r,t),i}const nt=new Map;let rt=0;function jr(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}function Pr(e,t){const n={stylesheet:Rr(t),rules:{}};return nt.set(e,n),n}function Pt(e,t,n,r,i,l,o,s=0){const a=16.666/r;let f=`{
`;for(let p=0;p<=1;p+=a){const b=t+(n-t)*l(p);f+=p*100+`%{${o(b,1-b)}}
`}const c=f+`100% {${o(n,1-n)}}
}`,d=`__svelte_${jr(c)}_${s}`,g=rr(e),{stylesheet:h,rules:_}=nt.get(g)||Pr(g,e);_[d]||(_[d]=!0,h.insertRule(`@keyframes ${d} ${c}`,h.cssRules.length));const v=e.style.animation||"";return e.style.animation=`${v?`${v}, `:""}${d} ${r}ms linear ${i}ms 1 both`,rt+=1,d}function Tr(e,t){const n=(e.style.animation||"").split(", "),r=n.filter(t?l=>l.indexOf(t)<0:l=>l.indexOf("__svelte")===-1),i=n.length-r.length;i&&(e.style.animation=r.join(", "),rt-=i,rt||Dr())}function Dr(){St(()=>{rt||(nt.forEach(e=>{const{ownerNode:t}=e.stylesheet;t&&z(t)}),nt.clear())})}let Te;function je(e){Te=e}function Vr(){if(!Te)throw new Error("Function called outside component initialization");return Te}function ct(e){Vr().$$.on_mount.push(e)}const Ae=[],Tt=[];let Se=[];const Dt=[],Ir=Promise.resolve();let yt=!1;function Br(){yt||(yt=!0,Ir.then(lr))}function Y(e){Se.push(e)}const dt=new Set;let $e=0;function lr(){if($e!==0)return;const e=Te;do{try{for(;$e<Ae.length;){const t=Ae[$e];$e++,je(t),Wr(t.$$)}}catch(t){throw Ae.length=0,$e=0,t}for(je(null),Ae.length=0,$e=0;Tt.length;)Tt.pop()();for(let t=0;t<Se.length;t+=1){const n=Se[t];dt.has(n)||(dt.add(n),n())}Se.length=0}while(Ae.length);for(;Dt.length;)Dt.pop()();yt=!1,dt.clear(),je(e)}function Wr(e){if(e.fragment!==null){e.update(),ne(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Y)}}function Qr(e){const t=[],n=[];Se.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),Se=t}let Le;function Gr(){return Le||(Le=Promise.resolve(),Le.then(()=>{Le=null})),Le}function gt(e,t,n){e.dispatchEvent(Lr(`${t?"intro":"outro"}${n}`))}const Ye=new Set;let ae;function he(){ae={r:0,c:[],p:ae}}function de(){ae.r||ne(ae.c),ae=ae.p}function R(e,t){e&&e.i&&(Ye.delete(e),e.i(t))}function j(e,t,n,r){if(e&&e.o){if(Ye.has(e))return;Ye.add(e),ae.c.push(()=>{Ye.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}const Ur={duration:0};function Vt(e,t,n,r){const i={direction:"both"};let l=t(e,n,i),o=r?0:1,s=null,a=null,f=null;function c(){f&&Tr(e,f)}function d(h,_){const v=h.b-o;return _*=Math.abs(v),{a:o,b:h.b,d:v,duration:_,start:h.start,end:h.start+_,group:h.group}}function g(h){const{delay:_=0,duration:v=300,easing:p=Kn,tick:b=H,css:m}=l||Ur,M={start:er()+_,b:h};h||(M.group=ae,ae.r+=1),s||a?a=M:(m&&(c(),f=Pt(e,o,h,v,_,p,m)),h&&b(0,1),s=d(M,v),Y(()=>gt(e,h,"start")),nr($=>{if(a&&$>a.start&&(s=d(a,v),a=null,gt(e,s.b,"start"),m&&(c(),f=Pt(e,o,s.b,s.duration,0,p,l.css))),s){if($>=s.end)b(o=s.b,1-o),gt(e,s.b,"end"),a||(s.b?c():--s.group.r||ne(s.group.c)),s=null;else if($>=s.start){const A=$-s.start;o=s.a+s.d*p(A/s.duration),b(o,1-o)}}return!!(s||a)}))}return{run(h){Re(l)?Gr().then(()=>{l=l(i),g(h)}):g(h)},end(){c(),s=a=null}}}function or(e,t){e.d(1),t.delete(e.key)}function sr(e,t,n,r,i,l,o,s,a,f,c,d){let g=e.length,h=l.length,_=g;const v={};for(;_--;)v[e[_].key]=_;const p=[],b=new Map,m=new Map,M=[];for(_=h;_--;){const k=d(i,l,_),N=n(k);let w=o.get(N);w?r&&M.push(()=>w.p(k,t)):(w=f(N,k),w.c()),b.set(N,p[_]=w),N in v&&m.set(N,Math.abs(_-v[N]))}const $=new Set,A=new Set;function S(k){R(k,1),k.m(s,c),o.set(k.key,k),c=k.first,h--}for(;g&&h;){const k=p[h-1],N=e[g-1],w=k.key,C=N.key;k===N?(c=k.first,g--,h--):b.has(C)?!o.has(w)||$.has(w)?S(k):A.has(C)?g--:m.get(w)>m.get(C)?(A.add(w),S(k)):($.add(C),g--):(a(N,o),g--)}for(;g--;){const k=e[g];b.has(k.key)||a(k,o)}for(;h;)S(p[h-1]);return ne(M),p}function Ct(e,t){const n={},r={},i={$$scope:1};let l=e.length;for(;l--;){const o=e[l],s=t[l];if(s){for(const a in o)a in s||(r[a]=1);for(const a in s)i[a]||(n[a]=s[a],i[a]=1);e[l]=s}else for(const a in o)i[a]=1}for(const o in r)o in n||(n[o]=void 0);return n}function zt(e){return typeof e=="object"&&e!==null?e:{}}function G(e){e&&e.c()}function B(e,t,n,r){const{fragment:i,after_update:l}=e.$$;i&&i.m(t,n),r||Y(()=>{const o=e.$$.on_mount.map(Xn).filter(Re);e.$$.on_destroy?e.$$.on_destroy.push(...o):ne(o),e.$$.on_mount=[]}),l.forEach(Y)}function W(e,t){const n=e.$$;n.fragment!==null&&(Qr(n.after_update),ne(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Jr(e,t){e.$$.dirty[0]===-1&&(Ae.push(e),Br(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function J(e,t,n,r,i,l,o,s=[-1]){const a=Te;je(e);const f=e.$$={fragment:null,ctx:[],props:l,update:H,not_equal:i,bound:jt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(a?a.$$.context:[])),callbacks:jt(),dirty:s,skip_bound:!1,root:t.target||a.$$.root};o&&o(f.root);let c=!1;if(f.ctx=n?n(e,t.props||{},(d,g,...h)=>{const _=h.length?h[0]:g;return f.ctx&&i(f.ctx[d],f.ctx[d]=_)&&(!f.skip_bound&&f.bound[d]&&f.bound[d](_),c&&Jr(e,d)),g}):[],f.update(),c=!0,ne(f.before_update),f.fragment=r?r(f.ctx):!1,t.target){if(t.hydrate){const d=Or(t.target);f.fragment&&f.fragment.l(d),d.forEach(z)}else f.fragment&&f.fragment.c();t.intro&&R(e.$$.fragment),B(e,t.target,t.anchor,t.customElement),lr()}je(a)}class K{$destroy(){W(this,1),this.$destroy=H}$on(t,n){if(!Re(n))return H;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(t){this.$$set&&!xr(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Me=[];function Oe(e,t=H){let n;const r=new Set;function i(s){if(Q(e,s)&&(e=s,n)){const a=!Me.length;for(const f of r)f[1](),Me.push(f,e);if(a){for(let f=0;f<Me.length;f+=2)Me[f][0](Me[f+1]);Me.length=0}}}function l(s){i(s(e))}function o(s,a=H){const f=[s,a];return r.add(f),r.size===1&&(n=t(i)||H),s(e),()=>{r.delete(f),r.size===0&&n&&(n(),n=null)}}return{set:i,update:l,subscribe:o}}function ar(e){const t=e-1;return t*t*t+1}function It(e){return Object.prototype.toString.call(e)==="[object Date]"}function bt(e,t){if(e===t||e!==e)return()=>e;const n=typeof e;if(n!==typeof t||Array.isArray(e)!==Array.isArray(t))throw new Error("Cannot interpolate values of different type");if(Array.isArray(e)){const r=t.map((i,l)=>bt(e[l],i));return i=>r.map(l=>l(i))}if(n==="object"){if(!e||!t)throw new Error("Object cannot be null");if(It(e)&&It(t)){e=e.getTime(),t=t.getTime();const l=t-e;return o=>new Date(e+o*l)}const r=Object.keys(t),i={};return r.forEach(l=>{i[l]=bt(e[l],t[l])}),l=>{const o={};return r.forEach(s=>{o[s]=i[s](l)}),o}}if(n==="number"){const r=t-e;return i=>e+i*r}throw new Error(`Cannot interpolate ${n} values`)}function xt(e,t={}){const n=Oe(e);let r,i=e;function l(o,s){if(e==null)return n.set(e=o),Promise.resolve();i=o;let a=r,f=!1,{delay:c=0,duration:d=400,easing:g=Kn,interpolate:h=bt}=Pe(Pe({},t),s);if(d===0)return a&&(a.abort(),a=null),n.set(e=i),Promise.resolve();const _=er()+c;let v;return r=nr(p=>{if(p<_)return!0;f||(v=h(e,o),typeof d=="function"&&(d=d(e,o)),f=!0),a&&(a.abort(),a=null);const b=p-_;return b>d?(n.set(e=o),!1):(n.set(e=v(g(b/d))),!0)}),r.promise}return{set:l,update:(o,s)=>l(o(i,e),s),subscribe:n.subscribe}}const Z=Oe([]),Ge=Oe([]),se=Oe("down"),Bt=Oe({"n/a":1,up:1,down:1}),Kr=["Who","What","How","Why","Where","Does","Can","N/A"],wt=xt(Kr.map(e=>({question:e,count:0})));function Wt(e,t,n){const r=e.slice();return r[13]=t[n],r[15]=n,r}function Qt(e){let t,n,r,i,l;function o(){return e[8](e[15])}function s(){return e[9](e[15])}return{c(){t=q("button"),t.textContent="👍",n=E(),r=q("button"),r.textContent="👎",u(t,"class","small-button thumbs-up svelte-ysjhkz"),u(r,"class","small-button thumbs-down svelte-ysjhkz")},m(a,f){O(a,t,f),O(a,n,f),O(a,r,f),i||(l=[I(t,"click",o),I(r,"click",s)],i=!0)},p(a,f){e=a},d(a){a&&z(t),a&&z(n),a&&z(r),i=!1,ne(l)}}}function Gt(e,t){let n,r,i,l,o,s,a,f=t[13].question+"",c,d,g,h,_=t[13].answer+"",v,p,b,m,M,$,A=t[0]&&Qt(t);return{key:e,first:null,c(){n=q("div"),r=q("div"),i=q("div"),l=E(),o=q("div"),s=q("p"),a=P("Q: "),c=P(f),d=E(),g=q("p"),h=P("A: "),v=P(_),p=E(),A&&A.c(),b=E(),u(i,"class","avatar svelte-ysjhkz"),u(s,"class","svelte-ysjhkz"),u(g,"class","svelte-ysjhkz"),u(o,"class","message-content svelte-ysjhkz"),u(r,"class","chat-message-center svelte-ysjhkz"),u(n,"class","chat-message svelte-ysjhkz"),this.first=n},m(S,k){O(S,n,k),y(n,r),y(r,i),y(r,l),y(r,o),y(o,s),y(s,a),y(s,c),y(o,d),y(o,g),y(g,h),y(g,v),y(o,p),A&&A.m(o,null),y(n,b),M||($=Yn(m=Yr.call(null,n,t[15]===t[1].length-1)),M=!0)},p(S,k){t=S,k&2&&f!==(f=t[13].question+"")&&D(c,f),k&2&&_!==(_=t[13].answer+"")&&D(v,_),t[0]?A?A.p(t,k):(A=Qt(t),A.c(),A.m(o,null)):A&&(A.d(1),A=null),m&&Re(m.update)&&k&2&&m.update.call(null,t[15]===t[1].length-1)},d(S){S&&z(n),A&&A.d(),M=!1,$()}}}function Xr(e){let t,n,r=[],i=new Map,l,o,s,a,f,c,d=(e[3]?e[4]:"Send")+"",g,h,_,v,p,b,m=e[1];const M=$=>$[15];for(let $=0;$<m.length;$+=1){let A=Wt(e,m,$),S=M(A);i.set(S,r[$]=Gt(S,A))}return{c(){t=q("section"),n=q("div");for(let $=0;$<r.length;$+=1)r[$].c();l=E(),o=q("div"),s=q("form"),a=q("input"),f=E(),c=q("button"),g=P(d),_=E(),v=q("p"),v.textContent="Note - may produce inaccurate information.",u(n,"class","chat-log svelte-ysjhkz"),u(a,"class","chat-input-textarea svelte-ysjhkz"),u(a,"placeholder","Type Message Here"),u(c,"class",h="btnyousend "+(e[2]===""?"":"active")+" svelte-ysjhkz"),u(c,"type","submit"),u(s,"class","chat-input-form svelte-ysjhkz"),u(v,"class","message svelte-ysjhkz"),u(o,"class","chat-input-holder svelte-ysjhkz"),u(t,"class","chatbox svelte-ysjhkz")},m($,A){O($,t,A),y(t,n);for(let S=0;S<r.length;S+=1)r[S]&&r[S].m(n,null);y(t,l),y(t,o),y(o,s),y(s,a),et(a,e[2]),y(s,f),y(s,c),y(c,g),y(o,_),y(o,v),p||(b=[I(a,"input",e[10]),I(s,"submit",e[5])],p=!0)},p($,[A]){A&67&&(m=$[1],r=sr(r,A,M,1,$,m,i,n,or,Gt,null,Wt)),A&4&&a.value!==$[2]&&et(a,$[2]),A&24&&d!==(d=($[3]?$[4]:"Send")+"")&&D(g,d),A&4&&h!==(h="btnyousend "+($[2]===""?"":"active")+" svelte-ysjhkz")&&u(c,"class",h)},i:H,o:H,d($){$&&z(t);for(let A=0;A<r.length;A+=1)r[A].d();p=!1,ne(b)}}}function Yr(e){setTimeout(()=>{e.scrollIntoView({behavior:"smooth"})},0)}function Zr(e,t,n){let r,i;T(e,Z,p=>n(1,i=p));let{feedback:l=!1}=t,o="",s="",a=!1;ct(()=>{f()});async function f(){console.log("fetching data from db");const M=(await(await fetch("http://127.0.0.1:5000/chat/qa_table/retrieve")).json()).rows.map($=>({id:$[0],question:$[1],answer:$[2],vote_status:$[3]}));ge(Z,i=[...M],i)}const c=async p=>{p.preventDefault(),o=s,n(2,s=""),n(3,a=!0);let b={id:i.length+1,question:o,answer:"Loading...",vote_status:"na"};console.log("adding to log here"),ge(Z,i=[...i,b],i);const m=await fetch(`/chat/${o}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:o})});if(m.ok){const M=await m.json();b.answer=M.answer,Z.update($=>($[$.length-1]=b,$))}else{const M=await m.text();alert(M)}n(3,a=!1)};let d=0;setInterval(()=>{n(7,d=(d+1)%4)},200);async function g(p,b){const m=i[b];m.vote=p;const M={id:b+1,vote_status:p};console.log(M),console.log(M);const $=await fetch("http://127.0.0.1:5000/chat/qa_table/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(M)});if($.ok)console.log("update worked!",$);else{const A=await $.text();alert(A)}}const h=p=>g("up",p),_=p=>g("down",p);function v(){s=this.value,n(2,s)}return e.$$set=p=>{"feedback"in p&&n(0,l=p.feedback)},e.$$.update=()=>{e.$$.dirty&128&&n(4,r=".".repeat(d).padEnd(3)),e.$$.dirty&2&&console.log("chat updated!",i)},[l,i,s,a,r,c,g,d,h,_,v]}class fr extends K{constructor(t){super(),J(this,t,Zr,Xr,Q,{feedback:0})}}function Ut(e,t,n){const r=e.slice();return r[2]=t[n],r}function Jt(e){let t,n=e[2]+"",r,i;return{c(){t=q("option"),r=P(n),t.__value=i=e[2],t.value=t.__value},m(l,o){O(l,t,o),y(t,r)},p(l,o){o&1&&n!==(n=l[2]+"")&&D(r,n),o&1&&i!==(i=l[2])&&(t.__value=i,t.value=t.__value)},d(l){l&&z(t)}}}function ei(e){let t,n=e[0],r=[];for(let i=0;i<n.length;i+=1)r[i]=Jt(Ut(e,n,i));return{c(){t=q("select");for(let i=0;i<r.length;i+=1)r[i].c()},m(i,l){O(i,t,l);for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(t,null)},p(i,[l]){if(l&1){n=i[0];let o;for(o=0;o<n.length;o+=1){const s=Ut(i,n,o);r[o]?r[o].p(s,l):(r[o]=Jt(s),r[o].c(),r[o].m(t,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},i:H,o:H,d(i){i&&z(t),ee(r,i)}}}function ti(e,t,n){let{data_endpoint:r}=t,i=[];return ct(async()=>{const l=await fetch(`/data/${r}`);n(0,i=await l.json())}),e.$$set=l=>{"data_endpoint"in l&&n(1,r=l.data_endpoint)},[i,r]}class ni extends K{constructor(t){super(),J(this,t,ti,ei,Q,{data_endpoint:1})}}function Ze(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function ri(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function ur(e){let t,n,r;e.length!==2?(t=Ze,n=(s,a)=>Ze(e(s),a),r=(s,a)=>e(s)-a):(t=e===Ze||e===ri?e:ii,n=e,r=e);function i(s,a,f=0,c=s.length){if(f<c){if(t(a,a)!==0)return c;do{const d=f+c>>>1;n(s[d],a)<0?f=d+1:c=d}while(f<c)}return f}function l(s,a,f=0,c=s.length){if(f<c){if(t(a,a)!==0)return c;do{const d=f+c>>>1;n(s[d],a)<=0?f=d+1:c=d}while(f<c)}return f}function o(s,a,f=0,c=s.length){const d=i(s,a,f,c-1);return d>f&&r(s[d-1],a)>-r(s[d],a)?d-1:d}return{left:i,center:o,right:l}}function ii(){return 0}function li(e){return e===null?NaN:+e}const oi=ur(Ze),si=oi.right;ur(li).center;const cr=si;function ai(e,t){let n=0;if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&++n;else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(i=+i)>=i&&++n}return n}function _t(e,t){let n,r;if(t===void 0)for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let l of e)(l=t(l,++i,e))!=null&&(n===void 0?l>=l&&(n=r=l):(n>l&&(n=l),r<l&&(r=l)))}return[n,r]}class Kt extends Map{constructor(t,n=ci){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(Xt(this,t))}has(t){return super.has(Xt(this,t))}set(t,n){return super.set(fi(this,t),n)}delete(t){return super.delete(ui(this,t))}}function Xt({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function fi({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function ui({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function ci(e){return e!==null&&typeof e=="object"?e.valueOf():e}function hi(e){return e}var di=Array.prototype,gi=di.slice;function pt(e){return()=>e}const _i=Math.sqrt(50),pi=Math.sqrt(10),mi=Math.sqrt(2);function it(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),l=r/Math.pow(10,i),o=l>=_i?10:l>=pi?5:l>=mi?2:1;let s,a,f;return i<0?(f=Math.pow(10,-i)/o,s=Math.round(e*f),a=Math.round(t*f),s/f<e&&++s,a/f>t&&--a,f=-f):(f=Math.pow(10,i)*o,s=Math.round(e/f),a=Math.round(t/f),s*f<e&&++s,a*f>t&&--a),a<s&&.5<=n&&n<2?it(e,t,n*2):[s,a,f]}function hr(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,l,o]=r?it(t,e,n):it(e,t,n);if(!(l>=i))return[];const s=l-i+1,a=new Array(s);if(r)if(o<0)for(let f=0;f<s;++f)a[f]=(l-f)/-o;else for(let f=0;f<s;++f)a[f]=(l-f)*o;else if(o<0)for(let f=0;f<s;++f)a[f]=(i+f)/-o;else for(let f=0;f<s;++f)a[f]=(i+f)*o;return a}function ze(e,t,n){return t=+t,e=+e,n=+n,it(e,t,n)[2]}function vi(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?ze(t,e,n):ze(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function yi(e,t,n){let r;for(;;){const i=ze(e,t,n);if(i===r||i===0||!isFinite(i))return[e,t];i>0?(e=Math.floor(e/i)*i,t=Math.ceil(t/i)*i):i<0&&(e=Math.ceil(e*i)/i,t=Math.floor(t*i)/i),r=i}}function bi(e){return Math.max(1,Math.ceil(Math.log(ai(e))/Math.LN2)+1)}function dr(){var e=hi,t=_t,n=bi;function r(i){Array.isArray(i)||(i=Array.from(i));var l,o=i.length,s,a,f=new Array(o);for(l=0;l<o;++l)f[l]=e(i[l],l,i);var c=t(f),d=c[0],g=c[1],h=n(f,d,g);if(!Array.isArray(h)){const M=g,$=+h;if(t===_t&&([d,g]=yi(d,g,$)),h=hr(d,g,$),h[0]<=d&&(a=ze(d,g,$)),h[h.length-1]>=g)if(M>=g&&t===_t){const A=ze(d,g,$);isFinite(A)&&(A>0?g=(Math.floor(g/A)+1)*A:A<0&&(g=(Math.ceil(g*-A)+1)/-A))}else h.pop()}for(var _=h.length,v=0,p=_;h[v]<=d;)++v;for(;h[p-1]>g;)--p;(v||p<_)&&(h=h.slice(v,p),_=p-v);var b=new Array(_+1),m;for(l=0;l<=_;++l)m=b[l]=[],m.x0=l>0?h[l-1]:d,m.x1=l<_?h[l]:g;if(isFinite(a)){if(a>0)for(l=0;l<o;++l)(s=f[l])!=null&&d<=s&&s<=g&&b[Math.min(_,Math.floor((s-d)/a))].push(i[l]);else if(a<0){for(l=0;l<o;++l)if((s=f[l])!=null&&d<=s&&s<=g){const M=Math.floor((d-s)*a);b[Math.min(_,M+(h[M]<=s))].push(i[l])}}}else for(l=0;l<o;++l)(s=f[l])!=null&&d<=s&&s<=g&&b[cr(h,s,0,_)].push(i[l]);return b}return r.value=function(i){return arguments.length?(e=typeof i=="function"?i:pt(i),r):e},r.domain=function(i){return arguments.length?(t=typeof i=="function"?i:pt([i[0],i[1]]),r):t},r.thresholds=function(i){return arguments.length?(n=typeof i=="function"?i:pt(Array.isArray(i)?gi.call(i):i),r):n},r}function xe(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function wi(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,l=new Array(i);++r<i;)l[r]=e+r*n;return l}function ki(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function lt(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Ee(e){return e=lt(Math.abs(e)),e?e[1]:NaN}function $i(e,t){return function(n,r){for(var i=n.length,l=[],o=0,s=e[0],a=0;i>0&&s>0&&(a+s+1>r&&(s=Math.max(1,r-a)),l.push(n.substring(i-=s,i+s)),!((a+=s+1)>r));)s=e[o=(o+1)%e.length];return l.reverse().join(t)}}function Mi(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Ai=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ot(e){if(!(t=Ai.exec(e)))throw new Error("invalid format: "+e);var t;return new Et({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}ot.prototype=Et.prototype;function Et(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Et.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Ni(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var gr;function qi(e,t){var n=lt(e,t);if(!n)return e+"";var r=n[0],i=n[1],l=i-(gr=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return l===o?r:l>o?r+new Array(l-o+1).join("0"):l>0?r.slice(0,l)+"."+r.slice(l):"0."+new Array(1-l).join("0")+lt(e,Math.max(0,t+l-1))[0]}function Yt(e,t){var n=lt(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Zt={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:ki,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Yt(e*100,t),r:Yt,s:qi,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function en(e){return e}var tn=Array.prototype.map,nn=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Si(e){var t=e.grouping===void 0||e.thousands===void 0?en:$i(tn.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",l=e.numerals===void 0?en:Mi(tn.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",s=e.minus===void 0?"−":e.minus+"",a=e.nan===void 0?"NaN":e.nan+"";function f(d){d=ot(d);var g=d.fill,h=d.align,_=d.sign,v=d.symbol,p=d.zero,b=d.width,m=d.comma,M=d.precision,$=d.trim,A=d.type;A==="n"?(m=!0,A="g"):Zt[A]||(M===void 0&&(M=12),$=!0,A="g"),(p||g==="0"&&h==="=")&&(p=!0,g="0",h="=");var S=v==="$"?n:v==="#"&&/[boxX]/.test(A)?"0"+A.toLowerCase():"",k=v==="$"?r:/[%p]/.test(A)?o:"",N=Zt[A],w=/[defgprs%]/.test(A);M=M===void 0?6:/[gprs]/.test(A)?Math.max(1,Math.min(21,M)):Math.max(0,Math.min(20,M));function C(x){var L=S,V=k,le,He,ye;if(A==="c")V=N(x)+V,x="";else{x=+x;var be=x<0||1/x<0;if(x=isNaN(x)?a:N(Math.abs(x),M),$&&(x=Ni(x)),be&&+x==0&&_!=="+"&&(be=!1),L=(be?_==="("?_:s:_==="-"||_==="("?"":_)+L,V=(A==="s"?nn[8+gr/3]:"")+V+(be&&_==="("?")":""),w){for(le=-1,He=x.length;++le<He;)if(ye=x.charCodeAt(le),48>ye||ye>57){V=(ye===46?i+x.slice(le+1):x.slice(le))+V,x=x.slice(0,le);break}}}m&&!p&&(x=t(x,1/0));var we=L.length+x.length+V.length,re=we<b?new Array(b-we+1).join(g):"";switch(m&&p&&(x=t(re+x,re.length?b-V.length:1/0),re=""),h){case"<":x=L+x+V+re;break;case"=":x=L+re+x+V;break;case"^":x=re.slice(0,we=re.length>>1)+L+x+V+re.slice(we);break;default:x=re+L+x+V;break}return l(x)}return C.toString=function(){return d+""},C}function c(d,g){var h=f((d=ot(d),d.type="f",d)),_=Math.max(-8,Math.min(8,Math.floor(Ee(g)/3)))*3,v=Math.pow(10,-_),p=nn[8+_/3];return function(b){return h(v*b)+p}}return{format:f,formatPrefix:c}}var Ue,ve,_r;Ci({thousands:",",grouping:[3],currency:["$",""]});function Ci(e){return Ue=Si(e),ve=Ue.format,_r=Ue.formatPrefix,Ue}function zi(e){return Math.max(0,-Ee(Math.abs(e)))}function xi(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ee(t)/3)))*3-Ee(Math.abs(e)))}function Ei(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Ee(t)-Ee(e))+1}function Rt(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}const rn=Symbol("implicit");function ht(){var e=new Kt,t=[],n=[],r=rn;function i(l){let o=e.get(l);if(o===void 0){if(r!==rn)return r;e.set(l,o=t.push(l)-1)}return n[o%n.length]}return i.domain=function(l){if(!arguments.length)return t.slice();t=[],e=new Kt;for(const o of l)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(l){return arguments.length?(n=Array.from(l),i):n.slice()},i.unknown=function(l){return arguments.length?(r=l,i):r},i.copy=function(){return ht(t,n).unknown(r)},Rt.apply(i,arguments),i}function Ft(){var e=ht().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,l,o,s=!1,a=0,f=0,c=.5;delete e.unknown;function d(){var g=t().length,h=i<r,_=h?i:r,v=h?r:i;l=(v-_)/Math.max(1,g-a+f*2),s&&(l=Math.floor(l)),_+=(v-_-l*(g-a))*c,o=l*(1-a),s&&(_=Math.round(_),o=Math.round(o));var p=wi(g).map(function(b){return _+l*b});return n(h?p.reverse():p)}return e.domain=function(g){return arguments.length?(t(g),d()):t()},e.range=function(g){return arguments.length?([r,i]=g,r=+r,i=+i,d()):[r,i]},e.rangeRound=function(g){return[r,i]=g,r=+r,i=+i,s=!0,d()},e.bandwidth=function(){return o},e.step=function(){return l},e.round=function(g){return arguments.length?(s=!!g,d()):s},e.padding=function(g){return arguments.length?(a=Math.min(1,f=+g),d()):a},e.paddingInner=function(g){return arguments.length?(a=Math.min(1,g),d()):a},e.paddingOuter=function(g){return arguments.length?(f=+g,d()):f},e.align=function(g){return arguments.length?(c=Math.max(0,Math.min(1,g)),d()):c},e.copy=function(){return Ft(t(),[r,i]).round(s).paddingInner(a).paddingOuter(f).align(c)},Rt.apply(d(),arguments)}function Ot(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function pr(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Be(){}var De=.7,st=1/De,Ce="\\s*([+-]?\\d+)\\s*",Ve="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",oe="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ri=/^#([0-9a-f]{3,8})$/,Fi=new RegExp(`^rgb\\(${Ce},${Ce},${Ce}\\)$`),Oi=new RegExp(`^rgb\\(${oe},${oe},${oe}\\)$`),Hi=new RegExp(`^rgba\\(${Ce},${Ce},${Ce},${Ve}\\)$`),Li=new RegExp(`^rgba\\(${oe},${oe},${oe},${Ve}\\)$`),ji=new RegExp(`^hsl\\(${Ve},${oe},${oe}\\)$`),Pi=new RegExp(`^hsla\\(${Ve},${oe},${oe},${Ve}\\)$`),ln={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ot(Be,Ie,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:on,formatHex:on,formatHex8:Ti,formatHsl:Di,formatRgb:sn,toString:sn});function on(){return this.rgb().formatHex()}function Ti(){return this.rgb().formatHex8()}function Di(){return mr(this).formatHsl()}function sn(){return this.rgb().formatRgb()}function Ie(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Ri.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?an(t):n===3?new U(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Je(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Je(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Fi.exec(e))?new U(t[1],t[2],t[3],1):(t=Oi.exec(e))?new U(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Hi.exec(e))?Je(t[1],t[2],t[3],t[4]):(t=Li.exec(e))?Je(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=ji.exec(e))?cn(t[1],t[2]/100,t[3]/100,1):(t=Pi.exec(e))?cn(t[1],t[2]/100,t[3]/100,t[4]):ln.hasOwnProperty(e)?an(ln[e]):e==="transparent"?new U(NaN,NaN,NaN,0):null}function an(e){return new U(e>>16&255,e>>8&255,e&255,1)}function Je(e,t,n,r){return r<=0&&(e=t=n=NaN),new U(e,t,n,r)}function Vi(e){return e instanceof Be||(e=Ie(e)),e?(e=e.rgb(),new U(e.r,e.g,e.b,e.opacity)):new U}function kt(e,t,n,r){return arguments.length===1?Vi(e):new U(e,t,n,r??1)}function U(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Ot(U,kt,pr(Be,{brighter(e){return e=e==null?st:Math.pow(st,e),new U(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?De:Math.pow(De,e),new U(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new U(pe(this.r),pe(this.g),pe(this.b),at(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:fn,formatHex:fn,formatHex8:Ii,formatRgb:un,toString:un}));function fn(){return`#${_e(this.r)}${_e(this.g)}${_e(this.b)}`}function Ii(){return`#${_e(this.r)}${_e(this.g)}${_e(this.b)}${_e((isNaN(this.opacity)?1:this.opacity)*255)}`}function un(){const e=at(this.opacity);return`${e===1?"rgb(":"rgba("}${pe(this.r)}, ${pe(this.g)}, ${pe(this.b)}${e===1?")":`, ${e})`}`}function at(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function pe(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function _e(e){return e=pe(e),(e<16?"0":"")+e.toString(16)}function cn(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ie(e,t,n,r)}function mr(e){if(e instanceof ie)return new ie(e.h,e.s,e.l,e.opacity);if(e instanceof Be||(e=Ie(e)),!e)return new ie;if(e instanceof ie)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),l=Math.max(t,n,r),o=NaN,s=l-i,a=(l+i)/2;return s?(t===l?o=(n-r)/s+(n<r)*6:n===l?o=(r-t)/s+2:o=(t-n)/s+4,s/=a<.5?l+i:2-l-i,o*=60):s=a>0&&a<1?0:o,new ie(o,s,a,e.opacity)}function Bi(e,t,n,r){return arguments.length===1?mr(e):new ie(e,t,n,r??1)}function ie(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Ot(ie,Bi,pr(Be,{brighter(e){return e=e==null?st:Math.pow(st,e),new ie(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?De:Math.pow(De,e),new ie(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new U(mt(e>=240?e-240:e+120,i,r),mt(e,i,r),mt(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new ie(hn(this.h),Ke(this.s),Ke(this.l),at(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=at(this.opacity);return`${e===1?"hsl(":"hsla("}${hn(this.h)}, ${Ke(this.s)*100}%, ${Ke(this.l)*100}%${e===1?")":`, ${e})`}`}}));function hn(e){return e=(e||0)%360,e<0?e+360:e}function Ke(e){return Math.max(0,Math.min(1,e||0))}function mt(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Ht=e=>()=>e;function Wi(e,t){return function(n){return e+n*t}}function Qi(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Gi(e){return(e=+e)==1?vr:function(t,n){return n-t?Qi(t,n,e):Ht(isNaN(t)?n:t)}}function vr(e,t){var n=t-e;return n?Wi(e,n):Ht(isNaN(e)?t:e)}const dn=function e(t){var n=Gi(t);function r(i,l){var o=n((i=kt(i)).r,(l=kt(l)).r),s=n(i.g,l.g),a=n(i.b,l.b),f=vr(i.opacity,l.opacity);return function(c){return i.r=o(c),i.g=s(c),i.b=a(c),i.opacity=f(c),i+""}}return r.gamma=e,r}(1);function Ui(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(l){for(i=0;i<n;++i)r[i]=e[i]*(1-l)+t[i]*l;return r}}function Ji(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Ki(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),l=new Array(n),o;for(o=0;o<r;++o)i[o]=We(e[o],t[o]);for(;o<n;++o)l[o]=t[o];return function(s){for(o=0;o<r;++o)l[o]=i[o](s);return l}}function Xi(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function ft(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Yi(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=We(e[i],t[i]):r[i]=t[i];return function(l){for(i in n)r[i]=n[i](l);return r}}var $t=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,vt=new RegExp($t.source,"g");function Zi(e){return function(){return e}}function el(e){return function(t){return e(t)+""}}function tl(e,t){var n=$t.lastIndex=vt.lastIndex=0,r,i,l,o=-1,s=[],a=[];for(e=e+"",t=t+"";(r=$t.exec(e))&&(i=vt.exec(t));)(l=i.index)>n&&(l=t.slice(n,l),s[o]?s[o]+=l:s[++o]=l),(r=r[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,a.push({i:o,x:ft(r,i)})),n=vt.lastIndex;return n<t.length&&(l=t.slice(n),s[o]?s[o]+=l:s[++o]=l),s.length<2?a[0]?el(a[0].x):Zi(t):(t=a.length,function(f){for(var c=0,d;c<t;++c)s[(d=a[c]).i]=d.x(f);return s.join("")})}function We(e,t){var n=typeof t,r;return t==null||n==="boolean"?Ht(t):(n==="number"?ft:n==="string"?(r=Ie(t))?(t=r,dn):tl:t instanceof Ie?dn:t instanceof Date?Xi:Ji(t)?Ui:Array.isArray(t)?Ki:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Yi:ft)(e,t)}function nl(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function rl(e){return function(){return e}}function il(e){return+e}var gn=[0,1];function Ne(e){return e}function Mt(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:rl(isNaN(t)?NaN:.5)}function ll(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function ol(e,t,n){var r=e[0],i=e[1],l=t[0],o=t[1];return i<r?(r=Mt(i,r),l=n(o,l)):(r=Mt(r,i),l=n(l,o)),function(s){return l(r(s))}}function sl(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),l=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=Mt(e[o],e[o+1]),l[o]=n(t[o],t[o+1]);return function(s){var a=cr(e,s,1,r)-1;return l[a](i[a](s))}}function al(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function fl(){var e=gn,t=gn,n=We,r,i,l,o=Ne,s,a,f;function c(){var g=Math.min(e.length,t.length);return o!==Ne&&(o=ll(e[0],e[g-1])),s=g>2?sl:ol,a=f=null,d}function d(g){return g==null||isNaN(g=+g)?l:(a||(a=s(e.map(r),t,n)))(r(o(g)))}return d.invert=function(g){return o(i((f||(f=s(t,e.map(r),ft)))(g)))},d.domain=function(g){return arguments.length?(e=Array.from(g,il),c()):e.slice()},d.range=function(g){return arguments.length?(t=Array.from(g),c()):t.slice()},d.rangeRound=function(g){return t=Array.from(g),n=nl,c()},d.clamp=function(g){return arguments.length?(o=g?!0:Ne,c()):o!==Ne},d.interpolate=function(g){return arguments.length?(n=g,c()):n},d.unknown=function(g){return arguments.length?(l=g,d):l},function(g,h){return r=g,i=h,c()}}function ul(){return fl()(Ne,Ne)}function cl(e,t,n,r){var i=vi(e,t,n),l;switch(r=ot(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(l=xi(i,o))&&(r.precision=l),_r(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(l=Ei(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=l-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(l=zi(i))&&(r.precision=l-(r.type==="%")*2);break}}return ve(r)}function hl(e){var t=e.domain;return e.ticks=function(n){var r=t();return hr(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return cl(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,l=r.length-1,o=r[i],s=r[l],a,f,c=10;for(s<o&&(f=o,o=s,s=f,f=i,i=l,l=f);c-- >0;){if(f=ze(o,s,n),f===a)return r[i]=o,r[l]=s,t(r);if(f>0)o=Math.floor(o/f)*f,s=Math.ceil(s/f)*f;else if(f<0)o=Math.ceil(o*f)/f,s=Math.floor(s*f)/f;else break;a=f}return e},e}function fe(){var e=ul();return e.copy=function(){return al(e,fe())},Rt.apply(e,arguments),hl(e)}function Xe(e){return function(){return e}}function dl(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function At(e,t){if((o=e.length)>1)for(var n=1,r,i,l=e[t[0]],o,s=l.length;n<o;++n)for(i=l,l=e[t[n]],r=0;r<s;++r)l[r][1]+=l[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function Nt(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function gl(e,t){return e[t]}function _l(e){const t=[];return t.key=e,t}function pl(){var e=Xe([]),t=Nt,n=At,r=gl;function i(l){var o=Array.from(e.apply(this,arguments),_l),s,a=o.length,f=-1,c;for(const d of l)for(s=0,++f;s<a;++s)(o[s][f]=[0,+r(d,o[s].key,f,l)]).data=d;for(s=0,c=dl(t(o));s<a;++s)o[c[s]].index=s;return n(o,c),o}return i.keys=function(l){return arguments.length?(e=typeof l=="function"?l:Xe(Array.from(l)),i):e},i.value=function(l){return arguments.length?(r=typeof l=="function"?l:Xe(+l),i):r},i.order=function(l){return arguments.length?(t=l==null?Nt:typeof l=="function"?l:Xe(Array.from(l)),i):t},i.offset=function(l){return arguments.length?(n=l??At,i):n},i}function _n(e,t,n){const r=e.slice();return r[21]=t[n],r[23]=n,r}function pn(e,t,n){const r=e.slice();r[24]=t[n];const i=r[4][r[21].key];return r[25]=i,r}function mn(e){let t,n,r,i,l,o,s,a,f,c,d,g,h,_,v=e[21].key+"",p,b,m=e[11](e[25]/e[2])+"",M,$,A,S,k,N;return{c(){t=F("rect"),f=F("line"),_=F("text"),p=P(v),b=F("tspan"),M=P(m),A=E(),u(t,"class",n="horizontal-bar-rect "+(e[5]===e[23]?"selected":"unselected")+" svelte-tg5p7i"),u(t,"y",r=e[8](e[24].data.xVal)),u(t,"x",i=e[7](e[24][0])),u(t,"stroke","var(--black)"),u(t,"width",l=e[7](e[24][1])-e[7](e[24][0])),u(t,"fill",o=e[10](e[21].key)),u(t,"opacity",s=e[5]==="all"||e[5]===e[23]?"1":"0.25"),u(t,"height",a=e[8].bandwidth()),u(f,"class","line svelte-tg5p7i"),u(f,"x1",c=e[7](e[24][0])),u(f,"x2",d=e[7](e[24][0])),u(f,"y1",g=e[8](e[24].data.xVal)-ce),u(f,"y2",h=e[8].bandwidth()+e[8](e[24].data.xVal)+ce),u(f,"stroke","black"),u(b,"x",$=(e[7](e[24][0])+e[7](e[24][1]))/2),u(b,"dy","16"),u(b,"text-anchor","middle"),u(_,"class","horizontal-bar-text svelte-tg5p7i"),u(_,"y",S=e[8].bandwidth()/2),u(_,"x",k=(e[7](e[24][0])+e[7](e[24][1]))/2),u(_,"opacity",N=e[5]==="all"||e[5]===e[23]?"1":"0.25"),u(_,"text-anchor","middle")},m(w,C){O(w,t,C),O(w,f,C),O(w,_,C),y(_,p),y(_,b),y(b,M),y(_,A)},p(w,C){C&32&&n!==(n="horizontal-bar-rect "+(w[5]===w[23]?"selected":"unselected")+" svelte-tg5p7i")&&u(t,"class",n),C&320&&r!==(r=w[8](w[24].data.xVal))&&u(t,"y",r),C&192&&i!==(i=w[7](w[24][0]))&&u(t,"x",i),C&192&&l!==(l=w[7](w[24][1])-w[7](w[24][0]))&&u(t,"width",l),C&64&&o!==(o=w[10](w[21].key))&&u(t,"fill",o),C&32&&s!==(s=w[5]==="all"||w[5]===w[23]?"1":"0.25")&&u(t,"opacity",s),C&256&&a!==(a=w[8].bandwidth())&&u(t,"height",a),C&192&&c!==(c=w[7](w[24][0]))&&u(f,"x1",c),C&192&&d!==(d=w[7](w[24][0]))&&u(f,"x2",d),C&320&&g!==(g=w[8](w[24].data.xVal)-ce)&&u(f,"y1",g),C&320&&h!==(h=w[8].bandwidth()+w[8](w[24].data.xVal)+ce)&&u(f,"y2",h),C&64&&v!==(v=w[21].key+"")&&D(p,v),C&84&&m!==(m=w[11](w[25]/w[2])+"")&&D(M,m),C&192&&$!==($=(w[7](w[24][0])+w[7](w[24][1]))/2)&&u(b,"x",$),C&256&&S!==(S=w[8].bandwidth()/2)&&u(_,"y",S),C&192&&k!==(k=(w[7](w[24][0])+w[7](w[24][1]))/2)&&u(_,"x",k),C&32&&N!==(N=w[5]==="all"||w[5]===w[23]?"1":"0.25")&&u(_,"opacity",N)},d(w){w&&z(t),w&&z(f),w&&z(_)}}}function vn(e){let t,n,r,i,l,o,s,a,f=e[21],c=[];for(let h=0;h<f.length;h+=1)c[h]=mn(pn(e,f,h));function d(){return e[17](e[23],e[21])}function g(){return e[18](e[23],e[21])}return{c(){t=F("g");for(let h=0;h<c.length;h+=1)c[h].c();n=F("line"),u(n,"class","line svelte-tg5p7i"),u(n,"x1",r=e[3]-e[9].right),u(n,"x2",i=e[3]-e[9].right),u(n,"y1",l=e[8]("A")-ce),u(n,"y2",o=e[8].bandwidth()+e[8]("A")+ce),u(n,"stroke","black"),u(t,"class","series svelte-tg5p7i"),u(t,"role","button"),u(t,"tabindex","0")},m(h,_){O(h,t,_);for(let v=0;v<c.length;v+=1)c[v]&&c[v].m(t,null);y(t,n),s||(a=[I(t,"click",d),I(t,"keypress",g)],s=!0)},p(h,_){if(e=h,_&3572){f=e[21];let v;for(v=0;v<f.length;v+=1){const p=pn(e,f,v);c[v]?c[v].p(p,_):(c[v]=mn(p),c[v].c(),c[v].m(t,n))}for(;v<c.length;v+=1)c[v].d(1);c.length=f.length}_&8&&r!==(r=e[3]-e[9].right)&&u(n,"x1",r),_&8&&i!==(i=e[3]-e[9].right)&&u(n,"x2",i),_&256&&l!==(l=e[8]("A")-ce)&&u(n,"y1",l),_&256&&o!==(o=e[8].bandwidth()+e[8]("A")+ce)&&u(n,"y2",o)},d(h){h&&z(t),ee(c,h),s=!1,ne(a)}}}function ml(e){let t,n,r,i,l,o=e[6],s=[];for(let a=0;a<o.length;a+=1)s[a]=vn(_n(e,o,a));return{c(){t=q("div"),t.innerHTML="<p>Feedback Distribution</p>",n=E(),r=q("div"),i=F("svg");for(let a=0;a<s.length;a+=1)s[a].c();u(i,"width",e[1]),u(i,"height",e[0]),u(r,"id","stackedrect-holder"),u(r,"class","svelte-tg5p7i"),Y(()=>e[19].call(r))},m(a,f){O(a,t,f),O(a,n,f),O(a,r,f),y(r,i);for(let c=0;c<s.length;c+=1)s[c]&&s[c].m(i,null);l=Fe(r,e[19].bind(r))},p(a,[f]){if(f&8188){o=a[6];let c;for(c=0;c<o.length;c+=1){const d=_n(a,o,c);s[c]?s[c].p(d,f):(s[c]=vn(d),s[c].c(),s[c].m(i,null))}for(;c<s.length;c+=1)s[c].d(1);s.length=o.length}f&2&&u(i,"width",a[1]),f&1&&u(i,"height",a[0])},i:H,o:H,d(a){a&&z(t),a&&z(n),a&&z(r),ee(s,a),l()}}}const ce=5;function vl(e,t,n){let r,i,l,o,s,a,f,c,d,g,h;T(e,se,N=>n(15,d=N)),T(e,Bt,N=>n(4,g=N)),T(e,Z,N=>n(16,h=N));let _=300,v=300;const p={up:2,down:1,"n/a":0,all:"all"},b={top:10,bottom:10,left:25,right:5},m=ht().range(["var(--yellow)","var(--red)","var(--green)"]),M=ve(".0%");function $(N,w){r===N?n(5,r="all"):n(5,r=N),ge(se,d=r==="all"?"all":w,d)}const A=(N,w)=>$(N,w.key),S=(N,w)=>$(N,w.key);function k(){v=this.offsetWidth,_=this.offsetHeight,n(1,v),n(0,_)}return e.$$.update=()=>{e.$$.dirty&32768&&n(5,r=p[d]),e.$$.dirty&2&&n(3,i=v-b.left-b.right),e.$$.dirty&1&&n(14,l=_-b.top-b.bottom),e.$$.dirty&65552&&h.forEach(N=>{ge(Bt,g[N.vote_status]++,g)}),e.$$.dirty&16&&n(2,o=g.up+g.down+g["n/a"]),e.$$.dirty&16384&&n(8,s=Ft().rangeRound([b.top,l-b.bottom]).padding(0).domain(["a"])),e.$$.dirty&12&&n(7,a=fe().rangeRound([b.left,i-b.right]).domain([0,o])),e.$$.dirty&8208&&n(6,c=f([g]))},n(13,f=pl().keys(["n/a","down","up"]).order(Nt).offset(At)),[_,v,o,i,g,r,c,a,s,b,m,M,$,f,l,d,h,A,S,k]}class yl extends K{constructor(t){super(),J(this,t,vl,ml,Q,{})}}function bl(e,{delay:t=0,duration:n=400,easing:r=ar,axis:i="y"}={}){const l=getComputedStyle(e),o=+l.opacity,s=i==="y"?"height":"width",a=parseFloat(l[s]),f=i==="y"?["top","bottom"]:["left","right"],c=f.map(b=>`${b[0].toUpperCase()}${b.slice(1)}`),d=parseFloat(l[`padding${c[0]}`]),g=parseFloat(l[`padding${c[1]}`]),h=parseFloat(l[`margin${c[0]}`]),_=parseFloat(l[`margin${c[1]}`]),v=parseFloat(l[`border${c[0]}Width`]),p=parseFloat(l[`border${c[1]}Width`]);return{delay:t,duration:n,easing:r,css:b=>`overflow: hidden;opacity: ${Math.min(b*20,1)*o};${s}: ${b*a}px;padding-${f[0]}: ${b*d}px;padding-${f[1]}: ${b*g}px;margin-${f[0]}: ${b*h}px;margin-${f[1]}: ${b*_}px;border-${f[0]}-width: ${b*v}px;border-${f[1]}-width: ${b*p}px;`}}function wl(e){let t,n,r,i,l,o,s,a,f,c,d,g=e[3][e[2]]+"",h,_;return{c(){t=q("div"),n=q("div"),r=P("Q: "),i=P(e[0]),l=E(),o=q("div"),s=P("A: "),a=P(e[1]),f=E(),c=q("div"),d=P("Rating: "),h=P(g),u(n,"class","question svelte-szi0e"),u(o,"class","answer svelte-szi0e"),u(c,"class",_="feedback "+e[2]+" svelte-szi0e"),u(t,"class","qa-card svelte-szi0e")},m(v,p){O(v,t,p),y(t,n),y(n,r),y(n,i),y(t,l),y(t,o),y(o,s),y(o,a),y(t,f),y(t,c),y(c,d),y(c,h)},p(v,[p]){p&1&&D(i,v[0]),p&2&&D(a,v[1]),p&4&&g!==(g=v[3][v[2]]+"")&&D(h,g),p&4&&_!==(_="feedback "+v[2]+" svelte-szi0e")&&u(c,"class",_)},i:H,o:H,d(v){v&&z(t)}}}function kl(e,t,n){let{question:r="What is gradient descent?"}=t,{answer:i="Gradient descent is an algorithm used to minimize a loss function by taking small steps in the direction of steepest descent."}=t,{feedback:l="Good: 👍"}=t;const o={up:"Good 👍",down:"Bad 👎","n/a":"No Rating",all:"All"};return e.$$set=s=>{"question"in s&&n(0,r=s.question),"answer"in s&&n(1,i=s.answer),"feedback"in s&&n(2,l=s.feedback)},[r,i,l,o]}class $l extends K{constructor(t){super(),J(this,t,kl,wl,Q,{question:0,answer:1,feedback:2})}}function Ml(e){let t={Who:0,What:0,How:0,Why:0,Where:0,Does:0,Can:0,"N/A":0};for(let r=0;r<e.length;r++){let i=e[r].question.split(" ")[0];i in t?t[i]++:t["N/A"]++}return Object.keys(t).map(r=>({question:r,count:t[r]}))}function yr(e){return e.map(t=>{const n=t.question.split(" ").length,r=t.answer.split(" ").length;return{index:t.index,question:+n,answer:+r,vote:t.vote}})}function yn(e,t,n){const r=e.slice();return r[5]=t[n].question,r[6]=t[n].answer,r[7]=t[n].vote_status,r}function bn(e){let t,n,r,i,l;return n=new $l({props:{question:e[5],answer:e[6],feedback:e[7]}}),{c(){t=q("div"),G(n.$$.fragment),r=E()},m(o,s){O(o,t,s),B(n,t,null),y(t,r),l=!0},p(o,s){const a={};s&1&&(a.question=o[5]),s&1&&(a.answer=o[6]),s&1&&(a.feedback=o[7]),n.$set(a)},i(o){l||(R(n.$$.fragment,o),o&&Y(()=>{l&&(i||(i=Vt(t,e[1],{duration:300},!0)),i.run(1))}),l=!0)},o(o){j(n.$$.fragment,o),o&&(i||(i=Vt(t,e[1],{duration:300},!1)),i.run(0)),l=!1},d(o){o&&z(t),W(n),o&&i&&i.end()}}}function Al(e){let t,n,r=e[0],i=[];for(let o=0;o<r.length;o+=1)i[o]=bn(yn(e,r,o));const l=o=>j(i[o],1,1,()=>{i[o]=null});return{c(){t=q("div");for(let o=0;o<i.length;o+=1)i[o].c();u(t,"class","qa-container svelte-1xv9cfi")},m(o,s){O(o,t,s);for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(t,null);n=!0},p(o,[s]){if(s&1){r=o[0];let a;for(a=0;a<r.length;a+=1){const f=yn(o,r,a);i[a]?(i[a].p(f,s),R(i[a],1)):(i[a]=bn(f),i[a].c(),R(i[a],1),i[a].m(t,null))}for(he(),a=r.length;a<i.length;a+=1)l(a);de()}},i(o){if(!n){for(let s=0;s<r.length;s+=1)R(i[s]);n=!0}},o(o){i=i.filter(Boolean);for(let s=0;s<i.length;s+=1)j(i[s]);n=!1},d(o){o&&z(t),ee(i,o)}}}function Nl(e,t,n){let r,i,l,o;T(e,wt,a=>n(4,i=a)),T(e,se,a=>n(2,l=a)),T(e,Z,a=>n(3,o=a));const s=(a,{delay:f=0,duration:c=1e3,easing:d=ar})=>bl(a,{delay:f,duration:c,easing:d});return e.$$.update=()=>{e.$$.dirty&12&&n(0,r=l==="all"?o:o.filter(a=>a.vote_status===l)),e.$$.dirty&1&&console.log("qadata",r),e.$$.dirty&1&&ge(wt,i=Ml(r),i)},[r,s,l,o]}class ql extends K{constructor(t){super(),J(this,t,Nl,Al,Q,{})}}function wn(e,t,n){const r=e.slice();return r[15]=t[n],r}function kn(e,t,n){const r=e.slice();return r[18]=t[n],r}function $n(e,t,n){const r=e.slice();return r[18]=t[n],r}function Mn(e){let t,n,r,i,l=e[18]+"",o,s;return{c(){t=F("g"),n=F("line"),i=F("text"),o=P(l),u(n,"class","axis-tick svelte-1oikip4"),u(n,"x1","0"),u(n,"x2","0"),u(n,"y1",0),u(n,"y2",r=-e[2]+e[10].bottom+e[10].top),u(n,"stroke","var(--squidink)"),u(n,"stroke-dasharray","4"),u(i,"class","axis-text svelte-1oikip4"),u(i,"y","15"),u(i,"text-anchor","middle"),u(t,"transform",s=`translate(${e[8](e[18])+e[8].bandwidth()/2} ${e[2]-e[10].bottom})`)},m(a,f){O(a,t,f),y(t,n),y(t,i),y(i,o)},p(a,f){f&4&&r!==(r=-a[2]+a[10].bottom+a[10].top)&&u(n,"y2",r),f&32&&l!==(l=a[18]+"")&&D(o,l),f&292&&s!==(s=`translate(${a[8](a[18])+a[8].bandwidth()/2} ${a[2]-a[10].bottom})`)&&u(t,"transform",s)},d(a){a&&z(t)}}}function An(e){let t,n,r,i;return{c(){t=F("g"),n=F("line"),u(n,"class","axis-tick svelte-1oikip4"),u(n,"x1",0),u(n,"x2",r=e[3]-e[10].right-e[10].left),u(n,"y1","0"),u(n,"y2","0"),u(n,"stroke","black"),u(t,"transform",i=`translate(${e[10].left} ${e[7](e[18])+0})`)},m(l,o){O(l,t,o),y(t,n)},p(l,o){o&8&&r!==(r=l[3]-l[10].right-l[10].left)&&u(n,"x2",r),o&128&&i!==(i=`translate(${l[10].left} ${l[7](l[18])+0})`)&&u(t,"transform",i)},d(l){l&&z(t)}}}function Nn(e){let t,n,r,i,l,o,s,a,f=Math.round(e[11](e[15].count))+"",c,d,g;return{c(){t=F("g"),n=F("rect"),a=F("text"),c=P(f),u(n,"x",r=e[8](e[15].question)),u(n,"y",i=e[7](e[15].count)),u(n,"height",l=e[2]-e[7](e[15].count)-e[10].bottom),u(n,"fill",o=e[6](e[15].count)),u(n,"fill-opacity","0.95"),u(n,"width",s=e[8].bandwidth()),u(n,"class","svelte-1oikip4"),u(a,"class","axis-text svelte-1oikip4"),u(a,"x",d=e[8](e[15].question)+e[8].bandwidth()/2),u(a,"y",g=e[7](e[15].count)-5),u(a,"text-anchor","middle"),u(t,"class","series")},m(h,_){O(h,t,_),y(t,n),y(t,a),y(a,c)},p(h,_){_&288&&r!==(r=h[8](h[15].question))&&u(n,"x",r),_&160&&i!==(i=h[7](h[15].count))&&u(n,"y",i),_&164&&l!==(l=h[2]-h[7](h[15].count)-h[10].bottom)&&u(n,"height",l),_&96&&o!==(o=h[6](h[15].count))&&u(n,"fill",o),_&256&&s!==(s=h[8].bandwidth())&&u(n,"width",s),_&32&&f!==(f=Math.round(h[11](h[15].count))+"")&&D(c,f),_&288&&d!==(d=h[8](h[15].question)+h[8].bandwidth()/2)&&u(a,"x",d),_&160&&g!==(g=h[7](h[15].count)-5)&&u(a,"y",g)},d(h){h&&z(t)}}}function Sl(e){let t,n,r,i,l,o,s=e[9][e[4]]+"",a,f,c,d,g,h,_,v,p,b=e[5].map(qn),m=[];for(let k=0;k<b.length;k+=1)m[k]=Mn($n(e,b,k));let M=e[7].ticks(),$=[];for(let k=0;k<M.length;k+=1)$[k]=An(kn(e,M,k));let A=e[5],S=[];for(let k=0;k<A.length;k+=1)S[k]=Nn(wn(e,A,k));return{c(){t=q("div"),n=F("svg");for(let k=0;k<m.length;k+=1)m[k].c();r=me();for(let k=0;k<$.length;k+=1)$[k].c();i=me();for(let k=0;k<S.length;k+=1)S[k].c();l=F("text"),o=P("Question Type: "),a=P(s),c=F("line"),_=F("line"),u(l,"class","chart-title svelte-1oikip4"),u(l,"y",e[10].top/2+1),u(l,"x",f=(e[3]+e[10].left)/2),u(l,"text-anchor","middle"),u(c,"class","axis-line svelte-1oikip4"),u(c,"x1",e[10].left),u(c,"x2",d=e[3]-e[10].right),u(c,"y1",g=e[2]-e[10].bottom),u(c,"y2",h=e[2]-e[10].bottom),u(_,"class","axis-line svelte-1oikip4"),u(_,"x1",e[10].left),u(_,"x2",e[10].left),u(_,"y1",e[10].top),u(_,"y2",v=e[2]-e[10].bottom),u(_,"opacity","0"),u(n,"width",e[1]),u(n,"height",e[0]),u(t,"id","stackedrect-holder"),u(t,"class","svelte-1oikip4"),Y(()=>e[13].call(t))},m(k,N){O(k,t,N),y(t,n);for(let w=0;w<m.length;w+=1)m[w]&&m[w].m(n,null);y(n,r);for(let w=0;w<$.length;w+=1)$[w]&&$[w].m(n,null);y(n,i);for(let w=0;w<S.length;w+=1)S[w]&&S[w].m(n,null);y(n,l),y(l,o),y(l,a),y(n,c),y(n,_),p=Fe(t,e[13].bind(t))},p(k,[N]){if(N&1316){b=k[5].map(qn);let w;for(w=0;w<b.length;w+=1){const C=$n(k,b,w);m[w]?m[w].p(C,N):(m[w]=Mn(C),m[w].c(),m[w].m(n,r))}for(;w<m.length;w+=1)m[w].d(1);m.length=b.length}if(N&1160){M=k[7].ticks();let w;for(w=0;w<M.length;w+=1){const C=kn(k,M,w);$[w]?$[w].p(C,N):($[w]=An(C),$[w].c(),$[w].m(n,i))}for(;w<$.length;w+=1)$[w].d(1);$.length=M.length}if(N&3556){A=k[5];let w;for(w=0;w<A.length;w+=1){const C=wn(k,A,w);S[w]?S[w].p(C,N):(S[w]=Nn(C),S[w].c(),S[w].m(n,l))}for(;w<S.length;w+=1)S[w].d(1);S.length=A.length}N&16&&s!==(s=k[9][k[4]]+"")&&D(a,s),N&8&&f!==(f=(k[3]+k[10].left)/2)&&u(l,"x",f),N&8&&d!==(d=k[3]-k[10].right)&&u(c,"x2",d),N&4&&g!==(g=k[2]-k[10].bottom)&&u(c,"y1",g),N&4&&h!==(h=k[2]-k[10].bottom)&&u(c,"y2",h),N&4&&v!==(v=k[2]-k[10].bottom)&&u(_,"y2",v),N&2&&u(n,"width",k[1]),N&1&&u(n,"height",k[0])},i:H,o:H,d(k){k&&z(t),ee(m,k),ee($,k),ee(S,k),p()}}}const qn=e=>e.question;function Cl(e,t,n){let r,i,l,o,s,a,f,c;T(e,se,m=>n(4,f=m)),T(e,wt,m=>n(5,c=m));const d={up:"Good 👍",down:"Bad 👎","n/a":"No Rating",all:"All"},g={up:"#00ebc7",down:"#FF5470","n/a":"#fde24f",all:"#bfbfbf"};let h=300,_=300,v={top:35,bottom:10,left:25,right:5};const p=ve(".1f");function b(){_=this.offsetWidth,h=this.offsetHeight,n(1,_),n(0,h)}return e.$$.update=()=>{e.$$.dirty&2&&n(3,r=_-v.left-v.right),e.$$.dirty&1&&n(2,i=h-v.top-v.bottom),e.$$.dirty&40&&n(8,l=Ft().rangeRound([v.left,r-v.right]).padding(.05).domain(c.map(m=>m.question))),e.$$.dirty&36&&n(7,o=fe().rangeRound([i-v.bottom,v.top]).domain([0,xe(c,m=>m.count)])),e.$$.dirty&32&&n(12,s=xe(c,m=>m.count)),e.$$.dirty&4112&&n(6,a=fe().domain([0,s]).range(["white",g[f]]).interpolate(We))},[h,_,i,r,f,c,a,o,l,d,v,p,s,b]}class zl extends K{constructor(t){super(),J(this,t,Cl,Sl,Q,{})}}function Sn(e,t,n){const r=e.slice();r[19]=t[n];const i=r[7](r[19].x1)-r[7](r[19].x0);return r[20]=i,r}function Cn(e,t,n){const r=e.slice();return r[23]=t[n],r}function zn(e){let t,n,r,i,l=e[23]+"",o,s;return{c(){t=F("g"),n=F("line"),i=F("text"),o=P(l),u(n,"class","axis-tick svelte-kz2qh6"),u(n,"x1","0"),u(n,"x2","0"),u(n,"y1",0),u(n,"y2",r=-e[2]+e[9].bottom+e[9].top),u(n,"stroke","var(--squidink)"),u(n,"stroke-dasharray","4"),u(i,"class","axis-text svelte-kz2qh6"),u(i,"y","15"),u(i,"text-anchor","middle"),u(t,"transform",s=`translate(${e[7](e[23])+(e[7](1)-e[7](0))/2} ${e[2]-e[9].bottom})`),u(t,"class","svelte-kz2qh6")},m(a,f){O(a,t,f),y(t,n),y(t,i),y(i,o)},p(a,f){f&4&&r!==(r=-a[2]+a[9].bottom+a[9].top)&&u(n,"y2",r),f&128&&l!==(l=a[23]+"")&&D(o,l),f&132&&s!==(s=`translate(${a[7](a[23])+(a[7](1)-a[7](0))/2} ${a[2]-a[9].bottom})`)&&u(t,"transform",s)},d(a){a&&z(t)}}}function xn(e){let t,n,r,i,l,o,s;return{c(){t=F("g"),n=F("rect"),u(n,"x",r=e[7](e[19].x0)+1),u(n,"width",i=e[20]),u(n,"y",l=e[6](e[19].length)),u(n,"height",o=e[6](0)-e[6](e[19].length)),u(n,"fill",s=e[8][e[5]]),u(n,"class","svelte-kz2qh6"),u(t,"class","histogram-bin svelte-kz2qh6")},m(a,f){O(a,t,f),y(t,n)},p(a,f){f&136&&r!==(r=a[7](a[19].x0)+1)&&u(n,"x",r),f&136&&i!==(i=a[20])&&u(n,"width",i),f&72&&l!==(l=a[6](a[19].length))&&u(n,"y",l),f&72&&o!==(o=a[6](0)-a[6](a[19].length))&&u(n,"height",o),f&32&&s!==(s=a[8][a[5]])&&u(n,"fill",s)},d(a){a&&z(t)}}}function xl(e){let t,n,r,i,l,o,s,a,f,c,d,g=e[7].ticks(),h=[];for(let p=0;p<g.length;p+=1)h[p]=zn(Cn(e,g,p));let _=e[3],v=[];for(let p=0;p<_.length;p+=1)v[p]=xn(Sn(e,_,p));return{c(){t=q("div"),n=F("svg");for(let p=0;p<h.length;p+=1)h[p].c();r=me();for(let p=0;p<v.length;p+=1)v[p].c();i=F("text"),l=P("Answer Length"),s=F("line"),u(i,"class","chart-title svelte-kz2qh6"),u(i,"y",e[9].top/2+5),u(i,"x",o=(e[4]+e[9].left)/2),u(i,"text-anchor","middle"),u(s,"class","axis-line svelte-kz2qh6"),u(s,"x1",e[9].left),u(s,"x2",a=e[4]-e[9].right),u(s,"y1",f=e[2]-e[9].bottom),u(s,"y2",c=e[2]-e[9].bottom),u(n,"width",e[1]),u(n,"height",e[0]),u(n,"class","svelte-kz2qh6"),u(t,"class","histogram-container svelte-kz2qh6"),Y(()=>e[14].call(t))},m(p,b){O(p,t,b),y(t,n);for(let m=0;m<h.length;m+=1)h[m]&&h[m].m(n,null);y(n,r);for(let m=0;m<v.length;m+=1)v[m]&&v[m].m(n,null);y(n,i),y(i,l),y(n,s),d=Fe(t,e[14].bind(t))},p(p,[b]){if(b&644){g=p[7].ticks();let m;for(m=0;m<g.length;m+=1){const M=Cn(p,g,m);h[m]?h[m].p(M,b):(h[m]=zn(M),h[m].c(),h[m].m(n,r))}for(;m<h.length;m+=1)h[m].d(1);h.length=g.length}if(b&488){_=p[3];let m;for(m=0;m<_.length;m+=1){const M=Sn(p,_,m);v[m]?v[m].p(M,b):(v[m]=xn(M),v[m].c(),v[m].m(n,i))}for(;m<v.length;m+=1)v[m].d(1);v.length=_.length}b&16&&o!==(o=(p[4]+p[9].left)/2)&&u(i,"x",o),b&16&&a!==(a=p[4]-p[9].right)&&u(s,"x2",a),b&4&&f!==(f=p[2]-p[9].bottom)&&u(s,"y1",f),b&4&&c!==(c=p[2]-p[9].bottom)&&u(s,"y2",c),b&2&&u(n,"width",p[1]),b&1&&u(n,"height",p[0])},i:H,o:H,d(p){p&&z(t),ee(h,p),ee(v,p),d()}}}let En=100;function El(e,t,n){let r,i,l,o,s,a,f,c,d,g;T(e,se,M=>n(5,d=M)),T(e,Z,M=>n(13,g=M));const h={up:"#00ebc7",down:"#FF5470","n/a":"#fde24f",all:"#bfbfbf"};let _=300,v=300,p={top:15,bottom:10,left:25,right:5};ve(".1f");let b=Array.from({length:En},(M,$)=>$);function m(){v=this.offsetWidth,_=this.offsetHeight,n(1,v),n(0,_)}return e.$$.update=()=>{e.$$.dirty&8224&&n(12,r=d==="all"?g:g.filter(M=>M.vote_status===d)),e.$$.dirty&4096&&n(11,i=yr(r)),e.$$.dirty&2&&n(4,l=v-p.left-p.right),e.$$.dirty&1&&n(2,o=_-p.top-p.bottom),e.$$.dirty&2048&&n(3,s=dr().thresholds(b).value(M=>M.answer)(i)),e.$$.dirty&16&&n(7,a=fe().domain([3,En]).range([p.left,l-p.right])),e.$$.dirty&12&&n(6,f=fe().domain([0,xe(s,M=>M.length)]).range([o-p.bottom,p.top])),e.$$.dirty&2048&&n(10,c=xe(i,M=>M.length)),e.$$.dirty&1056&&fe().domain([0,c]).range(["white",h[d]]).interpolate(We)},[_,v,o,s,l,d,f,a,h,p,c,i,r,g,m]}class Rl extends K{constructor(t){super(),J(this,t,El,xl,Q,{})}}function Rn(e,t,n){const r=e.slice();r[18]=t[n];const i=r[7](r[18].x1)-r[7](r[18].x0);return r[19]=i,r}function Fn(e,t,n){const r=e.slice();return r[22]=t[n],r}function On(e){let t,n,r,i,l=e[22]+"",o,s;return{c(){t=F("g"),n=F("line"),i=F("text"),o=P(l),u(n,"class","axis-tick svelte-kz2qh6"),u(n,"x1","0"),u(n,"x2","0"),u(n,"y1",0),u(n,"y2",r=-e[2]+e[9].bottom+e[9].top),u(n,"stroke","var(--squidink)"),u(n,"stroke-dasharray","4"),u(i,"class","axis-text svelte-kz2qh6"),u(i,"y","15"),u(i,"text-anchor","middle"),u(t,"transform",s=`translate(${e[7](e[22])+(e[7](1)-e[7](0))/2} ${e[2]-e[9].bottom})`),u(t,"class","svelte-kz2qh6")},m(a,f){O(a,t,f),y(t,n),y(t,i),y(i,o)},p(a,f){f&4&&r!==(r=-a[2]+a[9].bottom+a[9].top)&&u(n,"y2",r),f&128&&l!==(l=a[22]+"")&&D(o,l),f&132&&s!==(s=`translate(${a[7](a[22])+(a[7](1)-a[7](0))/2} ${a[2]-a[9].bottom})`)&&u(t,"transform",s)},d(a){a&&z(t)}}}function Hn(e){let t,n,r,i,l,o,s;return{c(){t=F("g"),n=F("rect"),u(n,"x",r=e[7](e[18].x0)+1),u(n,"width",i=e[19]),u(n,"y",l=e[6](e[18].length)),u(n,"height",o=e[6](0)-e[6](e[18].length)),u(n,"fill",s=e[8][e[5]]),u(n,"class","svelte-kz2qh6"),u(t,"class","histogram-bin svelte-kz2qh6")},m(a,f){O(a,t,f),y(t,n)},p(a,f){f&136&&r!==(r=a[7](a[18].x0)+1)&&u(n,"x",r),f&136&&i!==(i=a[19])&&u(n,"width",i),f&72&&l!==(l=a[6](a[18].length))&&u(n,"y",l),f&72&&o!==(o=a[6](0)-a[6](a[18].length))&&u(n,"height",o),f&32&&s!==(s=a[8][a[5]])&&u(n,"fill",s)},d(a){a&&z(t)}}}function Fl(e){let t,n,r,i,l,o,s,a,f,c,d,g=e[7].ticks(),h=[];for(let p=0;p<g.length;p+=1)h[p]=On(Fn(e,g,p));let _=e[3],v=[];for(let p=0;p<_.length;p+=1)v[p]=Hn(Rn(e,_,p));return{c(){t=q("div"),n=F("svg");for(let p=0;p<h.length;p+=1)h[p].c();r=me();for(let p=0;p<v.length;p+=1)v[p].c();i=F("text"),l=P("Question Length"),s=F("line"),u(i,"class","chart-title svelte-kz2qh6"),u(i,"y",e[9].top/2+5),u(i,"x",o=(e[4]+e[9].left)/2),u(i,"text-anchor","middle"),u(s,"class","axis-line svelte-kz2qh6"),u(s,"x1",e[9].left),u(s,"x2",a=e[4]-e[9].right),u(s,"y1",f=e[2]-e[9].bottom),u(s,"y2",c=e[2]-e[9].bottom),u(n,"width",e[1]),u(n,"height",e[0]),u(n,"class","svelte-kz2qh6"),u(t,"class","histogram-container svelte-kz2qh6"),Y(()=>e[13].call(t))},m(p,b){O(p,t,b),y(t,n);for(let m=0;m<h.length;m+=1)h[m]&&h[m].m(n,null);y(n,r);for(let m=0;m<v.length;m+=1)v[m]&&v[m].m(n,null);y(n,i),y(i,l),y(n,s),d=Fe(t,e[13].bind(t))},p(p,[b]){if(b&644){g=p[7].ticks();let m;for(m=0;m<g.length;m+=1){const M=Fn(p,g,m);h[m]?h[m].p(M,b):(h[m]=On(M),h[m].c(),h[m].m(n,r))}for(;m<h.length;m+=1)h[m].d(1);h.length=g.length}if(b&488){_=p[3];let m;for(m=0;m<_.length;m+=1){const M=Rn(p,_,m);v[m]?v[m].p(M,b):(v[m]=Hn(M),v[m].c(),v[m].m(n,i))}for(;m<v.length;m+=1)v[m].d(1);v.length=_.length}b&16&&o!==(o=(p[4]+p[9].left)/2)&&u(i,"x",o),b&16&&a!==(a=p[4]-p[9].right)&&u(s,"x2",a),b&4&&f!==(f=p[2]-p[9].bottom)&&u(s,"y1",f),b&4&&c!==(c=p[2]-p[9].bottom)&&u(s,"y2",c),b&2&&u(n,"width",p[1]),b&1&&u(n,"height",p[0])},i:H,o:H,d(p){p&&z(t),ee(h,p),ee(v,p),d()}}}let Ln=100;function Ol(e,t,n){let r,i,l,o,s,a,f,c,d;T(e,se,m=>n(5,c=m)),T(e,Z,m=>n(12,d=m));const g={up:"#00ebc7",down:"#FF5470","n/a":"#fde24f",all:"#bfbfbf"};let h=300,_=300,v={top:15,bottom:10,left:25,right:5},p=Array.from({length:Ln},(m,M)=>M);ht().range(["var(--yellow)","var(--red)","var(--green)"]);function b(){_=this.offsetWidth,h=this.offsetHeight,n(1,_),n(0,h)}return e.$$.update=()=>{e.$$.dirty&4128&&n(11,r=c==="all"?d:d.filter(m=>m.vote_status===c)),e.$$.dirty&2048&&n(10,i=yr(r)),e.$$.dirty&2&&n(4,l=_-v.left-v.right),e.$$.dirty&1&&n(2,o=h-v.top-v.bottom),e.$$.dirty&1024&&n(3,s=dr().thresholds(p).value(m=>m.question)(i)),e.$$.dirty&16&&n(7,a=fe().domain([3,Ln]).range([v.left,l-v.right])),e.$$.dirty&12&&n(6,f=fe().domain([0,xe(s,m=>m.length)]).range([o-v.bottom,v.top])),e.$$.dirty&1024&&xe(i,m=>m.length)},[h,_,o,s,l,c,f,a,g,v,i,r,d,b]}class Hl extends K{constructor(t){super(),J(this,t,Ol,Fl,Q,{})}}function Ll(e){let t,n,r,i,l,o,s,a,f,c,d,g,h,_=Math.round(e[5](e[3]))+"",v,p,b,m,M,$,A,S;return{c(){t=q("div"),n=q("div"),r=q("p"),r.textContent="Questions",i=E(),l=q("select"),o=q("option"),o.textContent="All",s=q("option"),s.textContent="Good",a=q("option"),a.textContent="Bad",f=q("option"),f.textContent="N/A",c=E(),d=q("div"),g=F("svg"),h=F("text"),v=P(_),M=E(),$=q("p"),$.textContent="number of responses",u(r,"class","card-text svelte-1pknxov"),o.__value="all",o.value=o.__value,u(o,"class","svelte-1pknxov"),s.__value="up",s.value=s.__value,u(s,"class","svelte-1pknxov"),a.__value="down",a.value=a.__value,u(a,"class","svelte-1pknxov"),f.__value="n/a",f.value=f.__value,u(f,"class","svelte-1pknxov"),u(l,"id","feedback-dropdown"),u(l,"name","feedback-dropdown"),ue(l,"background",e[6][e[0]]),u(l,"class","svelte-1pknxov"),e[0]===void 0&&Y(()=>e[9].call(l)),u(n,"class","svelte-1pknxov"),u(h,"dominant-baseline","middle"),u(h,"x",p=e[2]/2),u(h,"y",b=e[1]/2),u(h,"text-anchor","middle"),u(h,"class","svelte-1pknxov"),u(g,"width",e[2]),u(g,"height",e[1]),u(g,"class","svelte-1pknxov"),u(d,"class","svelte-1pknxov"),Y(()=>e[10].call(d)),u($,"class","small svelte-1pknxov"),u(t,"class","card-container svelte-1pknxov"),ue(t,"background",e[6][e[0]])},m(k,N){O(k,t,N),y(t,n),y(n,r),y(n,i),y(n,l),y(l,o),y(l,s),y(l,a),y(l,f),tt(l,e[0],!0),y(t,c),y(t,d),y(d,g),y(g,h),y(h,v),m=Fe(d,e[10].bind(d)),y(t,M),y(t,$),A||(S=I(l,"change",e[9]),A=!0)},p(k,[N]){N&1&&ue(l,"background",k[6][k[0]]),N&1&&tt(l,k[0]),N&8&&_!==(_=Math.round(k[5](k[3]))+"")&&D(v,_),N&4&&p!==(p=k[2]/2)&&u(h,"x",p),N&2&&b!==(b=k[1]/2)&&u(h,"y",b),N&4&&u(g,"width",k[2]),N&2&&u(g,"height",k[1]),N&1&&ue(t,"background",k[6][k[0]])},i:H,o:H,d(k){k&&z(t),m(),A=!1,S()}}}function jl(e,t){return t==="all"?e.length:e.filter(r=>r.vote_status===t).length}function Pl(e,t,n){let r,i,l,o;T(e,se,_=>n(0,i=_)),T(e,Z,_=>n(8,l=_));let s,a,f=xt(0);T(e,f,_=>n(3,o=_));const c=ve(".1f"),d={up:"#00ebc7",down:"#FF5470","n/a":"#fde24f",all:"var(--white)"};function g(){i=ir(this),se.set(i)}function h(){a=this.clientWidth,s=this.clientHeight,n(2,a),n(1,s)}return e.$$.update=()=>{e.$$.dirty&257&&n(7,r=jl(l,i)),e.$$.dirty&128&&console.log("fbc",r),e.$$.dirty&128&&f.set(r)},[i,s,a,o,f,c,d,r,l,g,h]}class Tl extends K{constructor(t){super(),J(this,t,Pl,Ll,Q,{})}}function Dl(e){let t,n,r,i,l,o,s,a,f,c,d,g,h,_=e[5](e[3])+"",v,p,b,m,M,$,A,S;return{c(){t=q("div"),n=q("div"),r=q("p"),r.textContent="Questions",i=E(),l=q("select"),o=q("option"),o.textContent="All",s=q("option"),s.textContent="Good",a=q("option"),a.textContent="Bad",f=q("option"),f.textContent="N/A",c=E(),d=q("div"),g=F("svg"),h=F("text"),v=P(_),M=E(),$=q("p"),$.textContent="percentage of responses",u(r,"class","card-text svelte-mchgj2"),o.__value="all",o.value=o.__value,s.__value="up",s.value=s.__value,a.__value="down",a.value=a.__value,f.__value="n/a",f.value=f.__value,u(l,"id","feedback-dropdown"),u(l,"name","feedback-dropdown"),ue(l,"background",e[6][e[0]]),u(l,"class","svelte-mchgj2"),e[0]===void 0&&Y(()=>e[9].call(l)),u(h,"dominant-baseline","middle"),u(h,"x",p=e[2]/2),u(h,"y",b=e[1]/2),u(h,"text-anchor","middle"),u(h,"class","svelte-mchgj2"),u(g,"width",e[2]),u(g,"height",e[1]),u(g,"class","svelte-mchgj2"),Y(()=>e[10].call(d)),u($,"class","small svelte-mchgj2"),u(t,"class","card-container svelte-mchgj2"),ue(t,"background",e[6][e[0]])},m(k,N){O(k,t,N),y(t,n),y(n,r),y(n,i),y(n,l),y(l,o),y(l,s),y(l,a),y(l,f),tt(l,e[0],!0),y(t,c),y(t,d),y(d,g),y(g,h),y(h,v),m=Fe(d,e[10].bind(d)),y(t,M),y(t,$),A||(S=I(l,"change",e[9]),A=!0)},p(k,[N]){N&1&&ue(l,"background",k[6][k[0]]),N&1&&tt(l,k[0]),N&8&&_!==(_=k[5](k[3])+"")&&D(v,_),N&4&&p!==(p=k[2]/2)&&u(h,"x",p),N&2&&b!==(b=k[1]/2)&&u(h,"y",b),N&4&&u(g,"width",k[2]),N&2&&u(g,"height",k[1]),N&1&&ue(t,"background",k[6][k[0]])},i:H,o:H,d(k){k&&z(t),m(),A=!1,S()}}}function Vl(e,t){const n=e.length;return t==="all"?1:e.filter(i=>i.vote_status===t).length/n}function Il(e,t,n){let r,i,l,o;T(e,se,_=>n(0,i=_)),T(e,Z,_=>n(8,l=_));let s,a,f=xt(0);T(e,f,_=>n(3,o=_));const c=ve(".1%"),d={up:"#00ebc7",down:"#FF5470","n/a":"#fde24f",all:"var(--white)"};function g(){i=ir(this),se.set(i)}function h(){a=this.clientWidth,s=this.clientHeight,n(2,a),n(1,s)}return e.$$.update=()=>{e.$$.dirty&257&&n(7,r=Vl(l,i)),e.$$.dirty&128&&f.set(r)},[i,s,a,o,f,c,d,r,l,g,h]}class Bl extends K{constructor(t){super(),J(this,t,Il,Dl,Q,{})}}function Wl(e){let t,n,r,i,l,o,s,a,f,c,d,g,h,_,v,p,b,m,M,$,A,S,k,N,w,C,x;return l=new Tl({}),a=new Bl({}),d=new yl({}),_=new zl({props:{feedback:"Bad"}}),b=new Hl({}),$=new Rl({}),C=new ql({}),{c(){t=q("div"),n=q("div"),r=q("div"),i=q("div"),G(l.$$.fragment),o=E(),s=q("div"),G(a.$$.fragment),f=E(),c=q("div"),G(d.$$.fragment),g=E(),h=q("div"),G(_.$$.fragment),v=E(),p=q("div"),G(b.$$.fragment),m=E(),M=q("div"),G($.$$.fragment),A=E(),S=q("div"),k=q("div"),k.innerHTML=`<div class="right-chart-1 svelte-1jln0g6"></div> 
      <div class="right-chart-2 svelte-1jln0g6"></div>`,N=E(),w=q("div"),G(C.$$.fragment),u(i,"class","card-1 svelte-1jln0g6"),u(s,"class","card-2"),u(r,"class","left-text svelte-1jln0g6"),u(c,"class","left-confidence svelte-1jln0g6"),u(h,"class","left-question svelte-1jln0g6"),u(p,"class","left-filter svelte-1jln0g6"),u(M,"class","left-filter2"),u(n,"class","feedback-left svelte-1jln0g6"),u(k,"class","right-chart svelte-1jln0g6"),u(w,"class","right-table svelte-1jln0g6"),u(S,"class","feedback-right svelte-1jln0g6"),u(t,"class","feedback-container svelte-1jln0g6")},m(L,V){O(L,t,V),y(t,n),y(n,r),y(r,i),B(l,i,null),y(r,o),y(r,s),B(a,s,null),y(n,f),y(n,c),B(d,c,null),y(n,g),y(n,h),B(_,h,null),y(n,v),y(n,p),B(b,p,null),y(n,m),y(n,M),B($,M,null),y(t,A),y(t,S),y(S,k),y(S,N),y(S,w),B(C,w,null),x=!0},p:H,i(L){x||(R(l.$$.fragment,L),R(a.$$.fragment,L),R(d.$$.fragment,L),R(_.$$.fragment,L),R(b.$$.fragment,L),R($.$$.fragment,L),R(C.$$.fragment,L),x=!0)},o(L){j(l.$$.fragment,L),j(a.$$.fragment,L),j(d.$$.fragment,L),j(_.$$.fragment,L),j(b.$$.fragment,L),j($.$$.fragment,L),j(C.$$.fragment,L),x=!1},d(L){L&&z(t),W(l),W(a),W(d),W(_),W(b),W($),W(C)}}}function Ql(e,t,n){let r;T(e,Z,l=>n(0,r=l)),ct(()=>{i()});async function i(){console.log("fetching data from db");const a=(await(await fetch("http://127.0.0.1:5000/chat/qa_table/retrieve")).json()).rows.map(f=>({id:f[0],question:f[1],answer:f[2],vote_status:f[3]}));ge(Z,r=[...a],r)}return[]}class Gl extends K{constructor(t){super(),J(this,t,Ql,Wl,Q,{})}}var qt="http://www.w3.org/1999/xhtml";const jn={svg:"http://www.w3.org/2000/svg",xhtml:qt,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function br(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),jn.hasOwnProperty(t)?{space:jn[t],local:e}:e}function Ul(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===qt&&t.documentElement.namespaceURI===qt?t.createElement(e):t.createElementNS(n,e)}}function Jl(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function wr(e){var t=br(e);return(t.local?Jl:Ul)(t)}function Kl(){}function kr(e){return e==null?Kl:function(){return this.querySelector(e)}}function Xl(e){typeof e!="function"&&(e=kr(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var l=t[i],o=l.length,s=r[i]=new Array(o),a,f,c=0;c<o;++c)(a=l[c])&&(f=e.call(a,a.__data__,c,l))&&("__data__"in a&&(f.__data__=a.__data__),s[c]=f);return new te(r,this._parents)}function Yl(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Zl(){return[]}function eo(e){return e==null?Zl:function(){return this.querySelectorAll(e)}}function to(e){return function(){return Yl(e.apply(this,arguments))}}function no(e){typeof e=="function"?e=to(e):e=eo(e);for(var t=this._groups,n=t.length,r=[],i=[],l=0;l<n;++l)for(var o=t[l],s=o.length,a,f=0;f<s;++f)(a=o[f])&&(r.push(e.call(a,a.__data__,f,o)),i.push(a));return new te(r,i)}function ro(e){return function(){return this.matches(e)}}function $r(e){return function(t){return t.matches(e)}}var io=Array.prototype.find;function lo(e){return function(){return io.call(this.children,e)}}function oo(){return this.firstElementChild}function so(e){return this.select(e==null?oo:lo(typeof e=="function"?e:$r(e)))}var ao=Array.prototype.filter;function fo(){return Array.from(this.children)}function uo(e){return function(){return ao.call(this.children,e)}}function co(e){return this.selectAll(e==null?fo:uo(typeof e=="function"?e:$r(e)))}function ho(e){typeof e!="function"&&(e=ro(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var l=t[i],o=l.length,s=r[i]=[],a,f=0;f<o;++f)(a=l[f])&&e.call(a,a.__data__,f,l)&&s.push(a);return new te(r,this._parents)}function Mr(e){return new Array(e.length)}function go(){return new te(this._enter||this._groups.map(Mr),this._parents)}function ut(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}ut.prototype={constructor:ut,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function _o(e){return function(){return e}}function po(e,t,n,r,i,l){for(var o=0,s,a=t.length,f=l.length;o<f;++o)(s=t[o])?(s.__data__=l[o],r[o]=s):n[o]=new ut(e,l[o]);for(;o<a;++o)(s=t[o])&&(i[o]=s)}function mo(e,t,n,r,i,l,o){var s,a,f=new Map,c=t.length,d=l.length,g=new Array(c),h;for(s=0;s<c;++s)(a=t[s])&&(g[s]=h=o.call(a,a.__data__,s,t)+"",f.has(h)?i[s]=a:f.set(h,a));for(s=0;s<d;++s)h=o.call(e,l[s],s,l)+"",(a=f.get(h))?(r[s]=a,a.__data__=l[s],f.delete(h)):n[s]=new ut(e,l[s]);for(s=0;s<c;++s)(a=t[s])&&f.get(g[s])===a&&(i[s]=a)}function vo(e){return e.__data__}function yo(e,t){if(!arguments.length)return Array.from(this,vo);var n=t?mo:po,r=this._parents,i=this._groups;typeof e!="function"&&(e=_o(e));for(var l=i.length,o=new Array(l),s=new Array(l),a=new Array(l),f=0;f<l;++f){var c=r[f],d=i[f],g=d.length,h=bo(e.call(c,c&&c.__data__,f,r)),_=h.length,v=s[f]=new Array(_),p=o[f]=new Array(_),b=a[f]=new Array(g);n(c,d,v,p,b,h,t);for(var m=0,M=0,$,A;m<_;++m)if($=v[m]){for(m>=M&&(M=m+1);!(A=p[M])&&++M<_;);$._next=A||null}}return o=new te(o,r),o._enter=s,o._exit=a,o}function bo(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function wo(){return new te(this._exit||this._groups.map(Mr),this._parents)}function ko(e,t,n){var r=this.enter(),i=this,l=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?l.remove():n(l),r&&i?r.merge(i).order():i}function $o(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,l=r.length,o=Math.min(i,l),s=new Array(i),a=0;a<o;++a)for(var f=n[a],c=r[a],d=f.length,g=s[a]=new Array(d),h,_=0;_<d;++_)(h=f[_]||c[_])&&(g[_]=h);for(;a<i;++a)s[a]=n[a];return new te(s,this._parents)}function Mo(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,l=r[i],o;--i>=0;)(o=r[i])&&(l&&o.compareDocumentPosition(l)^4&&l.parentNode.insertBefore(o,l),l=o);return this}function Ao(e){e||(e=No);function t(d,g){return d&&g?e(d.__data__,g.__data__):!d-!g}for(var n=this._groups,r=n.length,i=new Array(r),l=0;l<r;++l){for(var o=n[l],s=o.length,a=i[l]=new Array(s),f,c=0;c<s;++c)(f=o[c])&&(a[c]=f);a.sort(t)}return new te(i,this._parents).order()}function No(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function qo(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function So(){return Array.from(this)}function Co(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,l=r.length;i<l;++i){var o=r[i];if(o)return o}return null}function zo(){let e=0;for(const t of this)++e;return e}function xo(){return!this.node()}function Eo(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],l=0,o=i.length,s;l<o;++l)(s=i[l])&&e.call(s,s.__data__,l,i);return this}function Ro(e){return function(){this.removeAttribute(e)}}function Fo(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Oo(e,t){return function(){this.setAttribute(e,t)}}function Ho(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Lo(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function jo(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Po(e,t){var n=br(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Fo:Ro:typeof t=="function"?n.local?jo:Lo:n.local?Ho:Oo)(n,t))}function Ar(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function To(e){return function(){this.style.removeProperty(e)}}function Do(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Vo(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Io(e,t,n){return arguments.length>1?this.each((t==null?To:typeof t=="function"?Vo:Do)(e,t,n??"")):Bo(this.node(),e)}function Bo(e,t){return e.style.getPropertyValue(t)||Ar(e).getComputedStyle(e,null).getPropertyValue(t)}function Wo(e){return function(){delete this[e]}}function Qo(e,t){return function(){this[e]=t}}function Go(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Uo(e,t){return arguments.length>1?this.each((t==null?Wo:typeof t=="function"?Go:Qo)(e,t)):this.node()[e]}function Nr(e){return e.trim().split(/^|\s+/)}function Lt(e){return e.classList||new qr(e)}function qr(e){this._node=e,this._names=Nr(e.getAttribute("class")||"")}qr.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Sr(e,t){for(var n=Lt(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function Cr(e,t){for(var n=Lt(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function Jo(e){return function(){Sr(this,e)}}function Ko(e){return function(){Cr(this,e)}}function Xo(e,t){return function(){(t.apply(this,arguments)?Sr:Cr)(this,e)}}function Yo(e,t){var n=Nr(e+"");if(arguments.length<2){for(var r=Lt(this.node()),i=-1,l=n.length;++i<l;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?Xo:t?Jo:Ko)(n,t))}function Zo(){this.textContent=""}function es(e){return function(){this.textContent=e}}function ts(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function ns(e){return arguments.length?this.each(e==null?Zo:(typeof e=="function"?ts:es)(e)):this.node().textContent}function rs(){this.innerHTML=""}function is(e){return function(){this.innerHTML=e}}function ls(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function os(e){return arguments.length?this.each(e==null?rs:(typeof e=="function"?ls:is)(e)):this.node().innerHTML}function ss(){this.nextSibling&&this.parentNode.appendChild(this)}function as(){return this.each(ss)}function fs(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function us(){return this.each(fs)}function cs(e){var t=typeof e=="function"?e:wr(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function hs(){return null}function ds(e,t){var n=typeof e=="function"?e:wr(e),r=t==null?hs:typeof t=="function"?t:kr(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function gs(){var e=this.parentNode;e&&e.removeChild(this)}function _s(){return this.each(gs)}function ps(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ms(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function vs(e){return this.select(e?ms:ps)}function ys(e){return arguments.length?this.property("__data__",e):this.node().__data__}function bs(e){return function(t){e.call(this,t,this.__data__)}}function ws(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function ks(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,l;n<i;++n)l=t[n],(!e.type||l.type===e.type)&&l.name===e.name?this.removeEventListener(l.type,l.listener,l.options):t[++r]=l;++r?t.length=r:delete this.__on}}}function $s(e,t,n){return function(){var r=this.__on,i,l=bs(t);if(r){for(var o=0,s=r.length;o<s;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=l,i.options=n),i.value=t;return}}this.addEventListener(e.type,l,n),i={type:e.type,name:e.name,value:t,listener:l,options:n},r?r.push(i):this.__on=[i]}}function Ms(e,t,n){var r=ws(e+""),i,l=r.length,o;if(arguments.length<2){var s=this.node().__on;if(s){for(var a=0,f=s.length,c;a<f;++a)for(i=0,c=s[a];i<l;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(s=t?$s:ks,i=0;i<l;++i)this.each(s(r[i],t,n));return this}function zr(e,t,n){var r=Ar(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function As(e,t){return function(){return zr(this,e,t)}}function Ns(e,t){return function(){return zr(this,e,t.apply(this,arguments))}}function qs(e,t){return this.each((typeof t=="function"?Ns:As)(e,t))}function*Ss(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,l=r.length,o;i<l;++i)(o=r[i])&&(yield o)}var Cs=[null];function te(e,t){this._groups=e,this._parents=t}function zs(){return this}te.prototype={constructor:te,select:Xl,selectAll:no,selectChild:so,selectChildren:co,filter:ho,data:yo,enter:go,exit:wo,join:ko,merge:$o,selection:zs,order:Mo,sort:Ao,call:qo,nodes:So,node:Co,size:zo,empty:xo,each:Eo,attr:Po,style:Io,property:Uo,classed:Yo,text:ns,html:os,raise:as,lower:us,append:cs,insert:ds,remove:_s,clone:vs,datum:ys,on:Ms,dispatch:qs,[Symbol.iterator]:Ss};function Pn(e){return typeof e=="string"?new te([[document.querySelector(e)]],[document.documentElement]):new te([[e]],Cs)}function Tn(e,t,n){const r=e.slice();return r[14]=t[n],r[16]=n,r}function Dn(e,t){let n,r,i,l,o,s,a,f,c,d=t[14].question+"",g,h,_,v,p,b,m,M=t[14].up_ranking_answer+"",$,A,S,k,N,w,C=t[14].low_ranking_answer+"",x,L,V,le,He;function ye(...X){return t[7](t[14],t[16],...X)}function be(...X){return t[8](t[14],t[16],...X)}function we(...X){return t[9](t[14],t[16],...X)}function re(...X){return t[10](t[14],t[16],...X)}return{key:e,first:null,c(){n=q("div"),r=q("div"),i=q("div"),l=E(),o=q("div"),s=q("div"),a=q("h5"),a.textContent="Question:",f=E(),c=q("p"),g=P(d),h=E(),_=q("div"),v=q("div"),p=q("h5"),p.textContent="Response 1:",b=E(),m=q("p"),$=P(M),A=E(),S=q("div"),k=q("h5"),k.textContent="Response 2:",N=E(),w=q("p"),x=P(C),L=E(),u(i,"class","avatar"),u(a,"class","bold svelte-au920n"),u(s,"class","question svelte-au920n"),u(p,"class","bold underline svelte-au920n"),u(v,"class","answer svelte-au920n"),u(k,"class","bold underline svelte-au920n"),u(S,"class","answer svelte-au920n"),u(_,"class","answers svelte-au920n"),u(o,"class","message-content svelte-au920n"),u(r,"class","chat-message-center svelte-au920n"),u(n,"class","chat-message svelte-au920n"),this.first=n},m(X,ke){O(X,n,ke),y(n,r),y(r,i),y(r,l),y(r,o),y(o,s),y(s,a),y(s,f),y(s,c),y(c,g),y(o,h),y(o,_),y(_,v),y(v,p),y(v,b),y(v,m),y(m,$),y(_,A),y(_,S),y(S,k),y(S,N),y(S,w),y(w,x),y(n,L),le||(He=[I(v,"click",ye),I(v,"keydown",be),I(S,"click",we),I(S,"keydown",re),Yn(V=Es.call(null,n,t[16]===t[0].length-1))],le=!0)},p(X,ke){t=X,ke&1&&d!==(d=t[14].question+"")&&D(g,d),ke&1&&M!==(M=t[14].up_ranking_answer+"")&&D($,M),ke&1&&C!==(C=t[14].low_ranking_answer+"")&&D(x,C),V&&Re(V.update)&&ke&1&&V.update.call(null,t[16]===t[0].length-1)},d(X){X&&z(n),le=!1,ne(He)}}}function xs(e){let t,n,r,i,l,o,s=[],a=new Map,f,c,d,g,h,_,v=(e[2]?e[3]:"Send")+"",p,b,m,M,$,A,S=e[0];const k=N=>N[16];for(let N=0;N<S.length;N+=1){let w=Tn(e,S,N),C=k(w);a.set(C,s[N]=Dn(C,w))}return{c(){t=q("div"),n=q("div"),n.innerHTML=`<h5 class="underline bold svelte-au920n">Ranked Feedback Instructions</h5> 
    <p class="svelte-au920n">Ask a question and click on the better of the two responses. The better
      response will be outlined in <span class="green svelte-au920n">green</span>, the worse
      response outlined in <span class="red svelte-au920n">red</span>. This data will be
      automatically fed to RLHF.</p> 
    <button class="svelte-au920n">Download Data</button>`,r=E(),i=q("div"),l=q("section"),o=q("div");for(let N=0;N<s.length;N+=1)s[N].c();f=E(),c=q("div"),d=q("form"),g=q("input"),h=E(),_=q("button"),p=P(v),m=E(),M=q("p"),M.textContent="Note - may produce inaccurate information.",u(n,"class","instructions svelte-au920n"),u(o,"class","chat-log svelte-au920n"),u(l,"class","chatbox svelte-au920n"),u(g,"class","chat-input-textarea svelte-au920n"),u(g,"placeholder","Type Message Here"),u(_,"class",b="btnyousend "+(e[1]===""?"":"active")+" svelte-au920n"),u(_,"type","submit"),u(d,"class","chat-input-form svelte-au920n"),u(M,"class","message svelte-au920n"),u(c,"class","chat-input-holder svelte-au920n"),u(i,"class","ranked-chat svelte-au920n"),u(t,"class","ranked-feedback-container svelte-au920n")},m(N,w){O(N,t,w),y(t,n),y(t,r),y(t,i),y(i,l),y(l,o);for(let C=0;C<s.length;C+=1)s[C]&&s[C].m(o,null);y(i,f),y(i,c),y(c,d),y(d,g),et(g,e[1]),y(d,h),y(d,_),y(_,p),y(c,m),y(c,M),$||(A=[I(g,"input",e[11]),I(d,"submit",e[4])],$=!0)},p(N,[w]){w&33&&(S=N[0],s=sr(s,w,k,1,N,S,a,o,or,Dn,null,Tn)),w&2&&g.value!==N[1]&&et(g,N[1]),w&12&&v!==(v=(N[2]?N[3]:"Send")+"")&&D(p,v),w&2&&b!==(b="btnyousend "+(N[1]===""?"":"active")+" svelte-au920n")&&u(_,"class",b)},i:H,o:H,d(N){N&&z(t);for(let w=0;w<s.length;w+=1)s[w].d();$=!1,ne(A)}}}function Es(e){setTimeout(()=>{e.scrollIntoView({behavior:"smooth"})},0)}async function Rs(e){console.log("adding to db: ",e);const t=await fetch("http://127.0.0.1:5000/chat/ranking_table/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(t.ok)console.log("update worked!",t);else{const n=await t.text();alert(n)}}function Fs(e,t,n){let r,i;T(e,Ge,b=>n(0,i=b));let l="",o="",s=!1;ct(()=>{a()});async function a(){console.log("fetching data from db");const M=(await(await fetch("http://127.0.0.1:5000/chat/ranking_table/retrieve")).json()).rows;console.log(M);const $=M.map(A=>({id:A[0],question:A[1],up_ranking_answer:A[2],low_ranking_answer:A[3]}));ge(Ge,i=[...$],i)}const f=async b=>{b.preventDefault(),l=o,console.log("message",l),n(1,o=""),n(2,s=!0);let m={question:l,up_ranking_answer:"Loading...",low_ranking_answer:"bbb..."};console.log("adding to log here"),ge(Ge,i=[...i,m],i);const M=await fetch(`/chat/${l}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:l})});if(M.ok){const $=await M.json();console.log("ANSWER!!",$),m.up_ranking_answer=$.answer,m.low_ranking_answer=$.answer,Ge.update(A=>(A[A.length-1]=m,A))}else{const $=await M.text();alert($)}n(2,s=!1)};let c=0;setInterval(()=>{n(6,c=(c+1)%4)},200);function d(b,m,M,$){const A=i[M],S={1:"up_ranking_answer",2:"low_ranking_answer"},k={question:A.question,up_ranking_answer:A[S[$]],low_ranking_answer:A[S[$%2+1]]};Rs(k),Pn(b.currentTarget.parentNode).selectAll("div").style("outline","2px solid var(--red)").style("border","1px solid var(--red)"),Pn(b.currentTarget).style("outline","2px solid var(--green)").style("border","1px solid var(--green)")}const g=(b,m,M)=>d(M,b,m,1),h=(b,m,M)=>d(M,b,m,1),_=(b,m,M)=>d(M,b,m,2),v=(b,m,M)=>d(M,b,m,2);function p(){o=this.value,n(1,o)}return e.$$.update=()=>{e.$$.dirty&64&&n(3,r=".".repeat(c).padEnd(3)),e.$$.dirty&1&&console.log("chat updated!",i)},[i,o,s,r,f,d,c,g,h,_,v,p]}class Os extends K{constructor(t){super(),J(this,t,Fs,xs,Q,{})}}function Vn(e){let t,n;return t=new fr({}),{c(){G(t.$$.fragment)},m(r,i){B(t,r,i),n=!0},i(r){n||(R(t.$$.fragment,r),n=!0)},o(r){j(t.$$.fragment,r),n=!1},d(r){W(t,r)}}}function In(e){let t,n;return t=new fr({props:{feedback:!0}}),{c(){G(t.$$.fragment)},m(r,i){B(t,r,i),n=!0},i(r){n||(R(t.$$.fragment,r),n=!0)},o(r){j(t.$$.fragment,r),n=!1},d(r){W(t,r)}}}function Bn(e){let t,n;return t=new Os({}),{c(){G(t.$$.fragment)},m(r,i){B(t,r,i),n=!0},i(r){n||(R(t.$$.fragment,r),n=!0)},o(r){j(t.$$.fragment,r),n=!1},d(r){W(t,r)}}}function Hs(e){let t,n,r,i,l=!e[0]&&Vn(),o=e[0]==="vote"&&In(),s=e[0]==="rank"&&Bn();return{c(){l&&l.c(),t=E(),o&&o.c(),n=E(),s&&s.c(),r=me()},m(a,f){l&&l.m(a,f),O(a,t,f),o&&o.m(a,f),O(a,n,f),s&&s.m(a,f),O(a,r,f),i=!0},p(a,[f]){a[0]?l&&(he(),j(l,1,1,()=>{l=null}),de()):l?f&1&&R(l,1):(l=Vn(),l.c(),R(l,1),l.m(t.parentNode,t)),a[0]==="vote"?o?f&1&&R(o,1):(o=In(),o.c(),R(o,1),o.m(n.parentNode,n)):o&&(he(),j(o,1,1,()=>{o=null}),de()),a[0]==="rank"?s?f&1&&R(s,1):(s=Bn(),s.c(),R(s,1),s.m(r.parentNode,r)):s&&(he(),j(s,1,1,()=>{s=null}),de())},i(a){i||(R(l),R(o),R(s),i=!0)},o(a){j(l),j(o),j(s),i=!1},d(a){l&&l.d(a),a&&z(t),o&&o.d(a),a&&z(n),s&&s.d(a),a&&z(r)}}}function Ls(e,t,n){let{feedback:r}=t;return e.$$set=i=>{"feedback"in i&&n(0,r=i.feedback)},[r]}class js extends K{constructor(t){super(),J(this,t,Ls,Hs,Q,{feedback:0})}}function Wn(e,t,n){const r=e.slice();return r[2]=t[n],r}function Qn(e){let t,n;const r=[e[2].props];let i={};for(let l=0;l<r.length;l+=1)i=Pe(i,r[l]);return t=new Gl({props:i}),{c(){G(t.$$.fragment)},m(l,o){B(t,l,o),n=!0},p(l,o){const s=o&1?Ct(r,[zt(l[2].props)]):{};t.$set(s)},i(l){n||(R(t.$$.fragment,l),n=!0)},o(l){j(t.$$.fragment,l),n=!1},d(l){W(t,l)}}}function Gn(e){let t,n;const r=[e[2].props];let i={};for(let l=0;l<r.length;l+=1)i=Pe(i,r[l]);return t=new js({props:i}),{c(){G(t.$$.fragment)},m(l,o){B(t,l,o),n=!0},p(l,o){const s=o&1?Ct(r,[zt(l[2].props)]):{};t.$set(s)},i(l){n||(R(t.$$.fragment,l),n=!0)},o(l){j(t.$$.fragment,l),n=!1},d(l){W(t,l)}}}function Un(e){let t,n;const r=[e[2].props];let i={};for(let l=0;l<r.length;l+=1)i=Pe(i,r[l]);return t=new ni({props:i}),{c(){G(t.$$.fragment)},m(l,o){B(t,l,o),n=!0},p(l,o){const s=o&1?Ct(r,[zt(l[2].props)]):{};t.$set(s)},i(l){n||(R(t.$$.fragment,l),n=!0)},o(l){j(t.$$.fragment,l),n=!1},d(l){W(t,l)}}}function Jn(e){let t,n,r,i,l=e[2].svelte_component==="Feedback"&&Qn(e),o=e[2].svelte_component==="Chatbot"&&Gn(e),s=e[2].svelte_component==="Dropdown"&&Un(e);return{c(){l&&l.c(),t=E(),o&&o.c(),n=E(),s&&s.c(),r=me()},m(a,f){l&&l.m(a,f),O(a,t,f),o&&o.m(a,f),O(a,n,f),s&&s.m(a,f),O(a,r,f),i=!0},p(a,f){a[2].svelte_component==="Feedback"?l?(l.p(a,f),f&1&&R(l,1)):(l=Qn(a),l.c(),R(l,1),l.m(t.parentNode,t)):l&&(he(),j(l,1,1,()=>{l=null}),de()),a[2].svelte_component==="Chatbot"?o?(o.p(a,f),f&1&&R(o,1)):(o=Gn(a),o.c(),R(o,1),o.m(n.parentNode,n)):o&&(he(),j(o,1,1,()=>{o=null}),de()),a[2].svelte_component==="Dropdown"?s?(s.p(a,f),f&1&&R(s,1)):(s=Un(a),s.c(),R(s,1),s.m(r.parentNode,r)):s&&(he(),j(s,1,1,()=>{s=null}),de())},i(a){i||(R(l),R(o),R(s),i=!0)},o(a){j(l),j(o),j(s),i=!1},d(a){l&&l.d(a),a&&z(t),o&&o.d(a),a&&z(n),s&&s.d(a),a&&z(r)}}}function Ps(e){let t,n,r=e[0],i=[];for(let o=0;o<r.length;o+=1)i[o]=Jn(Wn(e,r,o));const l=o=>j(i[o],1,1,()=>{i[o]=null});return{c(){for(let o=0;o<i.length;o+=1)i[o].c();t=me()},m(o,s){for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(o,s);O(o,t,s),n=!0},p(o,[s]){if(s&1){r=o[0];let a;for(a=0;a<r.length;a+=1){const f=Wn(o,r,a);i[a]?(i[a].p(f,s),R(i[a],1)):(i[a]=Jn(f),i[a].c(),R(i[a],1),i[a].m(t.parentNode,t))}for(he(),a=r.length;a<i.length;a+=1)l(a);de()}},i(o){if(!n){for(let s=0;s<r.length;s+=1)R(i[s]);n=!0}},o(o){i=i.filter(Boolean);for(let s=0;s<i.length;s+=1)j(i[s]);n=!1},d(o){ee(i,o),o&&z(t)}}}function Ts(e,t,n){let r;const i=Oe([]);return T(e,i,l=>n(0,r=l)),fetch("/components").then(l=>l.json()).then(l=>{i.set(l)}),[r,i]}class Ds extends K{constructor(t){super(),J(this,t,Ts,Ps,Q,{})}}new Ds({target:document.getElementById("app")});
