(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&l(r)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function l(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function O(){}function ve(e,t){for(const n in t)e[n]=t[n];return e}function we(e){return e()}function re(){return Object.create(null)}function P(e){e.forEach(we)}function W(e){return typeof e=="function"}function X(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Ne(e){return Object.keys(e).length===0}function Le(e,...t){if(e==null)return O;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function ke(e,t,n){e.$$.on_destroy.push(Le(t,n))}function ie(e,t,n){return e.set(n),t}function Me(e){return e&&W(e.destroy)?e.destroy:O}function _(e,t){e.appendChild(t)}function N(e,t,n){e.insertBefore(t,n||null)}function S(e){e.parentNode&&e.parentNode.removeChild(e)}function $e(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function $(e){return document.createElement(e)}function T(e){return document.createTextNode(e)}function q(){return T(" ")}function qe(){return T("")}function U(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function w(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Te(e){return Array.from(e.childNodes)}function G(e,t){t=""+t,e.data!==t&&(e.data=t)}function ce(e,t){e.value=t??""}let J;function R(e){J=e}function Ae(){if(!J)throw new Error("Function called outside component initialization");return J}function je(e){Ae().$$.on_mount.push(e)}const V=[],ue=[];let F=[];const fe=[],Pe=Promise.resolve();let Z=!1;function De(){Z||(Z=!0,Pe.then(ze))}function x(e){F.push(e)}const Y=new Set;let B=0;function ze(){if(B!==0)return;const e=J;do{try{for(;B<V.length;){const t=V[B];B++,R(t),Be(t.$$)}}catch(t){throw V.length=0,B=0,t}for(R(null),V.length=0,B=0;ue.length;)ue.pop()();for(let t=0;t<F.length;t+=1){const n=F[t];Y.has(n)||(Y.add(n),n())}F.length=0}while(V.length);for(;fe.length;)fe.pop()();Z=!1,Y.clear(),R(e)}function Be(e){if(e.fragment!==null){e.update(),P(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(x)}}function Ie(e){const t=[],n=[];F.forEach(l=>e.indexOf(l)===-1?t.push(l):n.push(l)),n.forEach(l=>l()),F=t}const Q=new Set;let D;function ee(){D={r:0,c:[],p:D}}function te(){D.r||P(D.c),D=D.p}function C(e,t){e&&e.i&&(Q.delete(e),e.i(t))}function A(e,t,n,l){if(e&&e.o){if(Q.has(e))return;Q.add(e),D.c.push(()=>{Q.delete(e),l&&(n&&e.d(1),l())}),e.o(t)}else l&&l()}function Ve(e,t){e.d(1),t.delete(e.key)}function Fe(e,t,n,l,s,o,r,i,u,c,g,m){let d=e.length,y=o.length,b=d;const E={};for(;b--;)E[e[b].key]=b;const h=[],j=new Map,v=new Map,k=[];for(b=y;b--;){const p=m(s,o,b),L=n(p);let M=r.get(L);M?l&&k.push(()=>M.p(p,t)):(M=c(L,p),M.c()),j.set(L,h[b]=M),L in E&&v.set(L,Math.abs(b-E[L]))}const f=new Set,a=new Set;function z(p){C(p,1),p.m(i,g),r.set(p.key,p),g=p.first,y--}for(;d&&y;){const p=h[y-1],L=e[d-1],M=p.key,H=L.key;p===L?(g=p.first,d--,y--):j.has(H)?!r.has(M)||f.has(M)?z(p):a.has(H)?d--:v.get(M)>v.get(H)?(a.add(M),z(p)):(f.add(H),d--):(u(L,r),d--)}for(;d--;){const p=e[d];j.has(p.key)||u(p,r)}for(;y;)z(h[y-1]);return P(k),h}function Ee(e,t){const n={},l={},s={$$scope:1};let o=e.length;for(;o--;){const r=e[o],i=t[o];if(i){for(const u in r)u in i||(l[u]=1);for(const u in i)s[u]||(n[u]=i[u],s[u]=1);e[o]=i}else for(const u in r)s[u]=1}for(const r in l)r in n||(n[r]=void 0);return n}function Ce(e){return typeof e=="object"&&e!==null?e:{}}function Oe(e){e&&e.c()}function ne(e,t,n,l){const{fragment:s,after_update:o}=e.$$;s&&s.m(t,n),l||x(()=>{const r=e.$$.on_mount.map(we).filter(W);e.$$.on_destroy?e.$$.on_destroy.push(...r):P(r),e.$$.on_mount=[]}),o.forEach(x)}function oe(e,t){const n=e.$$;n.fragment!==null&&(Ie(n.after_update),P(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Re(e,t){e.$$.dirty[0]===-1&&(V.push(e),De(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function se(e,t,n,l,s,o,r,i=[-1]){const u=J;R(e);const c=e.$$={fragment:null,ctx:[],props:o,update:O,not_equal:s,bound:re(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(u?u.$$.context:[])),callbacks:re(),dirty:i,skip_bound:!1,root:t.target||u.$$.root};r&&r(c.root);let g=!1;if(c.ctx=n?n(e,t.props||{},(m,d,...y)=>{const b=y.length?y[0]:d;return c.ctx&&s(c.ctx[m],c.ctx[m]=b)&&(!c.skip_bound&&c.bound[m]&&c.bound[m](b),g&&Re(e,m)),d}):[],c.update(),g=!0,P(c.before_update),c.fragment=l?l(c.ctx):!1,t.target){if(t.hydrate){const m=Te(t.target);c.fragment&&c.fragment.l(m),m.forEach(S)}else c.fragment&&c.fragment.c();t.intro&&C(e.$$.fragment),ne(e,t.target,t.anchor,t.customElement),ze()}R(u)}class le{$destroy(){oe(this,1),this.$destroy=O}$on(t,n){if(!W(n))return O;const l=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return l.push(n),()=>{const s=l.indexOf(n);s!==-1&&l.splice(s,1)}}$set(t){this.$$set&&!Ne(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const I=[];function Se(e,t=O){let n;const l=new Set;function s(i){if(X(e,i)&&(e=i,n)){const u=!I.length;for(const c of l)c[1](),I.push(c,e);if(u){for(let c=0;c<I.length;c+=2)I[c][0](I[c+1]);I.length=0}}}function o(i){s(i(e))}function r(i,u=O){const c=[i,u];return l.add(c),l.size===1&&(n=t(s)||O),i(e),()=>{l.delete(c),l.size===0&&n&&(n(),n=null)}}return{set:s,update:o,subscribe:r}}const K=Se([]);function ae(e,t,n){const l=e.slice();return l[13]=t[n],l[15]=n,l}function de(e){let t,n,l,s,o;function r(){return e[8](e[15])}function i(){return e[9](e[15])}return{c(){t=$("button"),t.textContent="👍",n=q(),l=$("button"),l.textContent="👎",w(t,"class","small-button thumbs-up svelte-ysjhkz"),w(l,"class","small-button thumbs-down svelte-ysjhkz")},m(u,c){N(u,t,c),N(u,n,c),N(u,l,c),s||(o=[U(t,"click",r),U(l,"click",i)],s=!0)},p(u,c){e=u},d(u){u&&S(t),u&&S(n),u&&S(l),s=!1,P(o)}}}function he(e,t){let n,l,s,o,r,i,u,c=t[13].question+"",g,m,d,y,b=t[13].answer+"",E,h,j,v,k,f,a=t[0]&&de(t);return{key:e,first:null,c(){n=$("div"),l=$("div"),s=$("div"),o=q(),r=$("div"),i=$("p"),u=T("Q: "),g=T(c),m=q(),d=$("p"),y=T("A: "),E=T(b),h=q(),a&&a.c(),j=q(),w(s,"class","avatar svelte-ysjhkz"),w(i,"class","svelte-ysjhkz"),w(d,"class","svelte-ysjhkz"),w(r,"class","message-content svelte-ysjhkz"),w(l,"class","chat-message-center svelte-ysjhkz"),w(n,"class","chat-message svelte-ysjhkz"),this.first=n},m(z,p){N(z,n,p),_(n,l),_(l,s),_(l,o),_(l,r),_(r,i),_(i,u),_(i,g),_(r,m),_(r,d),_(d,y),_(d,E),_(r,h),a&&a.m(r,null),_(n,j),k||(f=Me(v=He.call(null,n,t[15]===t[1].length-1)),k=!0)},p(z,p){t=z,p&2&&c!==(c=t[13].question+"")&&G(g,c),p&2&&b!==(b=t[13].answer+"")&&G(E,b),t[0]?a?a.p(t,p):(a=de(t),a.c(),a.m(r,null)):a&&(a.d(1),a=null),v&&W(v.update)&&p&2&&v.update.call(null,t[15]===t[1].length-1)},d(z){z&&S(n),a&&a.d(),k=!1,f()}}}function Je(e){let t,n,l=[],s=new Map,o,r,i,u,c,g,m=(e[3]?e[4]:"Send")+"",d,y,b,E,h,j,v=e[1];const k=f=>f[15];for(let f=0;f<v.length;f+=1){let a=ae(e,v,f),z=k(a);s.set(z,l[f]=he(z,a))}return{c(){t=$("section"),n=$("div");for(let f=0;f<l.length;f+=1)l[f].c();o=q(),r=$("div"),i=$("form"),u=$("input"),c=q(),g=$("button"),d=T(m),b=q(),E=$("p"),E.textContent="Note - may produce inaccurate information.",w(n,"class","chat-log svelte-ysjhkz"),w(u,"class","chat-input-textarea svelte-ysjhkz"),w(u,"placeholder","Type Message Here"),w(g,"class",y="btnyousend "+(e[2]===""?"":"active")+" svelte-ysjhkz"),w(g,"type","submit"),w(i,"class","chat-input-form svelte-ysjhkz"),w(E,"class","message svelte-ysjhkz"),w(r,"class","chat-input-holder svelte-ysjhkz"),w(t,"class","chatbox svelte-ysjhkz")},m(f,a){N(f,t,a),_(t,n);for(let z=0;z<l.length;z+=1)l[z]&&l[z].m(n,null);_(t,o),_(t,r),_(r,i),_(i,u),ce(u,e[2]),_(i,c),_(i,g),_(g,d),_(r,b),_(r,E),h||(j=[U(u,"input",e[10]),U(i,"submit",e[5])],h=!0)},p(f,[a]){a&67&&(v=f[1],l=Fe(l,a,k,1,f,v,s,n,Ve,he,null,ae)),a&4&&u.value!==f[2]&&ce(u,f[2]),a&24&&m!==(m=(f[3]?f[4]:"Send")+"")&&G(d,m),a&4&&y!==(y="btnyousend "+(f[2]===""?"":"active")+" svelte-ysjhkz")&&w(g,"class",y)},i:O,o:O,d(f){f&&S(t);for(let a=0;a<l.length;a+=1)l[a].d();h=!1,P(j)}}}function He(e){setTimeout(()=>{e.scrollIntoView({behavior:"smooth"})},0)}function Ke(e,t,n){let l,s;ke(e,K,h=>n(1,s=h));let{feedback:o=!1}=t,r="",i="",u=!1;je(()=>{c()});async function c(){console.log("fetching data from db");const k=(await(await fetch("http://127.0.0.1:5000/chat/qa_table/retrieve")).json()).rows.map(f=>({id:f[0],question:f[1],answer:f[2],vote_status:f[3]}));ie(K,s=[...k],s)}const g=async h=>{h.preventDefault(),r=i,n(2,i=""),n(3,u=!0);let j={id:s.length+1,question:r,answer:"Loading...",vote_status:"na"};console.log("adding to log here"),ie(K,s=[...s,j],s);const v=await fetch(`/chat/${r}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:r})});if(v.ok){const k=await v.json();j.answer=k.answer,K.update(f=>(f[f.length-1]=j,f))}else{const k=await v.text();alert(k)}n(3,u=!1)};let m=0;setInterval(()=>{n(7,m=(m+1)%4)},200);async function d(h,j){const v=s[j];v.vote=h;const k={id:j,vote_status:h};console.log(k);const f=await fetch("http://127.0.0.1:5000/chat/qa_table/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(k)});if(f.ok)console.log("update worked!",f);else{const a=await f.text();alert(a)}}const y=h=>d("up",h),b=h=>d("down",h);function E(){i=this.value,n(2,i)}return e.$$set=h=>{"feedback"in h&&n(0,o=h.feedback)},e.$$.update=()=>{e.$$.dirty&128&&n(4,l=".".repeat(m).padEnd(3)),e.$$.dirty&2&&console.log("chat updated!",s)},[o,s,i,u,l,g,d,m,y,b,E]}class Qe extends le{constructor(t){super(),se(this,t,Ke,Je,X,{feedback:0})}}function pe(e,t,n){const l=e.slice();return l[2]=t[n],l}function _e(e){let t,n=e[2]+"",l,s;return{c(){t=$("option"),l=T(n),t.__value=s=e[2],t.value=t.__value},m(o,r){N(o,t,r),_(t,l)},p(o,r){r&1&&n!==(n=o[2]+"")&&G(l,n),r&1&&s!==(s=o[2])&&(t.__value=s,t.value=t.__value)},d(o){o&&S(t)}}}function Ue(e){let t,n=e[0],l=[];for(let s=0;s<n.length;s+=1)l[s]=_e(pe(e,n,s));return{c(){t=$("select");for(let s=0;s<l.length;s+=1)l[s].c()},m(s,o){N(s,t,o);for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(t,null)},p(s,[o]){if(o&1){n=s[0];let r;for(r=0;r<n.length;r+=1){const i=pe(s,n,r);l[r]?l[r].p(i,o):(l[r]=_e(i),l[r].c(),l[r].m(t,null))}for(;r<l.length;r+=1)l[r].d(1);l.length=n.length}},i:O,o:O,d(s){s&&S(t),$e(l,s)}}}function Ge(e,t,n){let{data_endpoint:l}=t,s=[];return je(async()=>{const o=await fetch(`/data/${l}`);n(0,s=await o.json())}),e.$$set=o=>{"data_endpoint"in o&&n(1,l=o.data_endpoint)},[s,l]}class We extends le{constructor(t){super(),se(this,t,Ge,Ue,X,{data_endpoint:1})}}function me(e,t,n){const l=e.slice();return l[2]=t[n],l}function ge(e){let t,n;const l=[e[2].props];let s={};for(let o=0;o<l.length;o+=1)s=ve(s,l[o]);return t=new Qe({props:s}),{c(){Oe(t.$$.fragment)},m(o,r){ne(t,o,r),n=!0},p(o,r){const i=r&1?Ee(l,[Ce(o[2].props)]):{};t.$set(i)},i(o){n||(C(t.$$.fragment,o),n=!0)},o(o){A(t.$$.fragment,o),n=!1},d(o){oe(t,o)}}}function be(e){let t,n;const l=[e[2].props];let s={};for(let o=0;o<l.length;o+=1)s=ve(s,l[o]);return t=new We({props:s}),{c(){Oe(t.$$.fragment)},m(o,r){ne(t,o,r),n=!0},p(o,r){const i=r&1?Ee(l,[Ce(o[2].props)]):{};t.$set(i)},i(o){n||(C(t.$$.fragment,o),n=!0)},o(o){A(t.$$.fragment,o),n=!1},d(o){oe(t,o)}}}function ye(e){let t,n,l,s=e[2].svelte_component==="Chatbot"&&ge(e),o=e[2].svelte_component==="Dropdown"&&be(e);return{c(){s&&s.c(),t=q(),o&&o.c(),n=qe()},m(r,i){s&&s.m(r,i),N(r,t,i),o&&o.m(r,i),N(r,n,i),l=!0},p(r,i){r[2].svelte_component==="Chatbot"?s?(s.p(r,i),i&1&&C(s,1)):(s=ge(r),s.c(),C(s,1),s.m(t.parentNode,t)):s&&(ee(),A(s,1,1,()=>{s=null}),te()),r[2].svelte_component==="Dropdown"?o?(o.p(r,i),i&1&&C(o,1)):(o=be(r),o.c(),C(o,1),o.m(n.parentNode,n)):o&&(ee(),A(o,1,1,()=>{o=null}),te())},i(r){l||(C(s),C(o),l=!0)},o(r){A(s),A(o),l=!1},d(r){s&&s.d(r),r&&S(t),o&&o.d(r),r&&S(n)}}}function Xe(e){let t,n,l,s=e[0],o=[];for(let i=0;i<s.length;i+=1)o[i]=ye(me(e,s,i));const r=i=>A(o[i],1,1,()=>{o[i]=null});return{c(){for(let i=0;i<o.length;i+=1)o[i].c();t=q(),n=$("p"),n.textContent="Made with Cambio.",w(n,"class","footer-logo svelte-1fi8jt8")},m(i,u){for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(i,u);N(i,t,u),N(i,n,u),l=!0},p(i,[u]){if(u&1){s=i[0];let c;for(c=0;c<s.length;c+=1){const g=me(i,s,c);o[c]?(o[c].p(g,u),C(o[c],1)):(o[c]=ye(g),o[c].c(),C(o[c],1),o[c].m(t.parentNode,t))}for(ee(),c=s.length;c<o.length;c+=1)r(c);te()}},i(i){if(!l){for(let u=0;u<s.length;u+=1)C(o[u]);l=!0}},o(i){o=o.filter(Boolean);for(let u=0;u<o.length;u+=1)A(o[u]);l=!1},d(i){$e(o,i),i&&S(t),i&&S(n)}}}function Ye(e,t,n){let l;const s=Se([]);return ke(e,s,o=>n(0,l=o)),fetch("/components").then(o=>o.json()).then(o=>{console.log("component",o),s.set(o)}),[l,s]}class Ze extends le{constructor(t){super(),se(this,t,Ye,Xe,X,{})}}new Ze({target:document.getElementById("app")});
