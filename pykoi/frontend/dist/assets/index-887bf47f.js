(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();function U(){}const Wi=e=>e;function Yn(e,t){for(const n in t)e[n]=t[n];return e}function hi(e){return e()}function Wn(){return Object.create(null)}function Ee(e){e.forEach(hi)}function on(e){return typeof e=="function"}function xe(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Qi(e){return Object.keys(e).length===0}function Ui(e,...t){if(e==null)return U;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function Be(e,t,n){e.$$.on_destroy.push(Ui(t,n))}function pi(e,t,n){return e.set(n),t}function Vi(e){return e&&on(e.destroy)?e.destroy:U}const gi=typeof window<"u";let Zi=gi?()=>window.performance.now():()=>Date.now(),mi=gi?e=>requestAnimationFrame(e):U;const nt=new Set;function _i(e){nt.forEach(t=>{t.c(e)||(nt.delete(t),t.f())}),nt.size!==0&&mi(_i)}function Ji(e){let t;return nt.size===0&&mi(_i),{promise:new Promise(n=>{nt.add(t={c:e,f:n})}),abort(){nt.delete(t)}}}function E(e,t){e.appendChild(t)}function H(e,t,n){e.insertBefore(t,n||null)}function z(e){e.parentNode&&e.parentNode.removeChild(e)}function he(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function I(e){return document.createElement(e)}function B(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function Y(e){return document.createTextNode(e)}function J(){return Y(" ")}function De(){return Y("")}function ee(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function h(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Ki(e){return Array.from(e.childNodes)}function ie(e,t){t=""+t,e.data!==t&&(e.data=t)}function Qn(e,t){e.value=t??""}function me(e,t,n,r){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,r?"important":"")}let Ct;function eo(){if(Ct===void 0){Ct=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{Ct=!0}}return Ct}function qn(e,t){getComputedStyle(e).position==="static"&&(e.style.position="relative");const r=I("iframe");r.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),r.setAttribute("aria-hidden","true"),r.tabIndex=-1;const o=eo();let l;return o?(r.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",l=ee(window,"message",a=>{a.source===r.contentWindow&&t()})):(r.src="about:blank",r.onload=()=>{l=ee(r.contentWindow,"resize",t),t()}),E(e,r),()=>{(o||l&&r.contentWindow)&&l(),z(r)}}function Un(e,t,n){e.classList[n?"add":"remove"](t)}let yt;function pt(e){yt=e}function to(){if(!yt)throw new Error("Function called outside component initialization");return yt}function vi(e){to().$$.on_mount.push(e)}const Je=[],kn=[];let rt=[];const Vn=[],no=Promise.resolve();let En=!1;function ro(){En||(En=!0,no.then(bi))}function lt(e){rt.push(e)}const un=new Set;let We=0;function bi(){if(We!==0)return;const e=yt;do{try{for(;We<Je.length;){const t=Je[We];We++,pt(t),io(t.$$)}}catch(t){throw Je.length=0,We=0,t}for(pt(null),Je.length=0,We=0;kn.length;)kn.pop()();for(let t=0;t<rt.length;t+=1){const n=rt[t];un.has(n)||(un.add(n),n())}rt.length=0}while(Je.length);for(;Vn.length;)Vn.pop()();En=!1,un.clear(),pt(e)}function io(e){if(e.fragment!==null){e.update(),Ee(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(lt)}}function oo(e){const t=[],n=[];rt.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),rt=t}const jt=new Set;let Fe;function lo(){Fe={r:0,c:[],p:Fe}}function ao(){Fe.r||Ee(Fe.c),Fe=Fe.p}function be(e,t){e&&e.i&&(jt.delete(e),e.i(t))}function Ae(e,t,n,r){if(e&&e.o){if(jt.has(e))return;jt.add(e),Fe.c.push(()=>{jt.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}function wt(e,t){e.d(1),t.delete(e.key)}function kt(e,t,n,r,o,l,a,s,u,f,p,c){let g=e.length,m=l.length,d=g;const w={};for(;d--;)w[e[d].key]=d;const v=[],M=new Map,N=new Map,S=[];for(d=m;d--;){const b=c(o,l,d),y=n(b);let A=a.get(y);A?r&&S.push(()=>A.p(b,t)):(A=f(y,b),A.c()),M.set(y,v[d]=A),y in w&&N.set(y,Math.abs(d-w[y]))}const D=new Set,_=new Set;function k(b){be(b,1),b.m(s,p),a.set(b.key,b),p=b.first,m--}for(;g&&m;){const b=v[m-1],y=e[g-1],A=b.key,T=y.key;b===y?(p=b.first,g--,m--):M.has(T)?!a.has(A)||D.has(A)?k(b):_.has(T)?g--:N.get(A)>N.get(T)?(_.add(A),k(b)):(D.add(T),g--):(u(y,a),g--)}for(;g--;){const b=e[g];M.has(b.key)||u(b,a)}for(;m;)k(v[m-1]);return Ee(S),v}function et(e){e&&e.c()}function je(e,t,n,r){const{fragment:o,after_update:l}=e.$$;o&&o.m(t,n),r||lt(()=>{const a=e.$$.on_mount.map(hi).filter(on);e.$$.on_destroy?e.$$.on_destroy.push(...a):Ee(a),e.$$.on_mount=[]}),l.forEach(lt)}function ze(e,t){const n=e.$$;n.fragment!==null&&(oo(n.after_update),Ee(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function so(e,t){e.$$.dirty[0]===-1&&(Je.push(e),ro(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Xe(e,t,n,r,o,l,a,s=[-1]){const u=yt;pt(e);const f=e.$$={fragment:null,ctx:[],props:l,update:U,not_equal:o,bound:Wn(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(u?u.$$.context:[])),callbacks:Wn(),dirty:s,skip_bound:!1,root:t.target||u.$$.root};a&&a(f.root);let p=!1;if(f.ctx=n?n(e,t.props||{},(c,g,...m)=>{const d=m.length?m[0]:g;return f.ctx&&o(f.ctx[c],f.ctx[c]=d)&&(!f.skip_bound&&f.bound[c]&&f.bound[c](d),p&&so(e,c)),g}):[],f.update(),p=!0,Ee(f.before_update),f.fragment=r?r(f.ctx):!1,t.target){if(t.hydrate){const c=Ki(t.target);f.fragment&&f.fragment.l(c),c.forEach(z)}else f.fragment&&f.fragment.c();t.intro&&be(e.$$.fragment),je(e,t.target,t.anchor,t.customElement),bi()}pt(u)}class Ge{$destroy(){ze(this,1),this.$destroy=U}$on(t,n){if(!on(n))return U;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const o=r.indexOf(n);o!==-1&&r.splice(o,1)}}$set(t){this.$$set&&!Qi(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Qe=[];function Et(e,t=U){let n;const r=new Set;function o(s){if(xe(e,s)&&(e=s,n)){const u=!Qe.length;for(const f of r)f[1](),Qe.push(f,e);if(u){for(let f=0;f<Qe.length;f+=2)Qe[f][0](Qe[f+1]);Qe.length=0}}}function l(s){o(s(e))}function a(s,u=U){const f=[s,u];return r.add(f),r.size===1&&(n=t(o)||U),s(e),()=>{r.delete(f),r.size===0&&n&&(n(),n=null)}}return{set:o,update:l,subscribe:a}}function Zn(e){return Object.prototype.toString.call(e)==="[object Date]"}function Sn(e,t){if(e===t||e!==e)return()=>e;const n=typeof e;if(n!==typeof t||Array.isArray(e)!==Array.isArray(t))throw new Error("Cannot interpolate values of different type");if(Array.isArray(e)){const r=t.map((o,l)=>Sn(e[l],o));return o=>r.map(l=>l(o))}if(n==="object"){if(!e||!t)throw new Error("Object cannot be null");if(Zn(e)&&Zn(t)){e=e.getTime(),t=t.getTime();const l=t-e;return a=>new Date(e+a*l)}const r=Object.keys(t),o={};return r.forEach(l=>{o[l]=Sn(e[l],t[l])}),l=>{const a={};return r.forEach(s=>{a[s]=o[s](l)}),a}}if(n==="number"){const r=t-e;return o=>e+o*r}throw new Error(`Cannot interpolate ${n} values`)}function uo(e,t={}){const n=Et(e);let r,o=e;function l(a,s){if(e==null)return n.set(e=a),Promise.resolve();o=a;let u=r,f=!1,{delay:p=0,duration:c=400,easing:g=Wi,interpolate:m=Sn}=Yn(Yn({},t),s);if(c===0)return u&&(u.abort(),u=null),n.set(e=o),Promise.resolve();const d=Zi()+p;let w;return r=Ji(v=>{if(v<d)return!0;f||(w=m(e,a),typeof c=="function"&&(c=c(e,a)),f=!0),u&&(u.abort(),u=null);const M=v-d;return M>c?(n.set(e=a),!1):(n.set(e=w(g(M/c))),!0)}),r.promise}return{set:l,update:(a,s)=>l(a(o,e),s),subscribe:n.subscribe}}const fn=Et([]),fo=["Who","What","How","Why","Where","Does","Can","N/A"];uo(fo.map(e=>({question:e,count:0})));/**!
 * Sortable 1.15.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Jn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function ke(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Jn(Object(n),!0).forEach(function(r){co(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jn(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function zt(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?zt=function(t){return typeof t}:zt=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zt(e)}function co(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Me(){return Me=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Me.apply(this,arguments)}function ho(e,t){if(e==null)return{};var n={},r=Object.keys(e),o,l;for(l=0;l<r.length;l++)o=r[l],!(t.indexOf(o)>=0)&&(n[o]=e[o]);return n}function po(e,t){if(e==null)return{};var n=ho(e,t),r,o;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(o=0;o<l.length;o++)r=l[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var go="1.15.0";function Se(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var Te=Se(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),$t=Se(/Edge/i),Kn=Se(/firefox/i),gt=Se(/safari/i)&&!Se(/chrome/i)&&!Se(/android/i),yi=Se(/iP(ad|od|hone)/i),wi=Se(/chrome/i)&&Se(/android/i),ki={capture:!1,passive:!1};function G(e,t,n){e.addEventListener(t,n,!Te&&ki)}function L(e,t,n){e.removeEventListener(t,n,!Te&&ki)}function Yt(e,t){if(t){if(t[0]===">"&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch{return!1}return!1}}function mo(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function ve(e,t,n,r){if(e){n=n||document;do{if(t!=null&&(t[0]===">"?e.parentNode===n&&Yt(e,t):Yt(e,t))||r&&e===n)return e;if(e===n)break}while(e=mo(e))}return null}var er=/\s+/g;function fe(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var r=(" "+e.className+" ").replace(er," ").replace(" "+t+" "," ");e.className=(r+(n?" "+t:"")).replace(er," ")}}function R(e,t,n){var r=e&&e.style;if(r){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),t===void 0?n:n[t];!(t in r)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),r[t]=n+(typeof n=="string"?"":"px")}}function it(e,t){var n="";if(typeof e=="string")n=e;else do{var r=R(e,"transform");r&&r!=="none"&&(n=r+" "+n)}while(!t&&(e=e.parentNode));var o=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return o&&new o(n)}function Ei(e,t,n){if(e){var r=e.getElementsByTagName(t),o=0,l=r.length;if(n)for(;o<l;o++)n(r[o],o);return r}return[]}function ye(){var e=document.scrollingElement;return e||document.documentElement}function te(e,t,n,r,o){if(!(!e.getBoundingClientRect&&e!==window)){var l,a,s,u,f,p,c;if(e!==window&&e.parentNode&&e!==ye()?(l=e.getBoundingClientRect(),a=l.top,s=l.left,u=l.bottom,f=l.right,p=l.height,c=l.width):(a=0,s=0,u=window.innerHeight,f=window.innerWidth,p=window.innerHeight,c=window.innerWidth),(t||n)&&e!==window&&(o=o||e.parentNode,!Te))do if(o&&o.getBoundingClientRect&&(R(o,"transform")!=="none"||n&&R(o,"position")!=="static")){var g=o.getBoundingClientRect();a-=g.top+parseInt(R(o,"border-top-width")),s-=g.left+parseInt(R(o,"border-left-width")),u=a+l.height,f=s+l.width;break}while(o=o.parentNode);if(r&&e!==window){var m=it(o||e),d=m&&m.a,w=m&&m.d;m&&(a/=w,s/=d,c/=d,p/=w,u=a+p,f=s+c)}return{top:a,left:s,bottom:u,right:f,width:c,height:p}}}function tr(e,t,n){for(var r=Ce(e,!0),o=te(e)[t];r;){var l=te(r)[n],a=void 0;if(n==="top"||n==="left"?a=o>=l:a=o<=l,!a)return r;if(r===ye())break;r=Ce(r,!1)}return!1}function at(e,t,n,r){for(var o=0,l=0,a=e.children;l<a.length;){if(a[l].style.display!=="none"&&a[l]!==q.ghost&&(r||a[l]!==q.dragged)&&ve(a[l],n.draggable,e,!1)){if(o===t)return a[l];o++}l++}return null}function Rn(e,t){for(var n=e.lastElementChild;n&&(n===q.ghost||R(n,"display")==="none"||t&&!Yt(n,t));)n=n.previousElementSibling;return n||null}function pe(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==q.clone&&(!t||Yt(e,t))&&n++;return n}function nr(e){var t=0,n=0,r=ye();if(e)do{var o=it(e),l=o.a,a=o.d;t+=e.scrollLeft*l,n+=e.scrollTop*a}while(e!==r&&(e=e.parentNode));return[t,n]}function _o(e,t){for(var n in e)if(e.hasOwnProperty(n)){for(var r in t)if(t.hasOwnProperty(r)&&t[r]===e[n][r])return Number(n)}return-1}function Ce(e,t){if(!e||!e.getBoundingClientRect)return ye();var n=e,r=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var o=R(n);if(n.clientWidth<n.scrollWidth&&(o.overflowX=="auto"||o.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(o.overflowY=="auto"||o.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return ye();if(r||t)return n;r=!0}}while(n=n.parentNode);return ye()}function vo(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function cn(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}var mt;function Si(e,t){return function(){if(!mt){var n=arguments,r=this;n.length===1?e.call(r,n[0]):e.apply(r,n),mt=setTimeout(function(){mt=void 0},t)}}}function bo(){clearTimeout(mt),mt=void 0}function Di(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function Mi(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}var de="Sortable"+new Date().getTime();function yo(){var e=[],t;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(o){if(!(R(o,"display")==="none"||o===q.ghost)){e.push({target:o,rect:te(o)});var l=ke({},e[e.length-1].rect);if(o.thisAnimationDuration){var a=it(o,!0);a&&(l.top-=a.f,l.left-=a.e)}o.fromRect=l}})}},addAnimationState:function(r){e.push(r)},removeAnimationState:function(r){e.splice(_o(e,{target:r}),1)},animateAll:function(r){var o=this;if(!this.options.animation){clearTimeout(t),typeof r=="function"&&r();return}var l=!1,a=0;e.forEach(function(s){var u=0,f=s.target,p=f.fromRect,c=te(f),g=f.prevFromRect,m=f.prevToRect,d=s.rect,w=it(f,!0);w&&(c.top-=w.f,c.left-=w.e),f.toRect=c,f.thisAnimationDuration&&cn(g,c)&&!cn(p,c)&&(d.top-c.top)/(d.left-c.left)===(p.top-c.top)/(p.left-c.left)&&(u=ko(d,g,m,o.options)),cn(c,p)||(f.prevFromRect=p,f.prevToRect=c,u||(u=o.options.animation),o.animate(f,d,c,u)),u&&(l=!0,a=Math.max(a,u),clearTimeout(f.animationResetTimer),f.animationResetTimer=setTimeout(function(){f.animationTime=0,f.prevFromRect=null,f.fromRect=null,f.prevToRect=null,f.thisAnimationDuration=null},u),f.thisAnimationDuration=u)}),clearTimeout(t),l?t=setTimeout(function(){typeof r=="function"&&r()},a):typeof r=="function"&&r(),e=[]},animate:function(r,o,l,a){if(a){R(r,"transition",""),R(r,"transform","");var s=it(this.el),u=s&&s.a,f=s&&s.d,p=(o.left-l.left)/(u||1),c=(o.top-l.top)/(f||1);r.animatingX=!!p,r.animatingY=!!c,R(r,"transform","translate3d("+p+"px,"+c+"px,0)"),this.forRepaintDummy=wo(r),R(r,"transition","transform "+a+"ms"+(this.options.easing?" "+this.options.easing:"")),R(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){R(r,"transition",""),R(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},a)}}}}function wo(e){return e.offsetWidth}function ko(e,t,n,r){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*r.animation}var Ue=[],dn={initializeByDefault:!0},Nt={mount:function(t){for(var n in dn)dn.hasOwnProperty(n)&&!(n in t)&&(t[n]=dn[n]);Ue.forEach(function(r){if(r.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),Ue.push(t)},pluginEvent:function(t,n,r){var o=this;this.eventCanceled=!1,r.cancel=function(){o.eventCanceled=!0};var l=t+"Global";Ue.forEach(function(a){n[a.pluginName]&&(n[a.pluginName][l]&&n[a.pluginName][l](ke({sortable:n},r)),n.options[a.pluginName]&&n[a.pluginName][t]&&n[a.pluginName][t](ke({sortable:n},r)))})},initializePlugins:function(t,n,r,o){Ue.forEach(function(s){var u=s.pluginName;if(!(!t.options[u]&&!s.initializeByDefault)){var f=new s(t,n,t.options);f.sortable=t,f.options=t.options,t[u]=f,Me(r,f.defaults)}});for(var l in t.options)if(t.options.hasOwnProperty(l)){var a=this.modifyOption(t,l,t.options[l]);typeof a<"u"&&(t.options[l]=a)}},getEventProperties:function(t,n){var r={};return Ue.forEach(function(o){typeof o.eventProperties=="function"&&Me(r,o.eventProperties.call(n[o.pluginName],t))}),r},modifyOption:function(t,n,r){var o;return Ue.forEach(function(l){t[l.pluginName]&&l.optionListeners&&typeof l.optionListeners[n]=="function"&&(o=l.optionListeners[n].call(t[l.pluginName],r))}),o}};function Eo(e){var t=e.sortable,n=e.rootEl,r=e.name,o=e.targetEl,l=e.cloneEl,a=e.toEl,s=e.fromEl,u=e.oldIndex,f=e.newIndex,p=e.oldDraggableIndex,c=e.newDraggableIndex,g=e.originalEvent,m=e.putSortable,d=e.extraEventProperties;if(t=t||n&&n[de],!!t){var w,v=t.options,M="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!Te&&!$t?w=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(w=document.createEvent("Event"),w.initEvent(r,!0,!0)),w.to=a||n,w.from=s||n,w.item=o||n,w.clone=l,w.oldIndex=u,w.newIndex=f,w.oldDraggableIndex=p,w.newDraggableIndex=c,w.originalEvent=g,w.pullMode=m?m.lastPutMode:void 0;var N=ke(ke({},d),Nt.getEventProperties(r,t));for(var S in N)w[S]=N[S];n&&n.dispatchEvent(w),v[M]&&v[M].call(t,w)}}var So=["evt"],se=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=r.evt,l=po(r,So);Nt.pluginEvent.bind(q)(t,n,ke({dragEl:C,parentEl:Z,ghostEl:j,rootEl:W,nextEl:qe,lastDownEl:Ht,cloneEl:Q,cloneHidden:Ne,dragStarted:ct,putSortable:re,activeSortable:q.active,originalEvent:o,oldIndex:tt,oldDraggableIndex:_t,newIndex:ce,newDraggableIndex:$e,hideGhostForTarget:Ai,unhideGhostForTarget:Ci,cloneNowHidden:function(){Ne=!0},cloneNowShown:function(){Ne=!1},dispatchSortableEvent:function(s){ae({sortable:n,name:s,originalEvent:o})}},l))};function ae(e){Eo(ke({putSortable:re,cloneEl:Q,targetEl:C,rootEl:W,oldIndex:tt,oldDraggableIndex:_t,newIndex:ce,newDraggableIndex:$e},e))}var C,Z,j,W,qe,Ht,Q,Ne,tt,ce,_t,$e,Ot,re,Ke=!1,Wt=!1,Qt=[],Pe,ge,hn,pn,rr,ir,ct,Ve,vt,bt=!1,xt=!1,Lt,le,gn=[],Dn=!1,Ut=[],ln=typeof document<"u",Pt=yi,or=$t||Te?"cssFloat":"float",Do=ln&&!wi&&!yi&&"draggable"in document.createElement("div"),Ti=function(){if(ln){if(Te)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),$i=function(t,n){var r=R(t),o=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),l=at(t,0,n),a=at(t,1,n),s=l&&R(l),u=a&&R(a),f=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+te(l).width,p=u&&parseInt(u.marginLeft)+parseInt(u.marginRight)+te(a).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(l&&s.float&&s.float!=="none"){var c=s.float==="left"?"left":"right";return a&&(u.clear==="both"||u.clear===c)?"vertical":"horizontal"}return l&&(s.display==="block"||s.display==="flex"||s.display==="table"||s.display==="grid"||f>=o&&r[or]==="none"||a&&r[or]==="none"&&f+p>o)?"vertical":"horizontal"},Mo=function(t,n,r){var o=r?t.left:t.top,l=r?t.right:t.bottom,a=r?t.width:t.height,s=r?n.left:n.top,u=r?n.right:n.bottom,f=r?n.width:n.height;return o===s||l===u||o+a/2===s+f/2},To=function(t,n){var r;return Qt.some(function(o){var l=o[de].options.emptyInsertThreshold;if(!(!l||Rn(o))){var a=te(o),s=t>=a.left-l&&t<=a.right+l,u=n>=a.top-l&&n<=a.bottom+l;if(s&&u)return r=o}}),r},Ni=function(t){function n(l,a){return function(s,u,f,p){var c=s.options.group.name&&u.options.group.name&&s.options.group.name===u.options.group.name;if(l==null&&(a||c))return!0;if(l==null||l===!1)return!1;if(a&&l==="clone")return l;if(typeof l=="function")return n(l(s,u,f,p),a)(s,u,f,p);var g=(a?s:u).options.group.name;return l===!0||typeof l=="string"&&l===g||l.join&&l.indexOf(g)>-1}}var r={},o=t.group;(!o||zt(o)!="object")&&(o={name:o}),r.name=o.name,r.checkPull=n(o.pull,!0),r.checkPut=n(o.put),r.revertClone=o.revertClone,t.group=r},Ai=function(){!Ti&&j&&R(j,"display","none")},Ci=function(){!Ti&&j&&R(j,"display","")};ln&&!wi&&document.addEventListener("click",function(e){if(Wt)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),Wt=!1,!1},!0);var Ie=function(t){if(C){t=t.touches?t.touches[0]:t;var n=To(t.clientX,t.clientY);if(n){var r={};for(var o in t)t.hasOwnProperty(o)&&(r[o]=t[o]);r.target=r.rootEl=n,r.preventDefault=void 0,r.stopPropagation=void 0,n[de]._onDragOver(r)}}},$o=function(t){C&&C.parentNode[de]._isOutsideThisEl(t.target)};function q(e,t){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=Me({},t),e[de]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return $i(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(a,s){a.setData("Text",s.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:q.supportPointer!==!1&&"PointerEvent"in window&&!gt,emptyInsertThreshold:5};Nt.initializePlugins(this,e,n);for(var r in n)!(r in t)&&(t[r]=n[r]);Ni(t);for(var o in this)o.charAt(0)==="_"&&typeof this[o]=="function"&&(this[o]=this[o].bind(this));this.nativeDraggable=t.forceFallback?!1:Do,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?G(e,"pointerdown",this._onTapStart):(G(e,"mousedown",this._onTapStart),G(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(G(e,"dragover",this),G(e,"dragenter",this)),Qt.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),Me(this,yo())}q.prototype={constructor:q,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(Ve=null)},_getDirection:function(t,n){return typeof this.options.direction=="function"?this.options.direction.call(this,t,n,C):this.options.direction},_onTapStart:function(t){if(t.cancelable){var n=this,r=this.el,o=this.options,l=o.preventOnFilter,a=t.type,s=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,u=(s||t).target,f=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||u,p=o.filter;if(qo(r),!C&&!(/mousedown|pointerdown/.test(a)&&t.button!==0||o.disabled)&&!f.isContentEditable&&!(!this.nativeDraggable&&gt&&u&&u.tagName.toUpperCase()==="SELECT")&&(u=ve(u,o.draggable,r,!1),!(u&&u.animated)&&Ht!==u)){if(tt=pe(u),_t=pe(u,o.draggable),typeof p=="function"){if(p.call(this,t,u,this)){ae({sortable:n,rootEl:f,name:"filter",targetEl:u,toEl:r,fromEl:r}),se("filter",n,{evt:t}),l&&t.cancelable&&t.preventDefault();return}}else if(p&&(p=p.split(",").some(function(c){if(c=ve(f,c.trim(),r,!1),c)return ae({sortable:n,rootEl:c,name:"filter",targetEl:u,fromEl:r,toEl:r}),se("filter",n,{evt:t}),!0}),p)){l&&t.cancelable&&t.preventDefault();return}o.handle&&!ve(f,o.handle,r,!1)||this._prepareDragStart(t,s,u)}}},_prepareDragStart:function(t,n,r){var o=this,l=o.el,a=o.options,s=l.ownerDocument,u;if(r&&!C&&r.parentNode===l){var f=te(r);if(W=l,C=r,Z=C.parentNode,qe=C.nextSibling,Ht=r,Ot=a.group,q.dragged=C,Pe={target:C,clientX:(n||t).clientX,clientY:(n||t).clientY},rr=Pe.clientX-f.left,ir=Pe.clientY-f.top,this._lastX=(n||t).clientX,this._lastY=(n||t).clientY,C.style["will-change"]="all",u=function(){if(se("delayEnded",o,{evt:t}),q.eventCanceled){o._onDrop();return}o._disableDelayedDragEvents(),!Kn&&o.nativeDraggable&&(C.draggable=!0),o._triggerDragStart(t,n),ae({sortable:o,name:"choose",originalEvent:t}),fe(C,a.chosenClass,!0)},a.ignore.split(",").forEach(function(p){Ei(C,p.trim(),mn)}),G(s,"dragover",Ie),G(s,"mousemove",Ie),G(s,"touchmove",Ie),G(s,"mouseup",o._onDrop),G(s,"touchend",o._onDrop),G(s,"touchcancel",o._onDrop),Kn&&this.nativeDraggable&&(this.options.touchStartThreshold=4,C.draggable=!0),se("delayStart",this,{evt:t}),a.delay&&(!a.delayOnTouchOnly||n)&&(!this.nativeDraggable||!($t||Te))){if(q.eventCanceled){this._onDrop();return}G(s,"mouseup",o._disableDelayedDrag),G(s,"touchend",o._disableDelayedDrag),G(s,"touchcancel",o._disableDelayedDrag),G(s,"mousemove",o._delayedDragTouchMoveHandler),G(s,"touchmove",o._delayedDragTouchMoveHandler),a.supportPointer&&G(s,"pointermove",o._delayedDragTouchMoveHandler),o._dragStartTimer=setTimeout(u,a.delay)}else u()}},_delayedDragTouchMoveHandler:function(t){var n=t.touches?t.touches[0]:t;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){C&&mn(C),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;L(t,"mouseup",this._disableDelayedDrag),L(t,"touchend",this._disableDelayedDrag),L(t,"touchcancel",this._disableDelayedDrag),L(t,"mousemove",this._delayedDragTouchMoveHandler),L(t,"touchmove",this._delayedDragTouchMoveHandler),L(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,n){n=n||t.pointerType=="touch"&&t,!this.nativeDraggable||n?this.options.supportPointer?G(document,"pointermove",this._onTouchMove):n?G(document,"touchmove",this._onTouchMove):G(document,"mousemove",this._onTouchMove):(G(C,"dragend",this),G(W,"dragstart",this._onDragStart));try{document.selection?Bt(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,n){if(Ke=!1,W&&C){se("dragStarted",this,{evt:n}),this.nativeDraggable&&G(document,"dragover",$o);var r=this.options;!t&&fe(C,r.dragClass,!1),fe(C,r.ghostClass,!0),q.active=this,t&&this._appendGhost(),ae({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(ge){this._lastX=ge.clientX,this._lastY=ge.clientY,Ai();for(var t=document.elementFromPoint(ge.clientX,ge.clientY),n=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(ge.clientX,ge.clientY),t!==n);)n=t;if(C.parentNode[de]._isOutsideThisEl(t),n)do{if(n[de]){var r=void 0;if(r=n[de]._onDragOver({clientX:ge.clientX,clientY:ge.clientY,target:t,rootEl:n}),r&&!this.options.dragoverBubble)break}t=n}while(n=n.parentNode);Ci()}},_onTouchMove:function(t){if(Pe){var n=this.options,r=n.fallbackTolerance,o=n.fallbackOffset,l=t.touches?t.touches[0]:t,a=j&&it(j,!0),s=j&&a&&a.a,u=j&&a&&a.d,f=Pt&&le&&nr(le),p=(l.clientX-Pe.clientX+o.x)/(s||1)+(f?f[0]-gn[0]:0)/(s||1),c=(l.clientY-Pe.clientY+o.y)/(u||1)+(f?f[1]-gn[1]:0)/(u||1);if(!q.active&&!Ke){if(r&&Math.max(Math.abs(l.clientX-this._lastX),Math.abs(l.clientY-this._lastY))<r)return;this._onDragStart(t,!0)}if(j){a?(a.e+=p-(hn||0),a.f+=c-(pn||0)):a={a:1,b:0,c:0,d:1,e:p,f:c};var g="matrix(".concat(a.a,",").concat(a.b,",").concat(a.c,",").concat(a.d,",").concat(a.e,",").concat(a.f,")");R(j,"webkitTransform",g),R(j,"mozTransform",g),R(j,"msTransform",g),R(j,"transform",g),hn=p,pn=c,ge=l}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!j){var t=this.options.fallbackOnBody?document.body:W,n=te(C,!0,Pt,!0,t),r=this.options;if(Pt){for(le=t;R(le,"position")==="static"&&R(le,"transform")==="none"&&le!==document;)le=le.parentNode;le!==document.body&&le!==document.documentElement?(le===document&&(le=ye()),n.top+=le.scrollTop,n.left+=le.scrollLeft):le=ye(),gn=nr(le)}j=C.cloneNode(!0),fe(j,r.ghostClass,!1),fe(j,r.fallbackClass,!0),fe(j,r.dragClass,!0),R(j,"transition",""),R(j,"transform",""),R(j,"box-sizing","border-box"),R(j,"margin",0),R(j,"top",n.top),R(j,"left",n.left),R(j,"width",n.width),R(j,"height",n.height),R(j,"opacity","0.8"),R(j,"position",Pt?"absolute":"fixed"),R(j,"zIndex","100000"),R(j,"pointerEvents","none"),q.ghost=j,t.appendChild(j),R(j,"transform-origin",rr/parseInt(j.style.width)*100+"% "+ir/parseInt(j.style.height)*100+"%")}},_onDragStart:function(t,n){var r=this,o=t.dataTransfer,l=r.options;if(se("dragStart",this,{evt:t}),q.eventCanceled){this._onDrop();return}se("setupClone",this),q.eventCanceled||(Q=Mi(C),Q.removeAttribute("id"),Q.draggable=!1,Q.style["will-change"]="",this._hideClone(),fe(Q,this.options.chosenClass,!1),q.clone=Q),r.cloneId=Bt(function(){se("clone",r),!q.eventCanceled&&(r.options.removeCloneOnHide||W.insertBefore(Q,C),r._hideClone(),ae({sortable:r,name:"clone"}))}),!n&&fe(C,l.dragClass,!0),n?(Wt=!0,r._loopId=setInterval(r._emulateDragOver,50)):(L(document,"mouseup",r._onDrop),L(document,"touchend",r._onDrop),L(document,"touchcancel",r._onDrop),o&&(o.effectAllowed="move",l.setData&&l.setData.call(r,o,C)),G(document,"drop",r),R(C,"transform","translateZ(0)")),Ke=!0,r._dragStartId=Bt(r._dragStarted.bind(r,n,t)),G(document,"selectstart",r),ct=!0,gt&&R(document.body,"user-select","none")},_onDragOver:function(t){var n=this.el,r=t.target,o,l,a,s=this.options,u=s.group,f=q.active,p=Ot===u,c=s.sort,g=re||f,m,d=this,w=!1;if(Dn)return;function v(F,x){se(F,d,ke({evt:t,isOwner:p,axis:m?"vertical":"horizontal",revert:a,dragRect:o,targetRect:l,canSort:c,fromSortable:g,target:r,completed:N,onMove:function(Gn,Yi){return It(W,n,C,o,Gn,te(Gn),t,Yi)},changed:S},x))}function M(){v("dragOverAnimationCapture"),d.captureAnimationState(),d!==g&&g.captureAnimationState()}function N(F){return v("dragOverCompleted",{insertion:F}),F&&(p?f._hideClone():f._showClone(d),d!==g&&(fe(C,re?re.options.ghostClass:f.options.ghostClass,!1),fe(C,s.ghostClass,!0)),re!==d&&d!==q.active?re=d:d===q.active&&re&&(re=null),g===d&&(d._ignoreWhileAnimating=r),d.animateAll(function(){v("dragOverAnimationComplete"),d._ignoreWhileAnimating=null}),d!==g&&(g.animateAll(),g._ignoreWhileAnimating=null)),(r===C&&!C.animated||r===n&&!r.animated)&&(Ve=null),!s.dragoverBubble&&!t.rootEl&&r!==document&&(C.parentNode[de]._isOutsideThisEl(t.target),!F&&Ie(t)),!s.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),w=!0}function S(){ce=pe(C),$e=pe(C,s.draggable),ae({sortable:d,name:"change",toEl:n,newIndex:ce,newDraggableIndex:$e,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),r=ve(r,s.draggable,n,!0),v("dragOver"),q.eventCanceled)return w;if(C.contains(t.target)||r.animated&&r.animatingX&&r.animatingY||d._ignoreWhileAnimating===r)return N(!1);if(Wt=!1,f&&!s.disabled&&(p?c||(a=Z!==W):re===this||(this.lastPutMode=Ot.checkPull(this,f,C,t))&&u.checkPut(this,f,C,t))){if(m=this._getDirection(t,r)==="vertical",o=te(C),v("dragOverValid"),q.eventCanceled)return w;if(a)return Z=W,M(),this._hideClone(),v("revert"),q.eventCanceled||(qe?W.insertBefore(C,qe):W.appendChild(C)),N(!0);var D=Rn(n,s.draggable);if(!D||Oo(t,m,this)&&!D.animated){if(D===C)return N(!1);if(D&&n===t.target&&(r=D),r&&(l=te(r)),It(W,n,C,o,r,l,t,!!r)!==!1)return M(),D&&D.nextSibling?n.insertBefore(C,D.nextSibling):n.appendChild(C),Z=n,S(),N(!0)}else if(D&&Co(t,m,this)){var _=at(n,0,s,!0);if(_===C)return N(!1);if(r=_,l=te(r),It(W,n,C,o,r,l,t,!1)!==!1)return M(),n.insertBefore(C,_),Z=n,S(),N(!0)}else if(r.parentNode===n){l=te(r);var k=0,b,y=C.parentNode!==n,A=!Mo(C.animated&&C.toRect||o,r.animated&&r.toRect||l,m),T=m?"top":"left",$=tr(r,"top","top")||tr(C,"top","top"),P=$?$.scrollTop:void 0;Ve!==r&&(b=l[T],bt=!1,xt=!A&&s.invertSwap||y),k=xo(t,r,l,m,A?1:s.swapThreshold,s.invertedSwapThreshold==null?s.swapThreshold:s.invertedSwapThreshold,xt,Ve===r);var X;if(k!==0){var V=pe(C);do V-=k,X=Z.children[V];while(X&&(R(X,"display")==="none"||X===j))}if(k===0||X===r)return N(!1);Ve=r,vt=k;var ne=r.nextElementSibling,oe=!1;oe=k===1;var O=It(W,n,C,o,r,l,t,oe);if(O!==!1)return(O===1||O===-1)&&(oe=O===1),Dn=!0,setTimeout(Ao,30),M(),oe&&!ne?n.appendChild(C):r.parentNode.insertBefore(C,oe?ne:r),$&&Di($,0,P-$.scrollTop),Z=C.parentNode,b!==void 0&&!xt&&(Lt=Math.abs(b-te(r)[T])),S(),N(!0)}if(n.contains(C))return N(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){L(document,"mousemove",this._onTouchMove),L(document,"touchmove",this._onTouchMove),L(document,"pointermove",this._onTouchMove),L(document,"dragover",Ie),L(document,"mousemove",Ie),L(document,"touchmove",Ie)},_offUpEvents:function(){var t=this.el.ownerDocument;L(t,"mouseup",this._onDrop),L(t,"touchend",this._onDrop),L(t,"pointerup",this._onDrop),L(t,"touchcancel",this._onDrop),L(document,"selectstart",this)},_onDrop:function(t){var n=this.el,r=this.options;if(ce=pe(C),$e=pe(C,r.draggable),se("drop",this,{evt:t}),Z=C&&C.parentNode,ce=pe(C),$e=pe(C,r.draggable),q.eventCanceled){this._nulling();return}Ke=!1,xt=!1,bt=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Mn(this.cloneId),Mn(this._dragStartId),this.nativeDraggable&&(L(document,"drop",this),L(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),gt&&R(document.body,"user-select",""),R(C,"transform",""),t&&(ct&&(t.cancelable&&t.preventDefault(),!r.dropBubble&&t.stopPropagation()),j&&j.parentNode&&j.parentNode.removeChild(j),(W===Z||re&&re.lastPutMode!=="clone")&&Q&&Q.parentNode&&Q.parentNode.removeChild(Q),C&&(this.nativeDraggable&&L(C,"dragend",this),mn(C),C.style["will-change"]="",ct&&!Ke&&fe(C,re?re.options.ghostClass:this.options.ghostClass,!1),fe(C,this.options.chosenClass,!1),ae({sortable:this,name:"unchoose",toEl:Z,newIndex:null,newDraggableIndex:null,originalEvent:t}),W!==Z?(ce>=0&&(ae({rootEl:Z,name:"add",toEl:Z,fromEl:W,originalEvent:t}),ae({sortable:this,name:"remove",toEl:Z,originalEvent:t}),ae({rootEl:Z,name:"sort",toEl:Z,fromEl:W,originalEvent:t}),ae({sortable:this,name:"sort",toEl:Z,originalEvent:t})),re&&re.save()):ce!==tt&&ce>=0&&(ae({sortable:this,name:"update",toEl:Z,originalEvent:t}),ae({sortable:this,name:"sort",toEl:Z,originalEvent:t})),q.active&&((ce==null||ce===-1)&&(ce=tt,$e=_t),ae({sortable:this,name:"end",toEl:Z,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){se("nulling",this),W=C=Z=j=qe=Q=Ht=Ne=Pe=ge=ct=ce=$e=tt=_t=Ve=vt=re=Ot=q.dragged=q.ghost=q.clone=q.active=null,Ut.forEach(function(t){t.checked=!0}),Ut.length=hn=pn=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":C&&(this._onDragOver(t),No(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],n,r=this.el.children,o=0,l=r.length,a=this.options;o<l;o++)n=r[o],ve(n,a.draggable,this.el,!1)&&t.push(n.getAttribute(a.dataIdAttr)||Io(n));return t},sort:function(t,n){var r={},o=this.el;this.toArray().forEach(function(l,a){var s=o.children[a];ve(s,this.options.draggable,o,!1)&&(r[l]=s)},this),n&&this.captureAnimationState(),t.forEach(function(l){r[l]&&(o.removeChild(r[l]),o.appendChild(r[l]))}),n&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,n){return ve(t,n||this.options.draggable,this.el,!1)},option:function(t,n){var r=this.options;if(n===void 0)return r[t];var o=Nt.modifyOption(this,t,n);typeof o<"u"?r[t]=o:r[t]=n,t==="group"&&Ni(r)},destroy:function(){se("destroy",this);var t=this.el;t[de]=null,L(t,"mousedown",this._onTapStart),L(t,"touchstart",this._onTapStart),L(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(L(t,"dragover",this),L(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Qt.splice(Qt.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!Ne){if(se("hideClone",this),q.eventCanceled)return;R(Q,"display","none"),this.options.removeCloneOnHide&&Q.parentNode&&Q.parentNode.removeChild(Q),Ne=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(Ne){if(se("showClone",this),q.eventCanceled)return;C.parentNode==W&&!this.options.group.revertClone?W.insertBefore(Q,C):qe?W.insertBefore(Q,qe):W.appendChild(Q),this.options.group.revertClone&&this.animate(C,Q),R(Q,"display",""),Ne=!1}}};function No(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function It(e,t,n,r,o,l,a,s){var u,f=e[de],p=f.options.onMove,c;return window.CustomEvent&&!Te&&!$t?u=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(u=document.createEvent("Event"),u.initEvent("move",!0,!0)),u.to=t,u.from=e,u.dragged=n,u.draggedRect=r,u.related=o||t,u.relatedRect=l||te(t),u.willInsertAfter=s,u.originalEvent=a,e.dispatchEvent(u),p&&(c=p.call(f,u,a)),c}function mn(e){e.draggable=!1}function Ao(){Dn=!1}function Co(e,t,n){var r=te(at(n.el,0,n.options,!0)),o=10;return t?e.clientX<r.left-o||e.clientY<r.top&&e.clientX<r.right:e.clientY<r.top-o||e.clientY<r.bottom&&e.clientX<r.left}function Oo(e,t,n){var r=te(Rn(n.el,n.options.draggable)),o=10;return t?e.clientX>r.right+o||e.clientX<=r.right&&e.clientY>r.bottom&&e.clientX>=r.left:e.clientX>r.right&&e.clientY>r.top||e.clientX<=r.right&&e.clientY>r.bottom+o}function xo(e,t,n,r,o,l,a,s){var u=r?e.clientY:e.clientX,f=r?n.height:n.width,p=r?n.top:n.left,c=r?n.bottom:n.right,g=!1;if(!a){if(s&&Lt<f*o){if(!bt&&(vt===1?u>p+f*l/2:u<c-f*l/2)&&(bt=!0),bt)g=!0;else if(vt===1?u<p+Lt:u>c-Lt)return-vt}else if(u>p+f*(1-o)/2&&u<c-f*(1-o)/2)return Po(t)}return g=g||a,g&&(u<p+f*l/2||u>c-f*l/2)?u>p+f/2?1:-1:0}function Po(e){return pe(C)<pe(e)?1:-1}function Io(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,r=0;n--;)r+=t.charCodeAt(n);return r.toString(36)}function qo(e){Ut.length=0;for(var t=e.getElementsByTagName("input"),n=t.length;n--;){var r=t[n];r.checked&&Ut.push(r)}}function Bt(e){return setTimeout(e,0)}function Mn(e){return clearTimeout(e)}ln&&G(document,"touchmove",function(e){(q.active||Ke)&&e.cancelable&&e.preventDefault()});q.utils={on:G,off:L,css:R,find:Ei,is:function(t,n){return!!ve(t,n,t,!1)},extend:vo,throttle:Si,closest:ve,toggleClass:fe,clone:Mi,index:pe,nextTick:Bt,cancelNextTick:Mn,detectDirection:$i,getChild:at};q.get=function(e){return e[de]};q.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(q.utils=ke(ke({},q.utils),r.utils)),Nt.mount(r)})};q.create=function(e,t){return new q(e,t)};q.version=go;var K=[],dt,Tn,$n=!1,_n,vn,Vt,ht;function Ro(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return e.prototype={dragStarted:function(n){var r=n.originalEvent;this.sortable.nativeDraggable?G(document,"dragover",this._handleAutoScroll):this.options.supportPointer?G(document,"pointermove",this._handleFallbackAutoScroll):r.touches?G(document,"touchmove",this._handleFallbackAutoScroll):G(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var r=n.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?L(document,"dragover",this._handleAutoScroll):(L(document,"pointermove",this._handleFallbackAutoScroll),L(document,"touchmove",this._handleFallbackAutoScroll),L(document,"mousemove",this._handleFallbackAutoScroll)),lr(),Xt(),bo()},nulling:function(){Vt=Tn=dt=$n=ht=_n=vn=null,K.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,r){var o=this,l=(n.touches?n.touches[0]:n).clientX,a=(n.touches?n.touches[0]:n).clientY,s=document.elementFromPoint(l,a);if(Vt=n,r||this.options.forceAutoScrollFallback||$t||Te||gt){bn(n,this.options,s,r);var u=Ce(s,!0);$n&&(!ht||l!==_n||a!==vn)&&(ht&&lr(),ht=setInterval(function(){var f=Ce(document.elementFromPoint(l,a),!0);f!==u&&(u=f,Xt()),bn(n,o.options,f,r)},10),_n=l,vn=a)}else{if(!this.options.bubbleScroll||Ce(s,!0)===ye()){Xt();return}bn(n,this.options,Ce(s,!1),!1)}}},Me(e,{pluginName:"scroll",initializeByDefault:!0})}function Xt(){K.forEach(function(e){clearInterval(e.pid)}),K=[]}function lr(){clearInterval(ht)}var bn=Si(function(e,t,n,r){if(t.scroll){var o=(e.touches?e.touches[0]:e).clientX,l=(e.touches?e.touches[0]:e).clientY,a=t.scrollSensitivity,s=t.scrollSpeed,u=ye(),f=!1,p;Tn!==n&&(Tn=n,Xt(),dt=t.scroll,p=t.scrollFn,dt===!0&&(dt=Ce(n,!0)));var c=0,g=dt;do{var m=g,d=te(m),w=d.top,v=d.bottom,M=d.left,N=d.right,S=d.width,D=d.height,_=void 0,k=void 0,b=m.scrollWidth,y=m.scrollHeight,A=R(m),T=m.scrollLeft,$=m.scrollTop;m===u?(_=S<b&&(A.overflowX==="auto"||A.overflowX==="scroll"||A.overflowX==="visible"),k=D<y&&(A.overflowY==="auto"||A.overflowY==="scroll"||A.overflowY==="visible")):(_=S<b&&(A.overflowX==="auto"||A.overflowX==="scroll"),k=D<y&&(A.overflowY==="auto"||A.overflowY==="scroll"));var P=_&&(Math.abs(N-o)<=a&&T+S<b)-(Math.abs(M-o)<=a&&!!T),X=k&&(Math.abs(v-l)<=a&&$+D<y)-(Math.abs(w-l)<=a&&!!$);if(!K[c])for(var V=0;V<=c;V++)K[V]||(K[V]={});(K[c].vx!=P||K[c].vy!=X||K[c].el!==m)&&(K[c].el=m,K[c].vx=P,K[c].vy=X,clearInterval(K[c].pid),(P!=0||X!=0)&&(f=!0,K[c].pid=setInterval((function(){r&&this.layer===0&&q.active._onTouchMove(Vt);var ne=K[this.layer].vy?K[this.layer].vy*s:0,oe=K[this.layer].vx?K[this.layer].vx*s:0;typeof p=="function"&&p.call(q.dragged.parentNode[de],oe,ne,e,Vt,K[this.layer].el)!=="continue"||Di(K[this.layer].el,oe,ne)}).bind({layer:c}),24))),c++}while(t.bubbleScroll&&g!==u&&(g=Ce(g,!1)));$n=f}},30),Oi=function(t){var n=t.originalEvent,r=t.putSortable,o=t.dragEl,l=t.activeSortable,a=t.dispatchSortableEvent,s=t.hideGhostForTarget,u=t.unhideGhostForTarget;if(n){var f=r||l;s();var p=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,c=document.elementFromPoint(p.clientX,p.clientY);u(),f&&!f.el.contains(c)&&(a("spill"),this.onSpill({dragEl:o,putSortable:r}))}};function Fn(){}Fn.prototype={startIndex:null,dragStart:function(t){var n=t.oldDraggableIndex;this.startIndex=n},onSpill:function(t){var n=t.dragEl,r=t.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var o=at(this.sortable.el,this.startIndex,this.options);o?this.sortable.el.insertBefore(n,o):this.sortable.el.appendChild(n),this.sortable.animateAll(),r&&r.animateAll()},drop:Oi};Me(Fn,{pluginName:"revertOnSpill"});function jn(){}jn.prototype={onSpill:function(t){var n=t.dragEl,r=t.putSortable,o=r||this.sortable;o.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),o.animateAll()},drop:Oi};Me(jn,{pluginName:"removeOnSpill"});q.mount(new Ro);q.mount(jn,Fn);function Gt(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Fo(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function xi(e){let t,n,r;e.length!==2?(t=Gt,n=(s,u)=>Gt(e(s),u),r=(s,u)=>e(s)-u):(t=e===Gt||e===Fo?e:jo,n=e,r=e);function o(s,u,f=0,p=s.length){if(f<p){if(t(u,u)!==0)return p;do{const c=f+p>>>1;n(s[c],u)<0?f=c+1:p=c}while(f<p)}return f}function l(s,u,f=0,p=s.length){if(f<p){if(t(u,u)!==0)return p;do{const c=f+p>>>1;n(s[c],u)<=0?f=c+1:p=c}while(f<p)}return f}function a(s,u,f=0,p=s.length){const c=o(s,u,f,p-1);return c>f&&r(s[c-1],u)>-r(s[c],u)?c-1:c}return{left:o,center:a,right:l}}function jo(){return 0}function zo(e){return e===null?NaN:+e}const Ho=xi(Gt),Lo=Ho.right;xi(zo).center;const Bo=Lo;function Xo(e,t){let n=0,r,o=0,l=0;if(t===void 0)for(let a of e)a!=null&&(a=+a)>=a&&(r=a-o,o+=r/++n,l+=r*(a-o));else{let a=-1;for(let s of e)(s=t(s,++a,e))!=null&&(s=+s)>=s&&(r=s-o,o+=r/++n,l+=r*(s-o))}if(n>1)return l/(n-1)}function Go(e,t){const n=Xo(e,t);return n&&Math.sqrt(n)}class ar extends Map{constructor(t,n=Qo){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,o]of t)this.set(r,o)}get(t){return super.get(sr(this,t))}has(t){return super.has(sr(this,t))}set(t,n){return super.set(Yo(this,t),n)}delete(t){return super.delete(Wo(this,t))}}function sr({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function Yo({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function Wo({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function Qo(e){return e!==null&&typeof e=="object"?e.valueOf():e}const Uo=Math.sqrt(50),Vo=Math.sqrt(10),Zo=Math.sqrt(2);function Zt(e,t,n){const r=(t-e)/Math.max(0,n),o=Math.floor(Math.log10(r)),l=r/Math.pow(10,o),a=l>=Uo?10:l>=Vo?5:l>=Zo?2:1;let s,u,f;return o<0?(f=Math.pow(10,-o)/a,s=Math.round(e*f),u=Math.round(t*f),s/f<e&&++s,u/f>t&&--u,f=-f):(f=Math.pow(10,o)*a,s=Math.round(e/f),u=Math.round(t/f),s*f<e&&++s,u*f>t&&--u),u<s&&.5<=n&&n<2?Zt(e,t,n*2):[s,u,f]}function Jo(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[o,l,a]=r?Zt(t,e,n):Zt(e,t,n);if(!(l>=o))return[];const s=l-o+1,u=new Array(s);if(r)if(a<0)for(let f=0;f<s;++f)u[f]=(l-f)/-a;else for(let f=0;f<s;++f)u[f]=(l-f)*a;else if(a<0)for(let f=0;f<s;++f)u[f]=(o+f)/-a;else for(let f=0;f<s;++f)u[f]=(o+f)*a;return u}function Nn(e,t,n){return t=+t,e=+e,n=+n,Zt(e,t,n)[2]}function Ko(e,t,n){t=+t,e=+e,n=+n;const r=t<e,o=r?Nn(t,e,n):Nn(e,t,n);return(r?-1:1)*(o<0?1/-o:o)}function Pi(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let o of e)(o=t(o,++r,e))!=null&&(n<o||n===void 0&&o>=o)&&(n=o)}return n}function el(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let o of e)(o=t(o,++r,e))!=null&&(n>o||n===void 0&&o>=o)&&(n=o)}return n}function tl(e,t){let n=0,r=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(++n,r+=o);else{let o=-1;for(let l of e)(l=t(l,++o,e))!=null&&(l=+l)>=l&&(++n,r+=l)}if(n)return r/n}function nl(e,t,n){e=+e,t=+t,n=(o=arguments.length)<2?(t=e,e=0,1):o<3?1:+n;for(var r=-1,o=Math.max(0,Math.ceil((t-e)/n))|0,l=new Array(o);++r<o;)l[r]=e+r*n;return l}function rl(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Jt(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function st(e){return e=Jt(Math.abs(e)),e?e[1]:NaN}function il(e,t){return function(n,r){for(var o=n.length,l=[],a=0,s=e[0],u=0;o>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),l.push(n.substring(o-=s,o+s)),!((u+=s+1)>r));)s=e[a=(a+1)%e.length];return l.reverse().join(t)}}function ol(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var ll=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Kt(e){if(!(t=ll.exec(e)))throw new Error("invalid format: "+e);var t;return new zn({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Kt.prototype=zn.prototype;function zn(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}zn.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function al(e){e:for(var t=e.length,n=1,r=-1,o;n<t;++n)switch(e[n]){case".":r=o=n;break;case"0":r===0&&(r=n),o=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(o+1):e}var Ii;function sl(e,t){var n=Jt(e,t);if(!n)return e+"";var r=n[0],o=n[1],l=o-(Ii=Math.max(-8,Math.min(8,Math.floor(o/3)))*3)+1,a=r.length;return l===a?r:l>a?r+new Array(l-a+1).join("0"):l>0?r.slice(0,l)+"."+r.slice(l):"0."+new Array(1-l).join("0")+Jt(e,Math.max(0,t+l-1))[0]}function ur(e,t){var n=Jt(e,t);if(!n)return e+"";var r=n[0],o=n[1];return o<0?"0."+new Array(-o).join("0")+r:r.length>o+1?r.slice(0,o+1)+"."+r.slice(o+1):r+new Array(o-r.length+2).join("0")}const fr={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:rl,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>ur(e*100,t),r:ur,s:sl,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function cr(e){return e}var dr=Array.prototype.map,hr=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function ul(e){var t=e.grouping===void 0||e.thousands===void 0?cr:il(dr.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",o=e.decimal===void 0?".":e.decimal+"",l=e.numerals===void 0?cr:ol(dr.call(e.numerals,String)),a=e.percent===void 0?"%":e.percent+"",s=e.minus===void 0?"−":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function f(c){c=Kt(c);var g=c.fill,m=c.align,d=c.sign,w=c.symbol,v=c.zero,M=c.width,N=c.comma,S=c.precision,D=c.trim,_=c.type;_==="n"?(N=!0,_="g"):fr[_]||(S===void 0&&(S=12),D=!0,_="g"),(v||g==="0"&&m==="=")&&(v=!0,g="0",m="=");var k=w==="$"?n:w==="#"&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",b=w==="$"?r:/[%p]/.test(_)?a:"",y=fr[_],A=/[defgprs%]/.test(_);S=S===void 0?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,S)):Math.max(0,Math.min(20,S));function T($){var P=k,X=b,V,ne,oe;if(_==="c")X=y($)+X,$="";else{$=+$;var O=$<0||1/$<0;if($=isNaN($)?u:y(Math.abs($),S),D&&($=al($)),O&&+$==0&&d!=="+"&&(O=!1),P=(O?d==="("?d:s:d==="-"||d==="("?"":d)+P,X=(_==="s"?hr[8+Ii/3]:"")+X+(O&&d==="("?")":""),A){for(V=-1,ne=$.length;++V<ne;)if(oe=$.charCodeAt(V),48>oe||oe>57){X=(oe===46?o+$.slice(V+1):$.slice(V))+X,$=$.slice(0,V);break}}}N&&!v&&($=t($,1/0));var F=P.length+$.length+X.length,x=F<M?new Array(M-F+1).join(g):"";switch(N&&v&&($=t(x+$,x.length?M-X.length:1/0),x=""),m){case"<":$=P+$+X+x;break;case"=":$=P+x+$+X;break;case"^":$=x.slice(0,F=x.length>>1)+P+$+X+x.slice(F);break;default:$=x+P+$+X;break}return l($)}return T.toString=function(){return c+""},T}function p(c,g){var m=f((c=Kt(c),c.type="f",c)),d=Math.max(-8,Math.min(8,Math.floor(st(g)/3)))*3,w=Math.pow(10,-d),v=hr[8+d/3];return function(M){return m(w*M)+v}}return{format:f,formatPrefix:p}}var qt,an,qi;fl({thousands:",",grouping:[3],currency:["$",""]});function fl(e){return qt=ul(e),an=qt.format,qi=qt.formatPrefix,qt}function cl(e){return Math.max(0,-st(Math.abs(e)))}function dl(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(st(t)/3)))*3-st(Math.abs(e)))}function hl(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,st(t)-st(e))+1}function Hn(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function pl(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const pr=Symbol("implicit");function ft(){var e=new ar,t=[],n=[],r=pr;function o(l){let a=e.get(l);if(a===void 0){if(r!==pr)return r;e.set(l,a=t.push(l)-1)}return n[a%n.length]}return o.domain=function(l){if(!arguments.length)return t.slice();t=[],e=new ar;for(const a of l)e.has(a)||e.set(a,t.push(a)-1);return o},o.range=function(l){return arguments.length?(n=Array.from(l),o):n.slice()},o.unknown=function(l){return arguments.length?(r=l,o):r},o.copy=function(){return ft(t,n).unknown(r)},Hn.apply(o,arguments),o}function St(){var e=ft().unknown(void 0),t=e.domain,n=e.range,r=0,o=1,l,a,s=!1,u=0,f=0,p=.5;delete e.unknown;function c(){var g=t().length,m=o<r,d=m?o:r,w=m?r:o;l=(w-d)/Math.max(1,g-u+f*2),s&&(l=Math.floor(l)),d+=(w-d-l*(g-u))*p,a=l*(1-u),s&&(d=Math.round(d),a=Math.round(a));var v=nl(g).map(function(M){return d+l*M});return n(m?v.reverse():v)}return e.domain=function(g){return arguments.length?(t(g),c()):t()},e.range=function(g){return arguments.length?([r,o]=g,r=+r,o=+o,c()):[r,o]},e.rangeRound=function(g){return[r,o]=g,r=+r,o=+o,s=!0,c()},e.bandwidth=function(){return a},e.step=function(){return l},e.round=function(g){return arguments.length?(s=!!g,c()):s},e.padding=function(g){return arguments.length?(u=Math.min(1,f=+g),c()):u},e.paddingInner=function(g){return arguments.length?(u=Math.min(1,g),c()):u},e.paddingOuter=function(g){return arguments.length?(f=+g,c()):f},e.align=function(g){return arguments.length?(p=Math.max(0,Math.min(1,g)),c()):p},e.copy=function(){return St(t(),[r,o]).round(s).paddingInner(u).paddingOuter(f).align(p)},Hn.apply(c(),arguments)}function Ri(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return Ri(t())},e}function gr(){return Ri(St.apply(null,arguments).paddingInner(1))}function Ln(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Fi(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function At(){}var Dt=.7,en=1/Dt,ot="\\s*([+-]?\\d+)\\s*",Mt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",we="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",gl=/^#([0-9a-f]{3,8})$/,ml=new RegExp(`^rgb\\(${ot},${ot},${ot}\\)$`),_l=new RegExp(`^rgb\\(${we},${we},${we}\\)$`),vl=new RegExp(`^rgba\\(${ot},${ot},${ot},${Mt}\\)$`),bl=new RegExp(`^rgba\\(${we},${we},${we},${Mt}\\)$`),yl=new RegExp(`^hsl\\(${Mt},${we},${we}\\)$`),wl=new RegExp(`^hsla\\(${Mt},${we},${we},${Mt}\\)$`),mr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ln(At,Tt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:_r,formatHex:_r,formatHex8:kl,formatHsl:El,formatRgb:vr,toString:vr});function _r(){return this.rgb().formatHex()}function kl(){return this.rgb().formatHex8()}function El(){return ji(this).formatHsl()}function vr(){return this.rgb().formatRgb()}function Tt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=gl.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?br(t):n===3?new ue(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Rt(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Rt(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=ml.exec(e))?new ue(t[1],t[2],t[3],1):(t=_l.exec(e))?new ue(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=vl.exec(e))?Rt(t[1],t[2],t[3],t[4]):(t=bl.exec(e))?Rt(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=yl.exec(e))?kr(t[1],t[2]/100,t[3]/100,1):(t=wl.exec(e))?kr(t[1],t[2]/100,t[3]/100,t[4]):mr.hasOwnProperty(e)?br(mr[e]):e==="transparent"?new ue(NaN,NaN,NaN,0):null}function br(e){return new ue(e>>16&255,e>>8&255,e&255,1)}function Rt(e,t,n,r){return r<=0&&(e=t=n=NaN),new ue(e,t,n,r)}function Sl(e){return e instanceof At||(e=Tt(e)),e?(e=e.rgb(),new ue(e.r,e.g,e.b,e.opacity)):new ue}function An(e,t,n,r){return arguments.length===1?Sl(e):new ue(e,t,n,r??1)}function ue(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Ln(ue,An,Fi(At,{brighter(e){return e=e==null?en:Math.pow(en,e),new ue(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Dt:Math.pow(Dt,e),new ue(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ue(Le(this.r),Le(this.g),Le(this.b),tn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:yr,formatHex:yr,formatHex8:Dl,formatRgb:wr,toString:wr}));function yr(){return`#${He(this.r)}${He(this.g)}${He(this.b)}`}function Dl(){return`#${He(this.r)}${He(this.g)}${He(this.b)}${He((isNaN(this.opacity)?1:this.opacity)*255)}`}function wr(){const e=tn(this.opacity);return`${e===1?"rgb(":"rgba("}${Le(this.r)}, ${Le(this.g)}, ${Le(this.b)}${e===1?")":`, ${e})`}`}function tn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Le(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function He(e){return e=Le(e),(e<16?"0":"")+e.toString(16)}function kr(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new _e(e,t,n,r)}function ji(e){if(e instanceof _e)return new _e(e.h,e.s,e.l,e.opacity);if(e instanceof At||(e=Tt(e)),!e)return new _e;if(e instanceof _e)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),l=Math.max(t,n,r),a=NaN,s=l-o,u=(l+o)/2;return s?(t===l?a=(n-r)/s+(n<r)*6:n===l?a=(r-t)/s+2:a=(t-n)/s+4,s/=u<.5?l+o:2-l-o,a*=60):s=u>0&&u<1?0:a,new _e(a,s,u,e.opacity)}function Ml(e,t,n,r){return arguments.length===1?ji(e):new _e(e,t,n,r??1)}function _e(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Ln(_e,Ml,Fi(At,{brighter(e){return e=e==null?en:Math.pow(en,e),new _e(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Dt:Math.pow(Dt,e),new _e(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,o=2*n-r;return new ue(yn(e>=240?e-240:e+120,o,r),yn(e,o,r),yn(e<120?e+240:e-120,o,r),this.opacity)},clamp(){return new _e(Er(this.h),Ft(this.s),Ft(this.l),tn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=tn(this.opacity);return`${e===1?"hsl(":"hsla("}${Er(this.h)}, ${Ft(this.s)*100}%, ${Ft(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Er(e){return e=(e||0)%360,e<0?e+360:e}function Ft(e){return Math.max(0,Math.min(1,e||0))}function yn(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Bn=e=>()=>e;function Tl(e,t){return function(n){return e+n*t}}function $l(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Nl(e){return(e=+e)==1?zi:function(t,n){return n-t?$l(t,n,e):Bn(isNaN(t)?n:t)}}function zi(e,t){var n=t-e;return n?Tl(e,n):Bn(isNaN(e)?t:e)}const Cn=function e(t){var n=Nl(t);function r(o,l){var a=n((o=An(o)).r,(l=An(l)).r),s=n(o.g,l.g),u=n(o.b,l.b),f=zi(o.opacity,l.opacity);return function(p){return o.r=a(p),o.g=s(p),o.b=u(p),o.opacity=f(p),o+""}}return r.gamma=e,r}(1);function Al(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),o;return function(l){for(o=0;o<n;++o)r[o]=e[o]*(1-l)+t[o]*l;return r}}function Cl(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Ol(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,o=new Array(r),l=new Array(n),a;for(a=0;a<r;++a)o[a]=sn(e[a],t[a]);for(;a<n;++a)l[a]=t[a];return function(s){for(a=0;a<r;++a)l[a]=o[a](s);return l}}function xl(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function nn(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Pl(e,t){var n={},r={},o;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(o in t)o in e?n[o]=sn(e[o],t[o]):r[o]=t[o];return function(l){for(o in n)r[o]=n[o](l);return r}}var On=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,wn=new RegExp(On.source,"g");function Il(e){return function(){return e}}function ql(e){return function(t){return e(t)+""}}function Rl(e,t){var n=On.lastIndex=wn.lastIndex=0,r,o,l,a=-1,s=[],u=[];for(e=e+"",t=t+"";(r=On.exec(e))&&(o=wn.exec(t));)(l=o.index)>n&&(l=t.slice(n,l),s[a]?s[a]+=l:s[++a]=l),(r=r[0])===(o=o[0])?s[a]?s[a]+=o:s[++a]=o:(s[++a]=null,u.push({i:a,x:nn(r,o)})),n=wn.lastIndex;return n<t.length&&(l=t.slice(n),s[a]?s[a]+=l:s[++a]=l),s.length<2?u[0]?ql(u[0].x):Il(t):(t=u.length,function(f){for(var p=0,c;p<t;++p)s[(c=u[p]).i]=c.x(f);return s.join("")})}function sn(e,t){var n=typeof t,r;return t==null||n==="boolean"?Bn(t):(n==="number"?nn:n==="string"?(r=Tt(t))?(t=r,Cn):Rl:t instanceof Tt?Cn:t instanceof Date?xl:Cl(t)?Al:Array.isArray(t)?Ol:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Pl:nn)(e,t)}function Hi(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function Fl(e){return function(){return e}}function jl(e){return+e}var Sr=[0,1];function Oe(e){return e}function xn(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Fl(isNaN(t)?NaN:.5)}function zl(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Hl(e,t,n){var r=e[0],o=e[1],l=t[0],a=t[1];return o<r?(r=xn(o,r),l=n(a,l)):(r=xn(r,o),l=n(l,a)),function(s){return l(r(s))}}function Ll(e,t,n){var r=Math.min(e.length,t.length)-1,o=new Array(r),l=new Array(r),a=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<r;)o[a]=xn(e[a],e[a+1]),l[a]=n(t[a],t[a+1]);return function(s){var u=Bo(e,s,1,r)-1;return l[u](o[u](s))}}function Bl(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Xl(){var e=Sr,t=Sr,n=sn,r,o,l,a=Oe,s,u,f;function p(){var g=Math.min(e.length,t.length);return a!==Oe&&(a=zl(e[0],e[g-1])),s=g>2?Ll:Hl,u=f=null,c}function c(g){return g==null||isNaN(g=+g)?l:(u||(u=s(e.map(r),t,n)))(r(a(g)))}return c.invert=function(g){return a(o((f||(f=s(t,e.map(r),nn)))(g)))},c.domain=function(g){return arguments.length?(e=Array.from(g,jl),p()):e.slice()},c.range=function(g){return arguments.length?(t=Array.from(g),p()):t.slice()},c.rangeRound=function(g){return t=Array.from(g),n=Hi,p()},c.clamp=function(g){return arguments.length?(a=g?!0:Oe,p()):a!==Oe},c.interpolate=function(g){return arguments.length?(n=g,p()):n},c.unknown=function(g){return arguments.length?(l=g,c):l},function(g,m){return r=g,o=m,p()}}function Gl(){return Xl()(Oe,Oe)}function Yl(e,t,n,r){var o=Ko(e,t,n),l;switch(r=Kt(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(l=dl(o,a))&&(r.precision=l),qi(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(l=hl(o,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=l-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(l=cl(o))&&(r.precision=l-(r.type==="%")*2);break}}return an(r)}function Li(e){var t=e.domain;return e.ticks=function(n){var r=t();return Jo(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var o=t();return Yl(o[0],o[o.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),o=0,l=r.length-1,a=r[o],s=r[l],u,f,p=10;for(s<a&&(f=a,a=s,s=f,f=o,o=l,l=f);p-- >0;){if(f=Nn(a,s,n),f===u)return r[o]=a,r[l]=s,t(r);if(f>0)a=Math.floor(a/f)*f,s=Math.ceil(s/f)*f;else if(f<0)a=Math.ceil(a*f)/f,s=Math.floor(s*f)/f;else break;u=f}return e},e}function Xn(){var e=Gl();return e.copy=function(){return Bl(e,Xn())},Hn.apply(e,arguments),Li(e)}function Wl(){var e=0,t=1,n,r,o,l,a=Oe,s=!1,u;function f(c){return c==null||isNaN(c=+c)?u:a(o===0?.5:(c=(l(c)-n)*o,s?Math.max(0,Math.min(1,c)):c))}f.domain=function(c){return arguments.length?([e,t]=c,n=l(e=+e),r=l(t=+t),o=n===r?0:1/(r-n),f):[e,t]},f.clamp=function(c){return arguments.length?(s=!!c,f):s},f.interpolator=function(c){return arguments.length?(a=c,f):a};function p(c){return function(g){var m,d;return arguments.length?([m,d]=g,a=c(m,d),f):[a(0),a(1)]}}return f.range=p(sn),f.rangeRound=p(Hi),f.unknown=function(c){return arguments.length?(u=c,f):u},function(c){return l=c,n=c(e),r=c(t),o=n===r?0:1/(r-n),f}}function Ql(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Bi(){var e=Li(Wl()(Oe));return e.copy=function(){return Ql(e,Bi())},pl.apply(e,arguments)}function Ze(e){return function(){return e}}const Pn=Math.PI,In=2*Pn,Re=1e-6,Ul=In-Re;function Xi(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Vl(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Xi;const n=10**t;return function(r){this._+=r[0];for(let o=1,l=r.length;o<l;++o)this._+=Math.round(arguments[o]*n)/n+r[o]}}class Zl{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Xi:Vl(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,o){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+o}`}bezierCurveTo(t,n,r,o,l,a){this._append`C${+t},${+n},${+r},${+o},${this._x1=+l},${this._y1=+a}`}arcTo(t,n,r,o,l){if(t=+t,n=+n,r=+r,o=+o,l=+l,l<0)throw new Error(`negative radius: ${l}`);let a=this._x1,s=this._y1,u=r-t,f=o-n,p=a-t,c=s-n,g=p*p+c*c;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(g>Re)if(!(Math.abs(c*u-f*p)>Re)||!l)this._append`L${this._x1=t},${this._y1=n}`;else{let m=r-a,d=o-s,w=u*u+f*f,v=m*m+d*d,M=Math.sqrt(w),N=Math.sqrt(g),S=l*Math.tan((Pn-Math.acos((w+g-v)/(2*M*N)))/2),D=S/N,_=S/M;Math.abs(D-1)>Re&&this._append`L${t+D*p},${n+D*c}`,this._append`A${l},${l},0,0,${+(c*m>p*d)},${this._x1=t+_*u},${this._y1=n+_*f}`}}arc(t,n,r,o,l,a){if(t=+t,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(o),u=r*Math.sin(o),f=t+s,p=n+u,c=1^a,g=a?o-l:l-o;this._x1===null?this._append`M${f},${p}`:(Math.abs(this._x1-f)>Re||Math.abs(this._y1-p)>Re)&&this._append`L${f},${p}`,r&&(g<0&&(g=g%In+In),g>Ul?this._append`A${r},${r},0,1,${c},${t-s},${n-u}A${r},${r},0,1,${c},${this._x1=f},${this._y1=p}`:g>Re&&this._append`A${r},${r},0,${+(g>=Pn)},${c},${this._x1=t+r*Math.cos(l)},${this._y1=n+r*Math.sin(l)}`)}rect(t,n,r,o){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+o}h${-r}Z`}toString(){return this._}}function Jl(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new Zl(t)}function Kl(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Gi(e){this._context=e}Gi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function ea(e){return new Gi(e)}function ta(e){return e[0]}function na(e){return e[1]}function ra(e,t){var n=Ze(!0),r=null,o=ea,l=null,a=Jl(s);e=typeof e=="function"?e:e===void 0?ta:Ze(e),t=typeof t=="function"?t:t===void 0?na:Ze(t);function s(u){var f,p=(u=Kl(u)).length,c,g=!1,m;for(r==null&&(l=o(m=a())),f=0;f<=p;++f)!(f<p&&n(c=u[f],f,u))===g&&((g=!g)?l.lineStart():l.lineEnd()),g&&l.point(+e(c,f,u),+t(c,f,u));if(m)return l=null,m+""||null}return s.x=function(u){return arguments.length?(e=typeof u=="function"?u:Ze(+u),s):e},s.y=function(u){return arguments.length?(t=typeof u=="function"?u:Ze(+u),s):t},s.defined=function(u){return arguments.length?(n=typeof u=="function"?u:Ze(!!u),s):n},s.curve=function(u){return arguments.length?(o=u,r!=null&&(l=o(r)),s):o},s.context=function(u){return arguments.length?(u==null?r=l=null:l=o(r=u),s):r},s}function Dr(e,t,n){const r=e.slice();return r[18]=t[n],r[20]=n,r}function Mr(e,t,n){const r=e.slice();return r[21]=t[n],r[23]=n,r}function Tr(e,t,n){const r=e.slice();return r[24]=t[n],r[23]=n,r}function $r(e){let t,n=e[23]+1+"",r;return{c(){t=I("option"),r=Y(n),t.__value=e[23]+1,t.value=t.__value,h(t,"class","svelte-f2ps7u")},m(o,l){H(o,t,l),E(t,r)},p:U,d(o){o&&z(t)}}}function Nr(e,t){let n,r,o=t[1][t[23]]+"",l,a,s,u,f=t[18][t[1][t[23]]]+"",p,c,g,m,d,w,v,M,N,S=Array(t[0]).fill(),D=[];for(let k=0;k<S.length;k+=1)D[k]=$r(Tr(t,S,k));function _(...k){return t[12](t[18],t[23],...k)}return{key:e,first:null,c(){n=I("div"),r=I("h5"),l=Y(o),a=Y(":"),s=J(),u=I("p"),p=Y(f),c=J(),g=I("div"),m=Y(`Rank:
                        `),d=I("select");for(let k=0;k<D.length;k+=1)D[k].c();w=J(),h(r,"class","bold underline svelte-f2ps7u"),h(u,"class","svelte-f2ps7u"),h(n,"class","answer svelte-f2ps7u"),h(n,"id",v=`answer-${t[23]}-${t[20]}`),this.first=n},m(k,b){H(k,n,b),E(n,r),E(r,l),E(r,a),E(n,s),E(n,u),E(u,p),E(n,c),E(n,g),E(g,m),E(g,d);for(let y=0;y<D.length;y+=1)D[y]&&D[y].m(d,null);E(n,w),M||(N=ee(d,"change",_),M=!0)},p(k,b){if(t=k,b&3&&o!==(o=t[1][t[23]]+"")&&ie(l,o),b&11&&f!==(f=t[18][t[1][t[23]]]+"")&&ie(p,f),b&1){S=Array(t[0]).fill();let y;for(y=0;y<S.length;y+=1){const A=Tr(t,S,y);D[y]?D[y].p(A,b):(D[y]=$r(A),D[y].c(),D[y].m(d,null))}for(;y<D.length;y+=1)D[y].d(1);D.length=S.length}b&9&&v!==(v=`answer-${t[23]}-${t[20]}`)&&h(n,"id",v)},d(k){k&&z(n),he(D,k),M=!1,N()}}}function Ar(e,t){let n,r,o,l,a,s,u,f,p=t[18].qid+"",c,g,m,d=t[18].question+"",w,v,M,N=[],S=new Map,D,_,k,b,y=Array(t[0]).fill();const A=T=>T[23];for(let T=0;T<y.length;T+=1){let $=Mr(t,y,T),P=A($);S.set(P,N[T]=Nr(P,$))}return{key:e,first:null,c(){n=I("div"),r=I("div"),o=I("div"),l=J(),a=I("div"),s=I("div"),u=I("h5"),f=Y("Question: "),c=Y(p),g=J(),m=I("p"),w=Y(d),v=J(),M=I("div");for(let T=0;T<N.length;T+=1)N[T].c();D=J(),h(o,"class","avatar"),h(u,"class","bold svelte-f2ps7u"),h(m,"class","svelte-f2ps7u"),h(s,"class","question svelte-f2ps7u"),h(M,"class","answers"),me(M,"display","grid"),me(M,"grid-template-columns",t[7]),me(M,"gap",".25%"),me(M,"width","100%"),me(M,"margin","auto"),h(a,"class","message-content svelte-f2ps7u"),h(r,"class","chat-message-center svelte-f2ps7u"),h(n,"class","chat-message svelte-f2ps7u"),this.first=n},m(T,$){H(T,n,$),E(n,r),E(r,o),E(r,l),E(r,a),E(a,s),E(s,u),E(u,f),E(u,c),E(s,g),E(s,m),E(m,w),E(a,v),E(a,M);for(let P=0;P<N.length;P+=1)N[P]&&N[P].m(M,null);t[13](M),E(n,D),k||(b=Vi(_=la.call(null,n,t[20]===t[3].length-1)),k=!0)},p(T,$){t=T,$&8&&p!==(p=t[18].qid+"")&&ie(c,p),$&8&&d!==(d=t[18].question+"")&&ie(w,d),$&523&&(y=Array(t[0]).fill(),N=kt(N,$,A,1,t,y,S,M,wt,Nr,null,Mr)),$&128&&me(M,"grid-template-columns",t[7]),_&&on(_.update)&&$&8&&_.update.call(null,t[20]===t[3].length-1)},d(T){T&&z(n);for(let $=0;$<N.length;$+=1)N[$].d();t[13](null),k=!1,b()}}}function ia(e){let t,n,r,o,l,a,s=[],u=new Map,f,p,c,g,m,d,w=(e[5]?e[6]:"Send")+"",v,M,N,S,D=e[3];const _=k=>k[20];for(let k=0;k<D.length;k+=1){let b=Dr(e,D,k),y=_(b);u.set(y,s[k]=Ar(y,b))}return{c(){t=I("div"),n=I("div"),n.innerHTML=`<h5 class="underline bold svelte-f2ps7u">Q &amp; A Comparison Instructions</h5> 
    <br/> 
    <p class="svelte-f2ps7u">Ask a question and rank the answers across the models. Drag each answer to
      rank it, in ascending order, from left-to-right. Optionally, select the
      rank for each via the corresponding dropdown.</p> 
    <br/> 
    <button class="svelte-f2ps7u">Download Data</button>`,r=J(),o=I("div"),l=I("section"),a=I("div");for(let k=0;k<s.length;k+=1)s[k].c();f=J(),p=I("div"),c=I("form"),g=I("input"),m=J(),d=I("button"),v=Y(w),h(n,"class","instructions svelte-f2ps7u"),h(a,"class","chat-log svelte-f2ps7u"),h(l,"class","chatbox svelte-f2ps7u"),h(g,"class","chat-input-textarea svelte-f2ps7u"),h(g,"placeholder","Type Message Here"),h(d,"class",M="btnyousend "+(e[4]===""?"":"active")+" svelte-f2ps7u"),h(d,"type","submit"),h(c,"class","chat-input-form svelte-f2ps7u"),h(p,"class","chat-input-holder svelte-f2ps7u"),h(o,"class","ranked-chat svelte-f2ps7u"),h(t,"class","ranked-feedback-container svelte-f2ps7u")},m(k,b){H(k,t,b),E(t,n),E(t,r),E(t,o),E(o,l),E(l,a);for(let y=0;y<s.length;y+=1)s[y]&&s[y].m(a,null);E(o,f),E(o,p),E(p,c),E(c,g),Qn(g,e[4]),E(c,m),E(c,d),E(d,v),N||(S=[ee(g,"input",e[14]),ee(c,"submit",e[8])],N=!0)},p(k,[b]){b&655&&(D=k[3],s=kt(s,b,_,1,k,D,u,a,wt,Ar,null,Dr)),b&16&&g.value!==k[4]&&Qn(g,k[4]),b&96&&w!==(w=(k[5]?k[6]:"Send")+"")&&ie(v,w),b&16&&M!==(M="btnyousend "+(k[4]===""?"":"active")+" svelte-f2ps7u")&&h(d,"class",M)},i:U,o:U,d(k){k&&z(t);for(let b=0;b<s.length;b+=1)s[b].d();N=!1,Ee(S)}}}async function oa(){const t=await(await fetch("/chat/comparator/db/retrieve")).json();console.log("uploooo",t)}function la(e){setTimeout(()=>{e.scrollIntoView({behavior:"smooth"})},0)}async function aa(e){console.log("run update",e);const t=await fetch("/chat/comparator/db/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(t.ok)console.log("ok",t);else{const n=await t.text();alert(n)}}function sa(e,t,n){let r,o,l;Be(e,fn,_=>n(3,l=_));let{numModels:a=1}=t,{models:s=[0]}=t,u="",f="",p=!1,c=[];vi(async()=>{if(await new Promise(_=>setTimeout(_,200)),d){const _=new q(d,{animation:150,onUpdate(k){c=_.toArray()}});c=_.toArray()}oa()});const g=async _=>{_.preventDefault(),u=f,n(4,f=""),n(5,p=!0);let k={question:u};for(let y of s)k[y]="Loading...";pi(fn,l=[...l,k],l);const b=await fetch(`/chat/comparator/${u}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:u})});if(b.ok){const y=await b.json();console.log("HERE IS RESPONSE",y),n(1,s=Object.keys(y.answer)),n(0,a=s.length);for(let A of s)k[A]=y.answer[A];k.qid=y.qid,fn.update(A=>(A[A.length-1]=k,A))}else{const y=await b.text();alert(y)}n(5,p=!1)};let m=0;setInterval(()=>{n(10,m=(m+1)%4)},200);let d,w;function v(_,k,b){const y=k;console.log("using qid",y);const A=parseInt(_.target.value),T=s[b],$={qid:y,rank:parseInt(A),model:T};console.log("updated fine",$),M($)}function M(_={}){console.log("called");let k=[];if(Object.keys(_).length!==0){console.log("option change");let y=l.filter($=>$.qid===_.qid);console.log("curr",y),console.log("curr",_.model);let A=y[0][_.model];console.log("currAnswer",A);const T={model:_.model,qid:parseInt(_.qid),rank:parseInt(_.rank),answer:A};console.log("entry",T),k.push(T)}else{console.log("drag change");let y=c[0].split("-")[2],A=[];for(let[T,$]of c.entries()){const P=parseInt($.split("-")[1]),X=s[P],V={rank:T,model:X};A.push(V)}for(let T of A){const $={model:T.model,qid:parseInt(y),rank:parseInt(T.rank)+1,answer:l[y][T.model]};k.push($)}c.forEach((T,$)=>{const P=document.querySelector(`#${T} select`);P&&(P.value=$+1)})}const b={data:k};console.log(b),aa(b)}const N=(_,k,b)=>v(b,_.qid,k);function S(_){kn[_?"unshift":"push"](()=>{d=_,n(2,d)})}function D(){f=this.value,n(4,f)}return e.$$set=_=>{"numModels"in _&&n(0,a=_.numModels),"models"in _&&n(1,s=_.models)},e.$$.update=()=>{e.$$.dirty&1&&n(7,r="1fr ".repeat(a).trim()),e.$$.dirty&1024&&n(6,o=".".repeat(m).padEnd(3)),e.$$.dirty&2052&&d&&(n(11,w=new q(d,{animation:150,dataIdAttr:"id",onUpdate(_){console.log("update"),c=w.toArray(),M({})}})),c=w.toArray(),console.log("rrrrr")),e.$$.dirty&8&&console.log("compareChatLog",l)},[a,s,d,l,f,p,o,r,g,v,m,w,N,S,D]}class ua extends Ge{constructor(t){super(),Xe(this,t,sa,ia,xe,{numModels:0,models:1})}}const ut=Et([{model:"llama",qid:1,rank:1,answer:"Llama's first unique answer."},{model:"gpt3.5",qid:1,rank:2,answer:"GPT-3.5's first unique answer."},{model:"gpt4",qid:1,rank:3,answer:"GPT-4's first unique answer."},{model:"claude",qid:1,rank:4,answer:"Claude's first unique answer."},{model:"llama",qid:2,rank:4,answer:"Llama's second unique answer."},{model:"gpt3.5",qid:2,rank:2,answer:"GPT-3.5's second unique answer."},{model:"gpt4",qid:2,rank:4,answer:"GPT-4's second unique answer."},{model:"claude",qid:2,rank:3,answer:"'s second unique answer."},{model:"llama",qid:3,rank:1,answer:"Llama's third unique answer."},{model:"gpt3.5",qid:3,rank:4,answer:"GPT-3.5's third unique answer."},{model:"gpt4",qid:3,rank:4,answer:"GPT-4's third unique answer."},{model:"claude",qid:3,rank:2,answer:"'s third unique answer."},{model:"llama",qid:4,rank:1,answer:"Llama's fourth unique answer."},{model:"gpt3.5",qid:4,rank:3,answer:"GPT-3.5's  unique answer."},{model:"gpt4",qid:4,rank:2,answer:"GPT-4's  unique answer."},{model:"claude",qid:4,rank:4,answer:"'s  unique answer."},{model:"llama",qid:5,rank:1,answer:"Llama's  unique answer."},{model:"gpt3.5",qid:5,rank:2,answer:"GPT-3.5's nique answer."},{model:"gpt4",qid:5,rank:3,answer:"GPT-4's fifth unique answer."},{model:"claude",qid:5,rank:4,answer:"'s fifthnswer."},{model:"llama",qid:6,rank:1,answer:"Llama's sixth unique answer."},{model:"gpt3.5",qid:6,rank:2,answer:"GPT-3.5's sixth unique answer."},{model:"gpt4",qid:6,rank:3,answer:"GPT-4's sixth unique answer."},{model:"claude",qid:6,rank:4,answer:"'s sixth uniq."}]);function Cr(e,t,n){const r=e.slice();return r[21]=t[n],r}function Or(e,t,n){const r=e.slice();return r[21]=t[n],r[25]=n,r}function xr(e,t,n){const r=e.slice();return r[26]=t[n],r}function Pr(e,t,n){const r=e.slice();return r[26]=t[n],r}function Ir(e){let t,n,r,o,l=`Q.${e[26]}`,a,s;return{c(){t=B("g"),n=B("line"),o=B("text"),a=Y(l),h(n,"class","axis-tick svelte-1nna9rx"),h(n,"x1","0"),h(n,"x2","0"),h(n,"y1",0),h(n,"y2",r=-e[6]+e[12].bottom+e[12].top),h(n,"stroke","black"),h(n,"stroke-dasharray","4"),h(o,"class","axis-text svelte-1nna9rx"),h(o,"y","15"),h(o,"text-anchor","middle"),h(t,"transform",s=`translate(${e[3](e[26])+0} ${e[6]-e[12].bottom})`),h(t,"class","svelte-1nna9rx")},m(u,f){H(u,t,f),E(t,n),E(t,o),E(o,a)},p(u,f){f&64&&r!==(r=-u[6]+u[12].bottom+u[12].top)&&h(n,"y2",r),f&512&&l!==(l=`Q.${u[26]}`)&&ie(a,l),f&584&&s!==(s=`translate(${u[3](u[26])+0} ${u[6]-u[12].bottom})`)&&h(t,"transform",s)},d(u){u&&z(t)}}}function qr(e){let t=Number.isInteger(e[26]),n,r=t&&Ir(e);return{c(){r&&r.c(),n=De()},m(o,l){r&&r.m(o,l),H(o,n,l)},p(o,l){l&512&&(t=Number.isInteger(o[26])),t?r?r.p(o,l):(r=Ir(o),r.c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null)},d(o){r&&r.d(o),o&&z(n)}}}function Rr(e){let t,n;return{c(){t=B("g"),h(t,"transform",n=`translate(${e[12].left} ${e[5](e[26])+0})`),h(t,"class","svelte-1nna9rx")},m(r,o){H(r,t,o)},p(r,o){o&32&&n!==(n=`translate(${r[12].left} ${r[5](r[26])+0})`)&&h(t,"transform",n)},d(r){r&&z(t)}}}function Fr(e,t){let n,r,o,l,a,s,u,f,p;function c(){return t[15](t[25])}function g(){return t[16](t[25])}return{key:e,first:null,c(){n=B("path"),l=B("path"),h(n,"class","model-path-outer svelte-1nna9rx"),h(n,"d",r=t[10](t[21])),h(n,"stroke","white"),h(n,"data-model",o=t[2][t[25]]),h(l,"class","model-path svelte-1nna9rx"),h(l,"d",a=t[10](t[21])),h(l,"role","img"),h(l,"stroke",s=t[11](t[2][t[25]])),h(l,"data-model",u=t[2][t[25]]),this.first=n},m(m,d){H(m,n,d),H(m,l,d),f||(p=[ee(l,"mouseover",c),ee(l,"focus",g),ee(l,"mouseout",rn),ee(l,"blur",rn)],f=!0)},p(m,d){t=m,d&1040&&r!==(r=t[10](t[21]))&&h(n,"d",r),d&20&&o!==(o=t[2][t[25]])&&h(n,"data-model",o),d&1040&&a!==(a=t[10](t[21]))&&h(l,"d",a),d&2068&&s!==(s=t[11](t[2][t[25]]))&&h(l,"stroke",s),d&20&&u!==(u=t[2][t[25]])&&h(l,"data-model",u)},d(m){m&&z(n),m&&z(l),f=!1,Ee(p)}}}function jr(e,t){let n,r,o,l,a,s,u=t[21].rank+"",f,p,c,g;return{key:e,first:null,c(){n=B("g"),r=B("circle"),s=B("text"),f=Y(u),h(r,"r",o=t[21].answer.length/2*0+12),h(r,"fill",l=t[11](t[21].model)),h(r,"stroke","white"),h(r,"class","model-circle svelte-1nna9rx"),h(r,"role","img"),h(r,"data-model",a=t[21].model),h(s,"class","bump-text svelte-1nna9rx"),h(s,"text-anchor","middle"),h(s,"alignment-baseline","middle"),h(s,"color","white"),h(s,"fill","white"),h(n,"transform",p=`translate(${t[3](t[21].qid)}, ${t[5](t[21].rank)})`),h(n,"class","svelte-1nna9rx"),this.first=n},m(m,d){H(m,n,d),E(n,r),E(n,s),E(s,f),c||(g=[ee(r,"mouseover",t[17]),ee(r,"focus",t[18]),ee(r,"mouseout",rn),ee(r,"blur",rn)],c=!0)},p(m,d){t=m,d&256&&o!==(o=t[21].answer.length/2*0+12)&&h(r,"r",o),d&2304&&l!==(l=t[11](t[21].model))&&h(r,"fill",l),d&256&&a!==(a=t[21].model)&&h(r,"data-model",a),d&256&&u!==(u=t[21].rank+"")&&ie(f,u),d&296&&p!==(p=`translate(${t[3](t[21].qid)}, ${t[5](t[21].rank)})`)&&h(n,"transform",p)},d(m){m&&z(n),c=!1,Ee(g)}}}function fa(e){let t,n,r,o,l,a,s,u,f,p,c,g,m,d,w=[],v=new Map,M,N=[],S=new Map,D,_,k,b,y,A=e[9],T=[];for(let O=0;O<A.length;O+=1)T[O]=qr(Pr(e,A,O));let $=e[5].domain(),P=[];for(let O=0;O<$.length;O+=1)P[O]=Rr(xr(e,$,O));let X=e[4];const V=O=>O[25];for(let O=0;O<X.length;O+=1){let F=Or(e,X,O),x=V(F);v.set(x,w[O]=Fr(x,F))}let ne=e[8];const oe=O=>O[21].model+O[21].qid;for(let O=0;O<ne.length;O+=1){let F=Cr(e,ne,O),x=oe(F);S.set(x,N[O]=jr(x,F))}return{c(){t=I("div"),n=B("svg"),r=B("line");for(let O=0;O<T.length;O+=1)T[O].c();s=De();for(let O=0;O<P.length;O+=1)P[O].c();u=B("text"),p=B("text"),m=B("text");for(let O=0;O<w.length;O+=1)w[O].c();M=De();for(let O=0;O<N.length;O+=1)N[O].c();D=B("text"),_=Y("Per-Question Ranks"),k=B("text"),b=Y("Answer ranks over time, by model."),h(r,"class","axis-line svelte-1nna9rx"),h(r,"x1",e[12].left),h(r,"x2",o=e[7]-e[12].right),h(r,"y1",l=e[6]-e[12].bottom),h(r,"y2",a=e[6]-e[12].bottom),h(u,"class","chart-title svelte-1nna9rx"),h(u,"y",e[12].top/2),h(u,"x",f=(e[7]+e[12].left)/2),h(u,"text-anchor","middle"),h(p,"class","axis-label svelte-1nna9rx"),h(p,"y",c=e[6]+e[12].bottom+10),h(p,"x",g=(e[7]+e[12].left)/2),h(p,"text-anchor","middle"),h(m,"class","axis-label svelte-1nna9rx"),h(m,"y",e[12].left/2),h(m,"x",d=-(e[6]/2)),h(m,"text-anchor","middle"),h(m,"transform","rotate(-90)"),h(D,"class","chart-title svelte-1nna9rx"),h(D,"y",e[12].top/2),h(D,"x",e[12].left),h(D,"text-anchor","start"),h(k,"class","chart-subtitle svelte-1nna9rx"),h(k,"y",e[12].top/2+15),h(k,"x",e[12].left),h(k,"opacity",".6"),h(k,"text-anchor","start"),h(n,"width",e[1]),h(n,"height",e[0]),h(n,"class","svelte-1nna9rx"),h(t,"id","chart-holder"),h(t,"class","svelte-1nna9rx"),lt(()=>e[19].call(t))},m(O,F){H(O,t,F),E(t,n),E(n,r);for(let x=0;x<T.length;x+=1)T[x]&&T[x].m(n,null);E(n,s);for(let x=0;x<P.length;x+=1)P[x]&&P[x].m(n,null);E(n,u),E(n,p),E(n,m);for(let x=0;x<w.length;x+=1)w[x]&&w[x].m(n,null);E(n,M);for(let x=0;x<N.length;x+=1)N[x]&&N[x].m(n,null);E(n,D),E(D,_),E(n,k),E(k,b),y=qn(t,e[19].bind(t))},p(O,[F]){if(F&128&&o!==(o=O[7]-O[12].right)&&h(r,"x2",o),F&64&&l!==(l=O[6]-O[12].bottom)&&h(r,"y1",l),F&64&&a!==(a=O[6]-O[12].bottom)&&h(r,"y2",a),F&4680){A=O[9];let x;for(x=0;x<A.length;x+=1){const Ye=Pr(O,A,x);T[x]?T[x].p(Ye,F):(T[x]=qr(Ye),T[x].c(),T[x].m(n,s))}for(;x<T.length;x+=1)T[x].d(1);T.length=A.length}if(F&4128){$=O[5].domain();let x;for(x=0;x<$.length;x+=1){const Ye=xr(O,$,x);P[x]?P[x].p(Ye,F):(P[x]=Rr(Ye),P[x].c(),P[x].m(n,u))}for(;x<P.length;x+=1)P[x].d(1);P.length=$.length}F&128&&f!==(f=(O[7]+O[12].left)/2)&&h(u,"x",f),F&64&&c!==(c=O[6]+O[12].bottom+10)&&h(p,"y",c),F&128&&g!==(g=(O[7]+O[12].left)/2)&&h(p,"x",g),F&64&&d!==(d=-(O[6]/2))&&h(m,"x",d),F&11284&&(X=O[4],w=kt(w,F,V,1,O,X,v,n,wt,Fr,M,Or)),F&33564968&&(ne=O[8],N=kt(N,F,oe,1,O,ne,S,n,wt,jr,D,Cr)),F&2&&h(n,"width",O[1]),F&1&&h(n,"height",O[0])},i:U,o:U,d(O){O&&z(t),he(T,O),he(P,O);for(let F=0;F<w.length;F+=1)w[F].d();for(let F=0;F<N.length;F+=1)N[F].d();y()}}}function rn(){document.querySelectorAll(".model-path, .model-path-outer, .model-circle").forEach(e=>{e.style.opacity=1})}function ca(e,t,n){let r,o,l,a,s,u,f,p,c,g,m;Be(e,ut,b=>n(8,m=b));let d,w,v={top:35,bottom:15,left:10,right:0};function M(b){document.querySelectorAll(".model-path, .model-path-outer, .model-circle").forEach(y=>{y.style.opacity=.12}),document.querySelectorAll(`.model-path[data-model="${r[b]}"], .model-circle[data-model="${r[b]}"]`).forEach(y=>{y.style.opacity=1})}const N=b=>M(b),S=b=>M(b),D=()=>M(i),_=()=>M(i);function k(){w=this.offsetWidth,d=this.offsetHeight,n(1,w),n(0,d)}return e.$$.update=()=>{e.$$.dirty&256&&m.filter(b=>b.qid===3).map(b=>({model:b.model,rank:b.rank})),e.$$.dirty&256&&console.log("firstData",m),e.$$.dirty&256&&n(2,r=Array.from(new Set(m.map(b=>b.model)))),e.$$.dirty&4&&console.log("models",r),e.$$.dirty&2&&n(7,o=w-v.left-v.right),e.$$.dirty&1&&n(6,l=d-v.top-v.bottom),e.$$.dirty&384&&n(3,a=gr().domain(m.map(b=>b.qid)).padding(.3).range([v.left,o-v.right])),e.$$.dirty&256&&n(14,s=m.map(b=>b.rank).sort((b,y)=>b-y)),e.$$.dirty&16448&&n(5,u=gr().domain(s).padding(1).range([v.top,l-v.bottom])),e.$$.dirty&256&&n(11,f=ft().domain(m.map(b=>b.model)).range(["#FF5470","#1B2D45","#00EBC7","#FDE24F","red"])),e.$$.dirty&40&&n(10,p=ra().x(b=>a(b.qid)).y(b=>u(b.rank))),e.$$.dirty&260&&n(4,c=r.map(b=>m.filter(y=>y.model===b))),e.$$.dirty&16&&console.log("md",c),e.$$.dirty&256&&console.log("ranks",m.map(b=>b.rank)),e.$$.dirty&8&&n(9,g=a.domain().length>10?a.domain().filter((b,y)=>y%2===0):a.domain())},[d,w,r,a,c,u,l,o,m,g,p,f,v,M,s,N,S,D,_,k]}class da extends Ge{constructor(t){super(),Xe(this,t,ca,fa,xe,{})}}function zr(e,t,n){const r=e.slice();return r[13]=t[n],r[15]=n,r}function Hr(e,t,n){const r=e.slice();return r[16]=t[n],r}function Lr(e,t,n){const r=e.slice();return r[16]=t[n],r}function Br(e){let t,n,r=e[16]+"",o,l;return{c(){t=B("g"),n=B("text"),o=Y(r),h(n,"class","axis-text svelte-1y9gffu"),h(n,"x","-5"),h(n,"y","0"),h(n,"text-anchor","end"),h(t,"transform",l=`translate(${e[9].left} ${e[8](e[16])+e[8].bandwidth()/2})`)},m(a,s){H(a,t,s),E(t,n),E(n,o)},p(a,s){s&4&&r!==(r=a[16]+"")&&ie(o,r),s&260&&l!==(l=`translate(${a[9].left} ${a[8](a[16])+a[8].bandwidth()/2})`)&&h(t,"transform",l)},d(a){a&&z(t)}}}function Xr(e){let t,n,r=e[16]+"",o,l;return{c(){t=B("g"),n=B("text"),o=Y(r),h(n,"class","axis-text svelte-1y9gffu"),h(n,"y","15"),h(n,"text-anchor","middle"),h(t,"transform",l=`translate(${e[7](e[16])}, ${e[4]-e[9].bottom})`)},m(a,s){H(a,t,s),E(t,n),E(n,o)},p(a,s){s&128&&r!==(r=a[16]+"")&&ie(o,r),s&144&&l!==(l=`translate(${a[7](a[16])}, ${a[4]-a[9].bottom})`)&&h(t,"transform",l)},d(a){a&&z(t)}}}function Gr(e){let t,n=e[16]%2==0&&Xr(e);return{c(){n&&n.c(),t=De()},m(r,o){n&&n.m(r,o),H(r,t,o)},p(r,o){r[16]%2==0?n?n.p(r,o):(n=Xr(r),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(r){n&&n.d(r),r&&z(t)}}}function Yr(e){let t,n,r,o,l,a,s,u=e[13].avgRank.toFixed(2)+"",f,p,c;return{c(){t=B("rect"),s=B("text"),f=Y(u),h(t,"y",n=e[8](e[13].model)),h(t,"x",e[9].left),h(t,"width",r=e[7](e[13].avgRank)-e[9].left),h(t,"height",o=e[8].bandwidth()),h(t,"fill",l=e[6](e[13].model)),h(t,"class","model-path"),h(t,"data-model",a=e[5][e[15]]),h(s,"class","label-text svelte-1y9gffu"),h(s,"y",p=e[8](e[13].model)+e[8].bandwidth()/2),h(s,"x",c=e[7](e[13].avgRank)+5),h(s,"text-anchor","start"),h(s,"dominant-baseline","middle")},m(g,m){H(g,t,m),H(g,s,m),E(s,f)},p(g,m){m&260&&n!==(n=g[8](g[13].model))&&h(t,"y",n),m&132&&r!==(r=g[7](g[13].avgRank)-g[9].left)&&h(t,"width",r),m&256&&o!==(o=g[8].bandwidth())&&h(t,"height",o),m&68&&l!==(l=g[6](g[13].model))&&h(t,"fill",l),m&32&&a!==(a=g[5][g[15]])&&h(t,"data-model",a),m&4&&u!==(u=g[13].avgRank.toFixed(2)+"")&&ie(f,u),m&260&&p!==(p=g[8](g[13].model)+g[8].bandwidth()/2)&&h(s,"y",p),m&132&&c!==(c=g[7](g[13].avgRank)+5)&&h(s,"x",c)},d(g){g&&z(t),g&&z(s)}}}function ha(e){let t,n,r,o,l,a,s,u,f,p,c,g,m=e[2].map(Wr),d=[];for(let S=0;S<m.length;S+=1)d[S]=Br(Lr(e,m,S));let w=e[7].ticks(),v=[];for(let S=0;S<w.length;S+=1)v[S]=Gr(Hr(e,w,S));let M=e[2],N=[];for(let S=0;S<M.length;S+=1)N[S]=Yr(zr(e,M,S));return{c(){t=I("div"),n=B("svg");for(let S=0;S<d.length;S+=1)d[S].c();r=De();for(let S=0;S<v.length;S+=1)v[S].c();o=De();for(let S=0;S<N.length;S+=1)N[S].c();l=B("line"),f=B("text"),p=Y("Average Rank"),c=B("text"),h(l,"class","axis-line svelte-1y9gffu"),h(l,"x1",e[9].left),h(l,"x2",a=e[3]-e[9].right),h(l,"y1",s=e[4]-e[9].bottom),h(l,"y2",u=e[4]-e[9].bottom),h(f,"class","chart-title"),h(f,"y",e[9].top/2),h(f,"x",e[9].left),h(f,"text-anchor","start"),h(c,"class","chart-subtitle"),h(c,"y",e[9].top/2+15),h(c,"x",e[9].left),h(c,"opacity",".6"),h(c,"text-anchor","start"),h(n,"width",e[1]),h(n,"height",e[0]),h(t,"id","bar-chart-holder"),h(t,"class","svelte-1y9gffu"),lt(()=>e[12].call(t))},m(S,D){H(S,t,D),E(t,n);for(let _=0;_<d.length;_+=1)d[_]&&d[_].m(n,null);E(n,r);for(let _=0;_<v.length;_+=1)v[_]&&v[_].m(n,null);E(n,o);for(let _=0;_<N.length;_+=1)N[_]&&N[_].m(n,null);E(n,l),E(n,f),E(f,p),E(n,c),g=qn(t,e[12].bind(t))},p(S,[D]){if(D&772){m=S[2].map(Wr);let _;for(_=0;_<m.length;_+=1){const k=Lr(S,m,_);d[_]?d[_].p(k,D):(d[_]=Br(k),d[_].c(),d[_].m(n,r))}for(;_<d.length;_+=1)d[_].d(1);d.length=m.length}if(D&656){w=S[7].ticks();let _;for(_=0;_<w.length;_+=1){const k=Hr(S,w,_);v[_]?v[_].p(k,D):(v[_]=Gr(k),v[_].c(),v[_].m(n,o))}for(;_<v.length;_+=1)v[_].d(1);v.length=w.length}if(D&996){M=S[2];let _;for(_=0;_<M.length;_+=1){const k=zr(S,M,_);N[_]?N[_].p(k,D):(N[_]=Yr(k),N[_].c(),N[_].m(n,l))}for(;_<N.length;_+=1)N[_].d(1);N.length=M.length}D&8&&a!==(a=S[3]-S[9].right)&&h(l,"x2",a),D&16&&s!==(s=S[4]-S[9].bottom)&&h(l,"y1",s),D&16&&u!==(u=S[4]-S[9].bottom)&&h(l,"y2",u),D&2&&h(n,"width",S[1]),D&1&&h(n,"height",S[0])},i:U,o:U,d(S){S&&z(t),he(d,S),he(v,S),he(N,S),g()}}}const Wr=e=>e.model;function pa(e,t,n){let r,o,l,a,s,u,f,p,c;Be(e,ut,v=>n(11,c=v));let g=300,m=500,d={top:50,bottom:0,left:100,right:0};function w(){m=this.offsetWidth,g=this.offsetHeight,n(1,m),n(0,g)}return e.$$.update=()=>{e.$$.dirty&2048&&n(10,r=c.reduce((v,M)=>(v[M.model]?(v[M.model].sum+=M.rank,v[M.model].count++):v[M.model]={sum:M.rank,count:1},v),{})),e.$$.dirty&1024&&n(2,o=Object.keys(r).map(v=>({model:v,avgRank:r[v].sum/r[v].count}))),e.$$.dirty&2&&n(3,l=m-d.left-d.right),e.$$.dirty&1&&n(4,a=g-d.top-d.bottom),e.$$.dirty&20&&n(8,s=St().rangeRound([d.top,a-d.bottom]).padding(.05).domain(o.map(v=>v.model))),e.$$.dirty&12&&n(7,u=Xn().rangeRound([d.left,l-d.right]).domain([0,Pi(o,v=>v.avgRank)])),e.$$.dirty&4&&n(6,f=ft().domain(o.map(v=>v.model)).range(["#FF5470","#1B2D45","#00EBC7","#FDE24F"])),e.$$.dirty&2048&&n(5,p=Array.from(new Set(c.map(v=>v.model))))},[g,m,o,l,a,p,f,u,s,d,r,c,w]}class ga extends Ge{constructor(t){super(),Xe(this,t,pa,ha,xe,{})}}function Qr(e,t,n){const r=e.slice();return r[20]=t[n],r[22]=n,r}function Ur(e,t,n){const r=e.slice();return r[23]=t[n],r[25]=n,r}function Vr(e,t,n){const r=e.slice();return r[23]=t[n],r}function Zr(e){let t,n=e[23].key+"",r,o,l;function a(){return e[10](e[23])}return{c(){t=I("th"),r=Y(n),h(t,"class","svelte-owgjbp")},m(s,u){H(s,t,u),E(t,r),o||(l=ee(t,"click",a),o=!0)},p(s,u){e=s,u&64&&n!==(n=e[23].key+"")&&ie(r,n)},d(s){s&&z(t),o=!1,l()}}}function Jr(e,t){let n,r=(t[20][t[23].key].length>ei&&t[4]!==`${t[22]}-${t[25]}`?`${t[20][t[23].key].substring(0,40)}...`:t[20][t[23].key])+"",o,l,a,s;function u(){return t[11](t[22],t[25])}return{key:e,first:null,c(){n=I("td"),o=Y(r),h(n,"class",l="cell-type-"+t[23].type+" svelte-owgjbp"),me(n,"background",t[23].key==="change"?t[7](t[20][t[23].key]):"none"),Un(n,"active",t[4]===`${t[22]}-${t[25]}`),this.first=n},m(f,p){H(f,n,p),E(n,o),a||(s=ee(n,"click",u),a=!0)},p(f,p){t=f,p&112&&r!==(r=(t[20][t[23].key].length>ei&&t[4]!==`${t[22]}-${t[25]}`?`${t[20][t[23].key].substring(0,40)}...`:t[20][t[23].key])+"")&&ie(o,r),p&64&&l!==(l="cell-type-"+t[23].type+" svelte-owgjbp")&&h(n,"class",l),p&96&&me(n,"background",t[23].key==="change"?t[7](t[20][t[23].key]):"none"),p&80&&Un(n,"active",t[4]===`${t[22]}-${t[25]}`)},d(f){f&&z(n),a=!1,s()}}}function Kr(e){let t,n=[],r=new Map,o,l=e[6];const a=s=>s[23].key;for(let s=0;s<l.length;s+=1){let u=Ur(e,l,s),f=a(u);r.set(f,n[s]=Jr(f,u))}return{c(){t=I("tr");for(let s=0;s<n.length;s+=1)n[s].c();o=J(),h(t,"class","svelte-owgjbp")},m(s,u){H(s,t,u);for(let f=0;f<n.length;f+=1)n[f]&&n[f].m(t,null);E(t,o)},p(s,u){u&240&&(l=s[6],n=kt(n,u,a,1,s,l,r,t,wt,Jr,o,Ur))},d(s){s&&z(t);for(let u=0;u<n.length;u+=1)n[u].d()}}}function ma(e){let t,n,r,o,l,a,s,u,f,p=e[6],c=[];for(let d=0;d<p.length;d+=1)c[d]=Zr(Vr(e,p,d));let g=e[5],m=[];for(let d=0;d<g.length;d+=1)m[d]=Kr(Qr(e,g,d));return{c(){t=I("div"),n=I("div"),r=I("table"),o=I("thead");for(let d=0;d<c.length;d+=1)c[d].c();l=J(),a=I("tbody");for(let d=0;d<m.length;d+=1)m[d].c();u=J(),f=I("br"),h(o,"class","svelte-owgjbp"),h(a,"class","svelte-owgjbp"),h(r,"class",s="pretty-table "+e[0].style+" svelte-owgjbp"),h(n,"class","svelte-owgjbp"),h(f,"class","svelte-owgjbp"),h(t,"class","table svelte-owgjbp")},m(d,w){H(d,t,w),E(t,n),E(n,r),E(r,o);for(let v=0;v<c.length;v+=1)c[v]&&c[v].m(o,null);E(r,l),E(r,a);for(let v=0;v<m.length;v+=1)m[v]&&m[v].m(a,null);E(t,u),E(t,f)},p(d,[w]){if(w&78){p=d[6];let v;for(v=0;v<p.length;v+=1){const M=Vr(d,p,v);c[v]?c[v].p(M,w):(c[v]=Zr(M),c[v].c(),c[v].m(o,null))}for(;v<c.length;v+=1)c[v].d(1);c.length=p.length}if(w&240){g=d[5];let v;for(v=0;v<g.length;v+=1){const M=Qr(d,g,v);m[v]?m[v].p(M,w):(m[v]=Kr(M),m[v].c(),m[v].m(a,null))}for(;v<m.length;v+=1)m[v].d(1);m.length=g.length}w&1&&s!==(s="pretty-table "+d[0].style+" svelte-owgjbp")&&h(r,"class",s)},i:U,o:U,d(d){d&&z(t),he(c,d),he(m,d)}}}let ei=25,_a=0;function va(e,t,n){let r,o,l,a;Be(e,ut,D=>n(9,a=D));let s={};const u=an(".2f");function f(D){let _=D.reduce((b,y)=>(b[y.model]||(b[y.model]=[]),b[y.model].push(y.rank),b),{});return Object.entries(_).map(([b,y])=>{let A=y.reduce(($,P)=>($[P]=($[P]||0)+1,$),{}),T=Object.entries(A).reduce(($,P)=>P[1]>$[1]?P:$)[0];return{model:b,overall_rank:Number(T),average_rank:u(tl(y)),standard_deviation_rank:u(Go(y))}})}s={...{columns:{},style:"normal",paged:25},...s};const c=Xn().domain([-1,0,1]).range(["#FF5470","#f8f8f8","#00ebc7"]);let{sortable:g,index:m,paged:d}=s,w,v=!0;if(g&&m)throw new Error("A table can either be ranked or sortable, but not both");m=1,g=1;let M=null;const N=D=>{g&&(w===D.key&&n(2,v=!v),n(1,w=D.key))},S=(D,_)=>{n(4,M=M===`${D}-${_}`?null:`${D}-${_}`)};return e.$$.update=()=>{if(e.$$.dirty&512,e.$$.dirty&512&&n(8,r=f(a)),e.$$.dirty&774){w&&n(8,r=r.slice().sort((_,k)=>{let b=_[w],y=k[w];if(b==y)return JSON.stringify(_).localeCompare(JSON.stringify(k));let A=b>y?1:b<y?-1:0;return v&&(A=-A),A}));let D=_a*d;n(5,l=r.slice(D,D+(d||r.length))),d&&Math.ceil(a.length/d)}e.$$.dirty&257&&n(6,o=Object.keys(r[0]).map(D=>{const _=s.columns[D]||{};return{key:D,type:_.type||typeof r[0][D],options:_}}))},n(5,l=[]),[s,w,v,g,M,l,o,c,r,a,N,S]}class ba extends Ge{constructor(t){super(),Xe(this,t,va,ma,xe,{})}}function ti(e,t,n){const r=e.slice();return r[19]=t[n],r}function ni(e,t,n){const r=e.slice();return r[22]=t[n],r}function ri(e,t,n){const r=e.slice();return r[25]=t[n],r[27]=n,r}function ii(e){let t,n=e[25]+"",r,o,l,a=e[25]+"",s,u;return{c(){t=B("text"),r=Y(n),l=B("text"),s=Y(a),h(t,"class","axis-text svelte-t6wv8i"),h(t,"x",o=e[7].left+e[5](e[25])+e[5].bandwidth()/2),h(t,"y",e[7].top-10),h(t,"text-anchor","middle"),h(l,"class","axis-text svelte-t6wv8i"),h(l,"x",e[7].left-10),h(l,"y",u=e[7].top+e[4](e[25])+e[4].bandwidth()/2),h(l,"text-anchor","end"),h(l,"dominant-baseline","middle")},m(f,p){H(f,t,p),E(t,r),H(f,l,p),E(l,s)},p(f,p){p&8&&n!==(n=f[25]+"")&&ie(r,n),p&40&&o!==(o=f[7].left+f[5](f[25])+f[5].bandwidth()/2)&&h(t,"x",o),p&8&&a!==(a=f[25]+"")&&ie(s,a),p&24&&u!==(u=f[7].top+f[4](f[25])+f[4].bandwidth()/2)&&h(l,"y",u)},d(f){f&&z(t),f&&z(l)}}}function oi(e){let t,n,r,o,l,a,s,u,f=e[6](e[2][e[19]][e[22]])+"",p,c,g,m;return{c(){t=B("rect"),u=B("text"),p=Y(f),h(t,"x",n=e[7].left+e[5](e[22])),h(t,"y",r=e[7].top+e[4](e[19])),h(t,"width",o=e[5].bandwidth()),h(t,"height",l=e[4].bandwidth()),h(t,"fill",a=e[8](e[19],e[22])),h(t,"rx","4"),h(t,"ry","4"),h(t,"class","model-path"),h(t,"data-model",s=e[19]),h(u,"x",c=e[7].left+e[5](e[22])+e[5].bandwidth()/2),h(u,"y",g=e[7].top+e[4](e[19])+e[4].bandwidth()/2),h(u,"text-anchor","middle"),h(u,"dominant-baseline","middle"),h(u,"class","model-path"),h(u,"data-model",m=e[19])},m(d,w){H(d,t,w),H(d,u,w),E(u,p)},p(d,w){w&40&&n!==(n=d[7].left+d[5](d[22]))&&h(t,"x",n),w&24&&r!==(r=d[7].top+d[4](d[19]))&&h(t,"y",r),w&32&&o!==(o=d[5].bandwidth())&&h(t,"width",o),w&16&&l!==(l=d[4].bandwidth())&&h(t,"height",l),w&8&&a!==(a=d[8](d[19],d[22]))&&h(t,"fill",a),w&8&&s!==(s=d[19])&&h(t,"data-model",s),w&12&&f!==(f=d[6](d[2][d[19]][d[22]])+"")&&ie(p,f),w&40&&c!==(c=d[7].left+d[5](d[22])+d[5].bandwidth()/2)&&h(u,"x",c),w&24&&g!==(g=d[7].top+d[4](d[19])+d[4].bandwidth()/2)&&h(u,"y",g),w&8&&m!==(m=d[19])&&h(u,"data-model",m)},d(d){d&&z(t),d&&z(u)}}}function li(e){let t,n=e[3],r=[];for(let o=0;o<n.length;o+=1)r[o]=oi(ni(e,n,o));return{c(){for(let o=0;o<r.length;o+=1)r[o].c();t=De()},m(o,l){for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(o,l);H(o,t,l)},p(o,l){if(l&508){n=o[3];let a;for(a=0;a<n.length;a+=1){const s=ni(o,n,a);r[a]?r[a].p(s,l):(r[a]=oi(s),r[a].c(),r[a].m(t.parentNode,t))}for(;a<r.length;a+=1)r[a].d(1);r.length=n.length}},d(o){he(r,o),o&&z(t)}}}function ya(e){let t,n,r,o,l,a,s,u=e[3],f=[];for(let g=0;g<u.length;g+=1)f[g]=ii(ri(e,u,g));let p=e[3],c=[];for(let g=0;g<p.length;g+=1)c[g]=li(ti(e,p,g));return{c(){t=I("div"),n=B("svg");for(let g=0;g<f.length;g+=1)f[g].c();r=De();for(let g=0;g<c.length;g+=1)c[g].c();o=B("text"),l=Y("Relative Performance"),a=B("text"),h(o,"class","chart-title"),h(o,"y",e[7].top/2),h(o,"x",e[7].left),h(o,"text-anchor","start"),h(a,"class","chart-subtitle svelte-t6wv8i"),h(a,"y",e[7].top/2+15),h(a,"x",e[7].left),h(a,"opacity",".6"),h(a,"text-anchor","start"),h(n,"width",e[1]),h(n,"height",e[0]),h(t,"id","heatmap-holder"),h(t,"class","svelte-t6wv8i"),lt(()=>e[16].call(t))},m(g,m){H(g,t,m),E(t,n);for(let d=0;d<f.length;d+=1)f[d]&&f[d].m(n,null);E(n,r);for(let d=0;d<c.length;d+=1)c[d]&&c[d].m(n,null);E(n,o),E(o,l),E(n,a),s=qn(t,e[16].bind(t))},p(g,[m]){if(m&184){u=g[3];let d;for(d=0;d<u.length;d+=1){const w=ri(g,u,d);f[d]?f[d].p(w,m):(f[d]=ii(w),f[d].c(),f[d].m(n,r))}for(;d<f.length;d+=1)f[d].d(1);f.length=u.length}if(m&508){p=g[3];let d;for(d=0;d<p.length;d+=1){const w=ti(g,p,d);c[d]?c[d].p(w,m):(c[d]=li(w),c[d].c(),c[d].m(n,o))}for(;d<c.length;d+=1)c[d].d(1);c.length=p.length}m&2&&h(n,"width",g[1]),m&1&&h(n,"height",g[0])},i:U,o:U,d(g){g&&z(t),he(f,g),he(c,g),s()}}}function wa(e,t,n){let r,o,l,a,s,u,f,p,c,g,m;Be(e,ut,_=>n(15,m=_));const d=an(".1f");function w(_){let k=_.reduce((A,T)=>(A[T.qid]||(A[T.qid]=[]),A[T.qid].push(T),A),{}),b=Array.from(new Set(_.map(A=>A.model))),y=b.reduce((A,T)=>(A[T]=b.reduce(($,P)=>($[P]={sum:0,count:0},$),{}),A),{});for(let A in k){let T=k[A];for(let $ of b)for(let P of b){let X=T.find(ne=>ne.model===$),V=T.find(ne=>ne.model===P);X&&V&&(y[$][P].sum+=V.rank-X.rank,y[$][P].count++)}}for(let A in y)for(let T in y[A])y[A][T].count>0?y[A][T]=y[A][T].sum/y[A][T].count:y[A][T]=0;return y}let v=500,M=500,N={top:50,bottom:0,left:65,right:25};function S(_,k){let b=r[_][k];return b===0?"white":b>=0?g(_):g(k)}function D(){M=this.offsetWidth,v=this.offsetHeight,n(1,M),n(0,v)}return e.$$.update=()=>{e.$$.dirty&32768&&n(2,r=w(m)),e.$$.dirty&32768&&n(3,o=Array.from(new Set(m.map(_=>_.model)))),e.$$.dirty&2&&n(14,l=M-N.left-N.right),e.$$.dirty&1&&n(13,a=v-N.top-N.bottom),e.$$.dirty&16392&&n(5,s=St().range([0,l]).domain(o).padding(.05)),e.$$.dirty&8200&&n(4,u=St().range([0,a]).domain(o).padding(.05)),e.$$.dirty&4&&n(12,f=Object.values(r).flatMap(_=>Object.values(_))),e.$$.dirty&4096&&n(11,p=el(f)),e.$$.dirty&4096&&n(10,c=Pi(f)),e.$$.dirty&8&&n(9,g=ft().domain(o).range(["#FF5470","#1B2D45","#00EBC7","#FDE24F"])),e.$$.dirty&3592&&o.reduce((_,k)=>(_[k]=Bi().domain([p,c]).interpolator(Cn("white",g(k))),_),{})},[v,M,r,o,u,s,d,N,S,g,c,p,f,a,l,m,D]}class ka extends Ge{constructor(t){super(),Xe(this,t,wa,ya,xe,{})}}function ai(e,t,n){const r=e.slice();return r[8]=t[n],r[10]=n,r}function Ea(e){let t;return{c(){t=I("div"),t.innerHTML="<h5>To view the comparison dashboard, you must first rank some comparisons!</h5>",h(t,"class","holder svelte-1gze3r0")},m(n,r){H(n,t,r)},p:U,i:U,o:U,d(n){n&&z(t)}}}function Sa(e){let t,n,r,o,l,a,s,u,f,p,c,g,m,d,w,v,M,N,S,D,_,k=e[1],b=[];for(let y=0;y<k.length;y+=1)b[y]=si(ai(e,k,y));return u=new da({}),c=new ba({}),M=new ga({}),D=new ka({}),{c(){t=I("div"),n=I("div"),r=I("div"),o=I("h4"),o.textContent="Model Comparisons",l=J();for(let y=0;y<b.length;y+=1)b[y].c();a=J(),s=I("div"),et(u.$$.fragment),f=J(),p=I("div"),et(c.$$.fragment),g=J(),m=I("div"),d=I("div"),w=J(),v=I("div"),et(M.$$.fragment),N=J(),S=I("div"),et(D.$$.fragment),h(o,"class","svelte-1gze3r0"),h(r,"class","chart-captions svelte-1gze3r0"),h(s,"class","eval-main"),h(p,"class","eval-table svelte-1gze3r0"),h(n,"class","left-charts svelte-1gze3r0"),h(d,"class","right-chart-1 svelte-1gze3r0"),h(v,"class","right-chart-2 svelte-1gze3r0"),h(S,"class","right-chart-3 svelte-1gze3r0"),h(m,"class","right-charts svelte-1gze3r0"),h(t,"class","eval-container svelte-1gze3r0")},m(y,A){H(y,t,A),E(t,n),E(n,r),E(r,o),E(r,l);for(let T=0;T<b.length;T+=1)b[T]&&b[T].m(r,null);E(n,a),E(n,s),je(u,s,null),E(n,f),E(n,p),je(c,p,null),E(t,g),E(t,m),E(m,d),E(m,w),E(m,v),je(M,v,null),E(m,N),E(m,S),je(D,S,null),_=!0},p(y,A){if(A&14){k=y[1];let T;for(T=0;T<k.length;T+=1){const $=ai(y,k,T);b[T]?b[T].p($,A):(b[T]=si($),b[T].c(),b[T].m(r,null))}for(;T<b.length;T+=1)b[T].d(1);b.length=k.length}},i(y){_||(be(u.$$.fragment,y),be(c.$$.fragment,y),be(M.$$.fragment,y),be(D.$$.fragment,y),_=!0)},o(y){Ae(u.$$.fragment,y),Ae(c.$$.fragment,y),Ae(M.$$.fragment,y),Ae(D.$$.fragment,y),_=!1},d(y){y&&z(t),he(b,y),ze(u),ze(c),ze(M),ze(D)}}}function si(e){let t,n=e[8]+"",r,o,l,a;function s(){return e[4](e[10])}function u(){return e[5](e[10])}return{c(){t=I("button"),r=Y(n),h(t,"data-model",o=e[8]),h(t,"class","model-path svelte-1gze3r0"),me(t,"color","white"),me(t,"background",e[2](e[8]))},m(f,p){H(f,t,p),E(t,r),l||(a=[ee(t,"mouseover",s),ee(t,"focus",u),ee(t,"mouseout",ui),ee(t,"blur",ui)],l=!0)},p(f,p){e=f,p&2&&n!==(n=e[8]+"")&&ie(r,n),p&2&&o!==(o=e[8])&&h(t,"data-model",o),p&6&&me(t,"background",e[2](e[8]))},d(f){f&&z(t),l=!1,Ee(a)}}}function Da(e){let t,n,r,o,l,a;const s=[Sa,Ea],u=[];function f(p,c){return p[0].length>0?0:1}return o=f(e),l=u[o]=s[o](e),{c(){t=I("div"),n=I("div"),n.innerHTML=`<h5 class="underline bold svelte-1gze3r0">Comparisons</h5> 
    <p class="svelte-1gze3r0">This panes represents the training performance of your model.</p> 
    <button class="svelte-1gze3r0">Download Data</button>`,r=J(),l.c(),h(n,"class","instructions svelte-1gze3r0"),h(t,"class","main-container svelte-1gze3r0")},m(p,c){H(p,t,c),E(t,n),E(t,r),u[o].m(t,null),a=!0},p(p,[c]){let g=o;o=f(p),o===g?u[o].p(p,c):(lo(),Ae(u[g],1,1,()=>{u[g]=null}),ao(),l=u[o],l?l.p(p,c):(l=u[o]=s[o](p),l.c()),be(l,1),l.m(t,null))},i(p){a||(be(l),a=!0)},o(p){Ae(l),a=!1},d(p){p&&z(t),u[o].d()}}}function ui(){document.querySelectorAll(".model-path, .model-path-outer, .model-circle").forEach(e=>{e.style.opacity=1})}function Ma(e,t,n){let r,o,l;Be(e,ut,p=>n(0,l=p));async function a(){const c=await(await fetch("/chat/comparator/db/retrieve")).json();console.log("uploooo",c);const m=c.data.map(d=>({model:d.model,answer:d.answer,qid:parseInt(d.qid),rank:parseInt(d.rank)}));pi(ut,l=[...m],l)}vi(()=>{a()});function s(p){document.querySelectorAll(".model-path, .model-path-outer, .model-circle").forEach(c=>{c.style.opacity=.12}),document.querySelectorAll(`.model-path[data-model="${r[p]}"], .model-circle[data-model="${r[p]}"]`).forEach(c=>{c.style.opacity=1})}const u=p=>s(p),f=p=>s(p);return e.$$.update=()=>{e.$$.dirty&1&&n(1,r=Array.from(new Set(l.map(p=>p.model)))),e.$$.dirty&1&&n(2,o=ft().domain(l.map(p=>p.model)).range(["#FF5470","#1B2D45","#00EBC7","#FDE24F","red"]))},[l,r,o,s,u,f]}class Ta extends Ge{constructor(t){super(),Xe(this,t,Ma,Da,xe,{})}}function fi(e,t,n){const r=e.slice();return r[6]=t[n],r}function ci(e){let t,n=e[0],r=[];for(let o=0;o<n.length;o+=1)r[o]=di(fi(e,n,o));return{c(){for(let o=0;o<r.length;o+=1)r[o].c();t=De()},m(o,l){for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(o,l);H(o,t,l)},p(o,l){if(l&5){n=o[0];let a;for(a=0;a<n.length;a+=1){const s=fi(o,n,a);r[a]?r[a].p(s,l):(r[a]=di(s),r[a].c(),r[a].m(t.parentNode,t))}for(;a<r.length;a+=1)r[a].d(1);r.length=n.length}},d(o){he(r,o),o&&z(t)}}}function di(e){let t,n=e[6].svelte_component+"",r,o,l,a;function s(){return e[3](e[6])}return{c(){t=I("button"),r=Y(n),h(t,"aria-label",o=`Load ${e[6].svelte_component} component`)},m(u,f){H(u,t,f),E(t,r),l||(a=ee(t,"click",s),l=!0)},p(u,f){e=u,f&1&&n!==(n=e[6].svelte_component+"")&&ie(r,n),f&1&&o!==(o=`Load ${e[6].svelte_component} component`)&&h(t,"aria-label",o)},d(u){u&&z(t),l=!1,a()}}}function $a(e){let t,n,r,o,l,a=e[0].length>1&&ci(e);return n=new ua({}),o=new Ta({}),{c(){a&&a.c(),t=J(),et(n.$$.fragment),r=J(),et(o.$$.fragment)},m(s,u){a&&a.m(s,u),H(s,t,u),je(n,s,u),H(s,r,u),je(o,s,u),l=!0},p(s,[u]){s[0].length>1?a?a.p(s,u):(a=ci(s),a.c(),a.m(t.parentNode,t)):a&&(a.d(1),a=null)},i(s){l||(be(n.$$.fragment,s),be(o.$$.fragment,s),l=!0)},o(s){Ae(n.$$.fragment,s),Ae(o.$$.fragment,s),l=!1},d(s){a&&a.d(s),s&&z(t),ze(n,s),s&&z(r),ze(o,s)}}}function Na(e,t,n){let r;const o=Et([]);Be(e,o,u=>n(0,r=u));const l=Et(null),a=u=>{l.set(u)};return fetch("/components").then(u=>{if(!u.ok)throw new Error(`HTTP error! status: ${u.status}`);return u.json()}).then(u=>{o.set(u),l.set(u[0])}).catch(u=>{console.log("Fetch request failed",u)}),[r,o,a,u=>a(u)]}class Aa extends Ge{constructor(t){super(),Xe(this,t,Na,$a,xe,{})}}new Aa({target:document.getElementById("app")});
